(this["webpackJsonpgerenciador-react-app"]=this["webpackJsonpgerenciador-react-app"]||[]).push([[0],{499:function(e){e.exports=JSON.parse('{"Management":"Managent","Logout":"Logout","Actions":"Actions","actions":"actions","action":"action","Action":"Action","Name":"Name","Description":"Description","Title":"Title","Price":"Price","Department":"Department","Departament Properties":"Adm. Dep","Departament":"Department","Departaments":"Departments","Category":"Category","Sub Category":"Sub Category","Categories":"Categories","Subcategories":"Subcategories","Products":"Products","products":"products","Order Properties":"Order Properties","Administration":"Administration","Cheque Mgmt":"Cheque Mgmt","Expense Mgmt":"Expense Mgmt","Finance":"Finance","Update":"Update","update":"update","Total":"Total","Search":"Search","Status":"Status","Add Service":"Add Service","Update Service":"Update Service","Conclude By":"Conclude By","% Discount":"% Discount","In Stock":"In Stock","Total Units":"Total Units","Not Available":"Not Available","On Hold":"On Hold","Available":"Available","Active":"Active","Open":"Open","Closed":"Closed","Partial":"Partial","Quotation":"Quotation","Canceled":"Canceled","Discount":"Discount","BCode":"BCode","None":"None","New":"New","Preparation":"Preparation","Production":"Production","Quality":"Quality","Finishing":"Finishing","Completed":"Completed","Delivered | Returned":"Delivered | Returned","Concluded":"Concluded","ID":"ID","Client":"Client","Process Status":"Process Status","Total Cost":"Total Cost","Total Paid":"Total Paid","Est. Conlusion":"Est. Conlusion","Conlusion Date":"Conlusion Date","Created At":"Created At","Last Pay date":"Last Pay date","Admins":"Admins","Tasks":"Tasks","Start Date":"Start Date","Est. Conclusion Date":"Est. Conclusion Date","Assignee":"Assignee","Leader":"Leader","Helpers":"Helpers","Create Task":"Create Task","Revenue":"Revenue","Cost":"Cost","Collected":"Collected","Yet to collect":"Yet to collect","Profit":"Profit","Expense":"Expense","Real Profits":"Real Profits","All Time":"All Time","Last 30 days":"Last 30 days","Custom":"Custom","Dashboard Reports":"Dashboard Reports","Quotations":"Quotations","Placed Orders":"Placed Orders","Place":"Place","Orders":"Orders","Products Registered":"Produts Registered","Rep Orders":"Rep Orders","Top departments":"Top departments","Top Representants Earnings":"Top Representants Earnings","See by date range":"See by date range","Organizations":"Organizations","Branches":"Branches","Brands":"Brands","Brand":"Brand","Representants":"Representants","Departments":"Departments","Expense Stats":"Expense Stats","Create Expense":"Create Expense","Total Expenses":"Total Expenses","Desired Profit":"Desired Profit","Paid":"Paid","Not Paid":"Not Paid","Next Month Expense":"Next Month Expense","Late Payment":"Late Payment","You have few product with low stock":"You have few product with low stock","Kit":"Kit","Create":"Create","Service":"Service","Edit":"Edit","Org not selected":"Org not selected","product saved":"product saved","Something went wrong":"Something went wrong","Could not fetch":"Could not fetch","departments":"departments","Worth":"Worth","Subcategory":"Subcategory","Model":"Model","Submit":"Submit","saved successfully":"saved successfully","Provider":"Provider","Min Stock Threshold":"Min Stock Threshold","Percentages":"Percentages","Absolute value":"Absolute value","About":"About","Comment":"Comment","Per day":"Per day","Per hour":"Per hour","Orders deleted successfully":"Orders deleted successfully","Could not delete orders":"Could not delete orders","You have quotations older than 30 days":"You have quotations older than 30 days","You have orders haven\'t received payment since 30 days":"You have orders haven\'t received payment since 30 days","You are near due to conclude order(s)":"You are near due to conclude order(s)","You are due to conclude order(s)":"You are due to conclude order(s)","All":"All","Late Payments":"Late Payments","Exp. Quotations":"Exp. Quotations","fitler by status":"fitler by status","Delete Selected":"Delete Selected","you reached limit":"you reached limit","Order":"Order","Is Quotation ?":"Is Quotation?","Conclude with Review":"Conclude with Review","Add files":"Add files","Client Review":"Client Review","Conclude":"Conclude","Cancel":"Cancel","Transaction":"Transaction","transaction":"transaction","Could not delete":"Could not delete","deleted successfully":"deleted successfully","attachment":"attachment","Bill To":"Bill To","Print":"Print","Property":"Property","Value":"Value","Order ID":"Order ID","Total Items":"Total Items","Documents":"Documents","Unit Price":"Unit Price","Quantity":"Quantity","Transactions":"Transactions","Method":"Method","Date":"Date","Amount":"Amount","Proof":"Proof","Are you sure you want to delete":"Are you sure you want to delete","Are you sure you want to":"Are you sure you want to","No":"No","Yes":"Yes","Your Commission":"Your Commission","failed to upload proof of payment":"failed to upload proof of payment","changed successfully":"changed successfully","Add payment":"Add payment","Left to pay":"Left to pay","Enter amount between 0,1 and":"Enter amount between 0,1 and","Payment Type":"Payment Type","Cheque":"Cheque","Proof of payment":"Proof of payment","product":"product","Total Amount":"Total Amount","Total Orders":"Total Orders","Stats":"Stats","Add an image":"Add an image","Upload a picture":"Upload a picture","Expenses":"Expenses","Delete":"Delete","Add":"Add","department":"department","brand":"brand","Good":"Good","Compensate":"Compensate","Return":"Return","Other":"Other","Cheques":"Cheques","Cheque No":"Cheque No","Cheque Date":"Cheque Date","Agency No":"Agency No","Account No":"Account No","Holder":"Holder","To":"To","Destination":"Destination","Images":"Images","Destination Bank Number":"Destination Bank Number","Destination Name (Beneficiary)":"Destination Name (Beneficiary)","Destination Date":"Destination Date","Cash":"Cash","Deposit":"Deposit","Personal":"Personal","Business":"Business","Front Image":"Front Image","only images (jpeg, png etc..) allowed":"only images (jpeg, png etc..) allowed","upload":"upload","Back Image":"Back Image","only digits allowed":"only digits allowed","Should be XXXX or XXXX-X":"Should be XXXX or XXXX-X","Should be XXXXXXXX or XXXXXXXX-X":"Should be XXXXXXXX or XXXXXXXX-X","Utilities":"Utilities","Wood Price Calculator":"Wood Price Calculator","Front Left Height":"Front Left Height","Front Right Height":"Front Right Height","Mid Left Height":"Mid Left Height","Mid Right Height":"Mid Right Height","Rear Left Height":"Rear Left Height","Rear Right Height":"Rear Right Height","Left Length":"Left Length","Right Length":"Right Length","Width":"Width","Price Per Volume":"Price Per Volume","Issue Date":"Issue Date","Due Date":"Due Date","Frequency":"Frequency","Source":"Source","Late Fee":"Late Fee","Fixed":"Fixed","Variable":"Variable","Type":"Type","Utility":"Utility","Salary":"Salary","Rent":"Rent","Purchase":"Purchase","Daily":"Daily","Weekly":"Weekly","Monthly":"Monthly","Source of Money":"Source of Money","Fixed or Variable":"Fixed or Variable","Amount (single time)":"Amount (single time)","Num Of Times":"Num Of Times","Make Payment":"Make Payment","Receipt":"Receipt","Invoice":"Invoice","Method of Payment":"Method of Payment","Credit Card":"Credit Card","Debit Card":"Debit Card","Boleto":"Boleto","cheque total should be >= expense amount":"cheque total should be >= expense amount","Calc. M3":"M3 Calc.","Metric":"Metric","Product Images":"Product Images","First Name":"First Name","Last Name":"Last Name","Email":"Email","Address":"Address","passwords do not match":"passwords do not match","Landline Number":"Landline Number","Mobile Number":"Mobile Number","Upload Proof":"Upload Proof","Payment Method":"Payment Method","cost":"Costs","Cost Name":"Cost Name","Today":"Today","Paid Amount":"Paid Amount","field is required":"field is required","Zip Code":"Zip Code","CPF":"CPF","CNPJ":"CNPJ","Not a valid number CPF":"Not a valid number CPF","Not a valid number CNPJ":"Not a valid number CNPJ","Not a valid zip code":"Not a valid zip code","Converted to order successfully!":"Converted to order successfully!","Convert this order into open order ?":"Convert this order into open order ?","Not enough stock":"Not enough stock","Add as Another":"Add as Another","Gross Total":"Gross Total","Unit":"Unit","Linear Meter":"Linear Meter","Square Meter":"Square Meter (m\xb2)","Cubic Meter":"Cubic Meter -CBM (m3)","Dimensions":"Dimensions","Total Quantity":"Total Quantity","Height":"Height","Length":"Length","W":"W","H":"H","L":"L","M":"M","Q":"Q","Items":"Items","Item":"Item","Created By":"Created By","New order placed successfully!":"New order placed successfully!","Bi-Weekly":"Bi-Weekly","Service order":"Service order / O.S","Seller":"seller","Delivery or Job Site":"Delivery / Job Site","Vehicle":"Vehicle","Vehicles":"Vehicles","vehicles":"Vehicles","vehicle":"Vehicle","Assets":"Assets","Purchase Date":"Purchase Date","Purchase Price":"Purchase Price","Purchase Km":"Purchase Km","Km Now":"Km Now","Drivers":"Drivers","Last Manutences":"Last Manutences","Actual Price":"Actual Price","lunch":"Lunch","Lunch":"Lunch","host":"Host","Host":"Host","Rute":"rute","Work Address":"Work Address","Driver":"Driver","Obs":"Obs","To Recieve":"To Recieve"}')},500:function(e){e.exports=JSON.parse('{"Management":"GR","Logout":"Sair","Actions":"A\xe7\xf5es","actions":"a\xe7\xf5es","action":"a\xe7\xe3o","Action":"A\xe7\xe3o","Name":"Nome","Description":"Descri\xe7\xe3o","Title":"Titulo","Price":"Pre\xe7o","Department":"Departamentos","Departament Properties":"Adm. Setores","Departament":"Departamento","Departaments":"Departamentos","Category":"Categoria","Sub Category":"Sub-Gategoria","Categories":"Categorias","Subcategories":"Subcategorias","Products":"Produtos","products":"produtos","Order Properties":"Adm. Pedidos","Administration":"Adm. Cadastros","Cheque Mgmt":"Controle De Cheques","Expense Mgmt":"Despesas","Finance":"Financeiro","Update":"Atualizar","update":"atualizar","Total":"Total","Search":"Buscar","Status":"Status","Add Service":"Adcionar Servi\xe7o","Update Service":"Atualizar Servi\xe7o","Conclude By":"DT. Conclus\xe3o","% Discount":"Desconto %","In Stock":"Em Estoque","Total Units":"Quantidade","Not Available":"Indispon\xedvel","On Hold":"Em Espera","Available":"Dispon\xedvel","Active":"Ativo","Open":"Em Aberto","Closed":"Fechado","Partial":"Parcial","Quotation":"Or\xe7amento","Canceled":"Cancelado","Discount":"Desconto %","BCode":"BarCode","None":"Nem Um","New":"Novo","Preparation":"Prepara\xe7\xe3o","Production":"Produ\xe7\xe3o","Quality":"Qualidade","Finishing":"Acabamento","Completed":"Completo","Delivered | Returned":"Entregue / Retirado","Concluded":"Concluido","ID":"I.D","Client":"Cliente","Process Status":"Status Etapa","Total Cost":"Custo","Total Paid":"Valor Pago","Est. Conlusion":"DT. Conclus\xe3o","Conlusion Date":"Data P/ Conclus\xe3o","Created At":"Adicionado Em","Last Pay date":"Pagamento Recente","Admins":"Admins","Tasks":"Tarefas","Start Date":"DT. In\xedcio","Est. Conclusion Date":"DT. Conclus\xe3o","Assignee":"Respons\xe1vel","Leader":"Lider","Helpers":"Equipe Ajudante","Create Task":"Adicionar Tarefa","Revenue":"Venda","Cost":"Custo","Collected":"Arrecadado","Yet to collect":"A Receber","Profit":"Lucro","Expense":"Contas a pagar","Real Profits":"Lucro Real","All Time":"Todos Os Tempos","Last 30 days":"30 Dias","Custom":"Personalizado","Dashboard Reports":"Relat\xf3rios Gerais","Quotations":"Or\xe7amentos","Placed Orders":"Pedidos Realizados","Place":"Realizar","Orders":"Pedidos","Products Registered":"Produtos Registrados","Rep Orders":"Pedido de Vendedores","Top departments":"Top Departamentos","Top Representants Earnings":"Top Ganhos De Vendedores","See by date range":"Ver Por Data de at\xe9","Organizations":"Orgs","Branches":"Filiais","Brands":"Marcas","Brand":"Marca","Representants":"Vendedores","Departments":"Departamentos","Expense Stats":"Contas a pagar","Create Expense":"Adicionar Conta","Total Expenses":"Quant. Contas a pagar","Desired Profit":"Lucro Desejado","Paid":"Pagas","Not Paid":"Em Aberto","Next Month Expense":"Para O prox\xedmo M\u1ebds","Late Payment":"Atrasadas","You have few product with low stock":"Temos Poucos Produtos em Estoque, Verifique","Kit":"Kit","Create":"Adicionar","Service":"Servi\xe7os","Edit":"Editar","Org not selected":"Selecione Uma Org.","product saved":"Produto Alterado","Something went wrong":"Algo Deu Errado","Could not fetch":"N\xe3o Foi Poss\xedvel Mostrar","departments":"Departamento","Worth":"Valor","Subcategory":"SubCategoria","Model":"Modelo","Submit":"Registrar","saved successfully":"Alterado Com Sucesso","Provider":"Fornecedor","Min Stock Threshold":"Min. Em Estoue","Percentages":"Porcentagem","Absolute value":"Fixo","About":"Obs.","Comment":"Coment\xe1rio","Per day":"Por Dia","Per hour":"Por Hora","Orders deleted successfully":"Pedido Alterado Com Sucesso","Could not delete orders":"N\xe3o \xe9 poss\xedvel Remover Esse Pedido","You have quotations older than 30 days":"Existe Or\xe7amento Com Mais de 30 dias","You have orders haven\'t received payment since 30 days":"Tem pagamentos em atraso com mais de 30 dias","You are near due to conclude order(s)":"existe pedido proximo a previs\xe3o de entrega","You are due to conclude order(s)":"Existem pedidos em atraso para entrega","All":"Todos","Late Payments":"Em Atraso","Exp. Quotations":"Ora\xe7amentos Vencidos","fitler by status":"Filtrar Por Status","Delete Selected":"Remover Selecionado","you reached limit":"Limite atingido","Order":"Pedido","Is Quotation ?":"\xc9 Um Or\xe7amento?","Conclude with Review":"Concluir Com Avalia\xe7\xe3o","Add files":"Adicionar Arquivo","Client Review":"Avalia\xe7\xe3o de Cliente","Conclude":"Conclude","Cancel":"Cancelar","Transaction":"Trasa\xe7\xf5es","transaction":"transa\xe7\xf5es","Could not delete":"N\xe3o se pode remover","deleted successfully":"Removido com sucesso","attachment":"anexos","Bill To":"Receber de:","Print":"Imprimir","Property":"Propiedade","Value":"Valor","Order ID":"I.D Pedido","Total Items":"Quant.","Documents":"Documentos","Unit Price":"Pre\xe7o Unit.","Quantity":"Quantidade","Transactions":"Transa\xe7\xf5es","Method":"Metodo","Date":"Data","Amount":"Montante","Proof":"Comprovante","Are you sure you want to delete":"Deseja mesmo remover","Are you sure you want to":"Deseja mesmo","No":"N\xe3o","Yes":"Sim","Your Commission":"Sua Comiss\xe3o","failed to upload proof of payment":"Falha ao enviar arquivo de comprovante de pagamento","changed successfully":"Alterado com sucesso","Add payment":"Coletar Pagamento","Left to pay":"Saldo Devedor Restante","Enter amount between 0,1 and":"Informe um valor entre 0,1 e","Payment Type":"Tipo De Pagamento","Cheque":"Cheque","Proof of payment":"Recibo","product":"produto","Product":"Produto","Total Amount":"Montante Total","Total Orders":"Quant. Pedidos","Stats":"Estatisticas","Add an image":"Adicionar IMG","Upload a picture":"Emviar Imagem","Expenses":"Contas a pagar","Delete":"Delete","Add":"Adicionar","department":"departamento","brand":"marca","Good":"Para Uso","Compensate":"Compensado","Return":"Retotnado","Other":"Outro","Cheques":"Cheques","Cheque No":"N# Cheque","Cheque Date":"DT Cheque","Agency No":"N# AG","Account No":"N# Conta","Holder":"Nome","To":"Para","Destination":"Destino","Images":"Imagens","Destination Bank Number":"N# Do Banco se Depositado","Destination Name (Beneficiary)":"Passado para (Nome)","Destination Date":"DT Destino","Cash":"Dinheiro","Deposit":"Dep\xf3sito","Personal":"F\xedsica","Business":"Jur\xeddica","Front Image":"Image Frente","only images (jpeg, png etc..) allowed":"apenas imagens (jpeg, png etc.) permitidas","upload":"Enviar","Back Image":"Image Verso","only digits allowed":"Use Apenas d\xedgitos","Should be XXXX or XXXX-X":"Deve ser XXXX ou XXXX-X","Should be XXXXXXXX or XXXXXXXX-X":"Deve ser XXXXXXXX ou XXXXXXXX-X","Utilities":"Utilidade","Wood Price Calculator":"M3 C\xfabico","Front Left Height":"Altura Frente E","Front Right Height":"Altura Frente D","Mid Left Height":"Altura Meio E","Mid Right Height":"Altura Meio D","Rear Left Height":"Altura Traseira E","Rear Right Height":"Altura Traseira D","Left Length":"Comprimento Esquerdo","Right Length":"Comprimento Certo","Width":"Largura","Price Per Volume":"Pre\xe7o por metro c\xfabico","Issue Date":"Data de emiss\xe3o","Due Date":"Data de vencimento","Frequency":"Frequ\xeancia","Source":"Fonte","Late Fee":"Taxa de atraso","Fixed":"Fixo","Variable":"Vari\xe1vel","Type":"Tipo","Utility":"Utilidade","Salary":"Sal\xe1rio","Rent":"Aluguel","Purchase":"Compra","Daily":"Diariamente","Weekly":"Semanalmente","Monthly":"Por m\xeas","Source of Money":"Fonte de pagamento","Fixed or Variable":"Fixo ou Vari\xe1vel","Amount (single time)":"Montante (\xfanica vez)","Num Of Times":"N\xfamero de vezes","Make Payment":"Realizar Pagamento","Receipt":"Recibo","Invoice":"Fatura","Method of Payment":"M\xe9todo de pagamento","Credit Card":"Cart\xe3o de cr\xe9dito","Debit Card":"Cart\xe3o de d\xe9bito","Boleto":"Boleto","cheque total should be >= expense amount":"O tota do cheque deve ser> = valor da despesa","Calc. M3":"Calcular M3","Metric":"Metros","Product Images":"Imagem Do Produto","First Name":"Primeiro nome","Last Name":"Sobre Nome","Email":"Email","Address":"Endere\xe7o","passwords do not match":"Senha n\xe3o Conresponde","Landline Number":"Tel. Fixo","Mobile Number":"Celular","Upload Proof":"Anexar Comprovante","Payment Method":"Meio De Pagamento","cost":"Custos","Cost Name":"Tipo De Custo","Today":"Hoje","Paid Amount":"Valor Recebido R$","field is required":"Campo Obrigat\xf3rio","Zip Code":"CEP","CPF":"CPF","CNPJ":"CNPJ","Not a valid number CPF":"CPF Inv\xe1lid","Not a valid number CNPJ":"CNPJ Inv\xe1lid","Not a valid zip code":"Not a valid zip code","Converted to order successfully!":"Converido para pedido com sucesso!","Convert this order into open order ?":"Deseja mesmo converter para pedido?","Not enough stock":"N\xe3o ha suficiente no estoque","Add as Another":"Adicionar novo","Gross Total":"Total Bruto","Unit":"Unidade","Linear Meter":"Metro Liniar","Square Meter":"(m\xb2) Metro Quadrado","Cubic Meter":"(m3) Metro Cubico","Dimensions":"Medidas","Total Quantity":"Quantidades","Height":"Altura","Length":"Largura","W":"L","H":"A","L":"C","M":"M","Q":"Q","Items":"Itens","Item":"Item","Created By":"Realizado por","New order placed successfully!":"Pedido adicionado com sucesso","Bi-Weekly":"15 dias","Service order":"Ordem De Servi\xe7\xf5s / O.S ","Seller":"Vendedor(a)","Delivery or Job Site":"Execu\xe7\xe3o / Entrega","Vehicle":"Ve\xedculo","Vehicles":"Ve\xedculos","vehicle":"Ve\xedculo","vehicles":"Ve\xedculos","Assets":"Patrim\xf3nios","Purchase Date":"Data da compra","Purchase Price":"Pre\xe7o de compra","Purchase Km":"Km na compra","Km Now":"Km agora","Drivers":"Motoristas","Last Manutences":"Ultima manuten\xe7\xe3o","Actual Price":"Pre\xe7o atual","lunch":"Alimenta\xe7\xe3o","Lunch":"Alimenta\xe7\xe3o","host":"Hospedagem","Host":"Hospedagem","Rute":"Rota","Work Address":"Ender\xe7o do servi\xe7o","Driver":"Motorista","Obs":"Obs","To Recieve":"A Pagar"}')},504:function(e,t,a){e.exports={logoWrapper:"styles_logoWrapper__2jbWB"}},567:function(e,t,a){},569:function(e,t,a){},755:function(e,t,a){},756:function(e,t,a){},931:function(e,t,a){},932:function(e,t,a){},934:function(e,t,a){},935:function(e,t,a){},936:function(e,t,a){},937:function(e,t,a){},938:function(e,t,a){},939:function(e,t,a){},942:function(e,t,a){},943:function(e,t,a){},946:function(e,t,a){},949:function(e,t,a){},950:function(e,t,a){},951:function(e,t,a){},952:function(e,t,a){},953:function(e,t,a){},954:function(e,t,a){},955:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(59),s=a.n(c),i=(a(567),a(568),a(569),a(211)),o=a(498),l=a(237),d={en:{translation:a(499)},pt:{translation:a(500)}};i.a.use(o.a).use(l.e).init({fallbackLng:"en",debug:!1,resources:d,interpolation:{escapeValue:!1}}),window.__=i.a.t.bind(i.a);var u=a(11),j=a(6),b=a(38),h=a(1007),m=a(549),O=a(504),p=a.n(O),x=a(1),f=function(){return Object(x.jsxs)(h.a,{as:"h2",color:"grey",className:p.a.logoWrapper,children:[Object(x.jsx)(m.a,{circular:!0,src:"http://s1.iconbird.com/ico/2013/9/440/w128h1281380212086box.png"})," ","Gerenciador"]})},v=a(1001),g=a(13),C=a.n(g),y=a(21),S=a(516),I=a.n(S),N=a(993),w=a(1010),T=a(380),P=function(e){var t=e.onSubmit,a=Object(n.useState)(""),r=Object(j.a)(a,2),c=r[0],s=r[1],i=Object(n.useState)(""),o=Object(j.a)(i,2),l=o[0],d=o[1],u=Object(n.useState)(!0),b=Object(j.a)(u,2),h=b[0],m=b[1],O=Object(n.useState)(!0),p=Object(j.a)(O,2),f=p[0],v=p[1],g=function(){var e=Object(y.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h&&f){e.next=3;break}return e.abrupt("return");case 3:t({email:c,password:l});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(x.jsx)(N.a,{name:"loginForm",size:"large",onSubmit:g,children:Object(x.jsxs)(w.a,{children:[Object(x.jsx)(N.a.Input,{fluid:!0,icon:"at",iconPosition:"left",placeholder:"Email",type:"email",error:!h,onChange:function(e){return t=e.target.value,s(t),void m(!0);var t},onBlur:function(){return m(I.a.isEmail(c))}}),Object(x.jsx)(N.a.Input,{fluid:!0,icon:"lock",iconPosition:"left",placeholder:"Password",type:"password",error:!f,onChange:function(e){return t=e.target.value,d(t),void v(!0);var t},onBlur:function(){return v(Boolean(l))}}),Object(x.jsx)(T.a,{type:"submit",color:"teal",fluid:!0,size:"large",primary:!0,children:"Login"})]})})},D=r.a.createContext(void 0),k=r.a.createContext(void 0),A=a(77),E=a(78),R=function(){function e(t,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,c=arguments.length>4?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]&&arguments[5],i=arguments.length>6&&void 0!==arguments[6]&&arguments[6],o=arguments.length>7?arguments[7]:void 0,l=arguments.length>8&&void 0!==arguments[8]&&arguments[8];Object(A.a)(this,e),this.code=t,this.message=a,this.statusCode=n,this.hasData=i,this.responseTime=r,this.requestId=c,this.cached=s,this.token=o,this.errorCaught=l}return Object(E.a)(e,[{key:"isInit",get:function(){return"INIT"===this.code}},{key:"isLoading",get:function(){return"LOADING"===this.code}},{key:"isError",get:function(){return this.errorCaught=!0,"ERROR"===this.code}},{key:"isSuccess",get:function(){return"SUCCESS"===this.code}},{key:"clone",value:function(t,a,n,r,c,s,i,o,l){return new e(void 0===t?this.code:t,void 0===a?this.message:a,void 0===n?this.statusCode:n,void 0===i?this.hasData:i,void 0===r?this.responseTime:r,void 0===c?this.requestId:c,void 0===s?this.cached:s,void 0===o?this.token:o,void 0===l?this.errorCaught:l)}},{key:"toString",value:function(){return this.code}}]),e}(),_="\n",M="\t";function F(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(e){return(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)}))}var V={headers:{Accept:"application/json","Content-Type":"application/json"}};function L(e,t){var a=Object(n.useContext)(D),r=Object(n.useState)((function(){return["",!1]})),c=Object(j.a)(r,2),s=Object(j.a)(c[0],2),i=s[0],o=s[1],l=c[1],d=Object(n.useState)([void 0,new R("INIT")]),b=Object(j.a)(d,2),h=b[0],m=b[1],O=Object(n.useCallback)((function(){return l([F(),!0])}),[]);return Object(n.useEffect)((function(){e&&l([F(),!1])}),[e,t]),Object(n.useEffect)((function(){if(e&&i){var n=new AbortController;m((function(e){return[void 0,Object(j.a)(e,2)[1].clone("LOADING")]}));var r=performance.now(),c=Object(u.a)(Object(u.a)(Object(u.a)({},V),t),{},{headers:Object(u.a)(Object(u.a)(Object(u.a)(Object(u.a)({Authorization:"Bearer "+localStorage.getItem("token")},V.headers),null===t||void 0===t?void 0:t.headers),o&&{"X-Clear-Cache":!0}),{},{"X-Request-ID":i},a&&{OrganizationID:a})});return null===c.headers["Content-Type"]&&delete c.headers["Content-Type"],fetch(e,c).then(function(){var t=Object(y.a)(C.a.mark((function t(a){var c,s,o,l,d,u,b,h;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.signal.aborted){t.next=2;break}return t.abrupt("return");case 2:return c=performance.now()-r,s=!!a.headers.get("X-Browser-Cache"),o=a.headers.get("X-Token"),t.prev=5,t.next=8,a.json();case 8:l=t.sent,t.next=17;break;case 11:return t.prev=11,t.t0=t.catch(5),d="Invalid JSON response from API",console.error("".concat(_,"API Error:").concat(_).concat(M,"URL: ").concat(e).concat(_).concat(M,"Msg: ").concat(d).concat(_).concat(M,"Code: ").concat(a.status)),m((function(e){return[void 0,Object(j.a)(e,2)[1].clone("ERROR",d,a.status,c,i,s)]})),t.abrupt("return");case 17:if(!(a.status>=400)){t.next=22;break}return u=l.error||l.message||"",console.log("message :>> ",u),m((function(e){var t=Object(j.a)(e,2)[1];console.log("s :>> ",t);var n=t.clone("ERROR",u,a.status,c,i,s,!1,o);return console.log("cloned :>> ",n),[void 0,t.clone("ERROR",u,a.status,c,i,s,!1,o)]})),t.abrupt("return");case 22:b=null===(O=l)?"Null":void 0===O?"Undefined":"string"===typeof O?"String":"number"!==typeof O||Number.isNaN(O)?Number.isNaN(O)?"NaN":"boolean"===typeof O?"Boolean":O instanceof Array?"Array":O instanceof Object?"Object":"":"Number",h="Null"!==b&&("Array"!==b||l.length>0),m((function(e){var t=Object(j.a)(e,2)[1];return[l,t.clone("SUCCESS","",a.status,c,i,s,h,o)]}));case 25:case"end":return t.stop()}var O}),t,null,[[5,11]])})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){if(!n.signal.aborted){var a=performance.now()-r;console.error("".concat(_,"API Error:").concat(_).concat(M,"URL: ").concat(e).concat(_).concat(M,"Msg: ").concat(t.message).concat(_).concat(M,"Code: 0")),m((function(e){return[void 0,Object(j.a)(e,2)[1].clone("ERROR","",0,a,i)]}))}})),function(){return n.abort()}}}),[i]),[h[0],h[1],O]}function B(e,t){var a=Object(n.useContext)(D);return L(e,Object(n.useMemo)((function(){return Object(u.a)(Object(u.a)({},t),{},{headers:Object(u.a)({OrganizationID:a||""},null===t||void 0===t?void 0:t.headers)})}),[t,a]))}var H=a(32),z=a(56),q=a(25),U=a.n(q);function Y(e,t,a){return"undefined"===typeof e||null===e?a:0===t.length?e:Y(e[t.shift()],t,a)}var X={string:"",number:0,date:""};function W(e,t){if(void 0===e||null===e)return!1;var a=t.trim();return!a||("string"===typeof e?e:JSON.stringify(e)).toLowerCase().includes(a.toLowerCase().toString())}function Q(e,t,a){return a?"*"===t?e.filter((function(e){return W(e,a)})):e.filter((function(e){return t.some((function(t){return W(Y(e,t.split("."),""),a)}))})):e}var J=25,K={searchText:"",currentPage:1,sort:{by:void 0,direction:void 0},predicate:void 0,values:{}},G=function(e,t){return function(a,n){var r=function(e,t){var a="function"===typeof e?e:function(a){return Y(a,e.split("."),X[t])};switch(t){case"string":return function(e,t){return a(e).localeCompare(a(t))};case"number":return function(e,t){return a(e)-a(t)};case"date":return function(e,t){return U()(a(e)).diff(U()(a(t)))};default:return function(e,t){return 0}}}(e,typeof a[e]);return"descending"===t?r(n,a):r(a,n)}},$={data:[],pageCount:0,total:0};var Z=function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},c=arguments.length>4?arguments[4]:void 0,s=Object(n.useState)(c?Object(u.a)(Object(u.a)({},K),{},{values:r,filterer:c}):K),i=Object(j.a)(s,2),o=i[0],l=i[1],d=B(e),b=Object(j.a)(d,3),h=b[0],m=(h=void 0===h?$:h).data,O=h.total,p=b[1],x=b[2],f=function(e){return l((function(t){return Object(u.a)(Object(u.a)({},t),{},{searchText:e,currentPage:1,sort:{by:void 0,direction:void 0}})}))},v=function(e){return l((function(t){return Object(u.a)(Object(u.a)({},t),{},{currentPage:e})}))},g=function(e,t){return l((function(a){return Object(u.a)(Object(u.a)({},a),{},{currentPage:1,sort:{by:e,direction:t}})}))},C=function(e){return l((function(t){return Object(u.a)(Object(u.a)({},t),{},{predicate:e})}))},y=Object(n.useMemo)((function(){var e={},t=function(t){Object.prototype.hasOwnProperty.call(o.values,t)&&(e[t]=function(e){return l((function(a){return Object(u.a)(Object(u.a)({},a),{},{values:Object(u.a)(Object(u.a)({},a.values),{},Object(z.a)({},t,e))})}))})};for(var a in o.values)t(a);return e}),[o.values]),S=Object(n.useMemo)((function(){return a?m.map(a):m}),[a,m]),I=Object(n.useMemo)((function(){return o.filterer?S.filter(o.filterer(o.values)):o.predicate?S.filter(o.predicate):S}),[S,o]),N=Object(n.useMemo)((function(){return Q(I,t,o.searchText)}),[I,t,o.searchText]),w=Object(n.useMemo)((function(){return o.sort.by?Object(H.a)(N.sort(G(o.sort.by,o.sort.direction))):N}),[N,o.sort.by,o.sort.direction]),T=Object(n.useMemo)((function(){return w.slice((o.currentPage-1)*J,o.currentPage*J)}),[w,o.currentPage]);return Object(n.useEffect)((function(){m.length>0&&l(c?Object(u.a)(Object(u.a)({},K),{},{filterer:c,values:r}):K)}),[m,c]),[T,{total:O||m.length,pages:Math.ceil(N.length/J),all:w},f,v,g,Object(u.a)(Object(u.a)({},o),{},{setPredicate:C,handlers:y}),p,x]};var ee=function(e,t,a,n,r){var c=Z(e,t,a,n,r),s=Object(j.a)(c,8),i=s[0],o=s[1];return{data:i,total:o.total,pages:o.pages,all:o.all,search:s[2],goto:s[3],sort:s[4],filters:s[5],status:s[6],refresh:s[7]}},te=a(0),ae=te.useMemo,ne=te.useState,re={SUCCESS:function(e,t){return"".concat(e," ").concat(t).concat(t.endsWith("e")?"":"e","d successfully!")},ERROR:function(e,t){return"failed to ".concat(t," ").concat(e)}};var ce=function(){var e=ne([]),t=Object(j.a)(e,2),a=Object(j.a)(t[0],3),n=a[0],r=a[1],c=a[2],s=t[1],i=ae((function(){return"add"===c&&r?["/api/products",{method:"POST",body:JSON.stringify(r)}]:"update"===c&&n&&r?["/api/products/".concat(n),{method:"PUT",body:JSON.stringify(r)}]:"delete"===c&&n?["/api/products/".concat(n),{method:"DELETE"}]:"status change"===c&&r&&n?["/api/v2/products/".concat(n,"/status"),{method:"POST",body:JSON.stringify(r)}]:[void 0,void 0]}),[r,c,n]),o=B.apply(void 0,Object(H.a)(i)),l=Object(j.a)(o,2)[1];return c&&(l.action=c,l.message=re[l.code]?re[l.code]("product",c)+": ".concat(l.message):""),{add:function(e){return s([void 0,e,"add"])},edit:function(e,t){return s([e,t,"update"])},save:function(e,t){return s([t,e,t?"update":"add"])},del:function(e){return s([e,void 0,"delete"])},reset:function(){return s([])},changeStatus:function(e,t){return s([e,t,"status change"])},status:l}};var se=function(e,t,a){var n=new URLSearchParams(e);return n.append("showAll","true"),ee("/api/v2/products?".concat(n.toString()),"*",void 0,t,a)};var ie=function(){var e=B("/api/clients?showAll=true"),t=Object(j.a)(e,3),a=t[0],n=(a=void 0===a?{data:[]}:a).data,r=t[1],c=t[2],s=n.map((function(e){var t=e._id,a=e.firstName,n=e.lastName;return{value:t,label:"".concat(a," ").concat(n)}}));return{options:s,data:s,status:r,refresh:c}},oe=a(0),le=oe.useMemo,de=oe.useState,ue={SUCCESS:function(e,t){return"".concat(e," ").concat(t).concat(t.endsWith("e")?"":"e","d successfully!")},ERROR:function(e,t){return"failed to ".concat(t," ").concat(e)}};var je=function(){var e=de([]),t=Object(j.a)(e,2),a=Object(j.a)(t[0],3),n=a[0],r=a[1],c=a[2],s=t[1],i=le((function(){return"create"===c&&r?["/api/v2/orders",{method:"POST",body:JSON.stringify(r)}]:"update"===c&&n&&r?["/api/v2/orders/".concat(n),{method:"PUT",body:JSON.stringify(r)}]:"delete"===c&&n?["/api/orders/".concat(n),{method:"DELETE"}]:"status change"===c&&r&&n?["/api/orders/".concat(n,"/status"),{method:"POST",body:JSON.stringify(r)}]:[void 0,void 0]}),[r,c,n]),o=B.apply(void 0,Object(H.a)(i)),l=Object(j.a)(o,2)[1];return c&&(l.action=c,l.message=ue[l.code]?ue[l.code]("order",c)+": ".concat(l.message):""),{add:function(e){return s([void 0,e,"create"])},edit:function(e,t){return s([e,t,"update"])},save:function(e,t){return s([e,t,e?"update":"create"])},del:function(e){return s([e,void 0,"delete"])},reset:function(){return s([])},changeStatus:function(e,t){return s([e,t,"status change"])},status:l}};var be=function(e){var t=new URLSearchParams(e);return t.append("showAll","true"),ee("/api/v2/tasks?".concat(t.toString()),"*")};var he=function(e){var t=new URLSearchParams(e);return t.append("showAll","true"),ee("/api/v2/vehicles?".concat(t.toString()),"*")},me=a(518),Oe=["orderId","client.firstName","client.lastName"],pe=["None","New","Preparation","Production","Quality","Finishing","Completed","Delivered | Returned","Concluded","Canceled"],xe=["None","Open","Partial","Closed","Quotation"],fe={1:"Open",2:"Partial",3:"Closed",4:"Quotation"};var ve=function(e){var t=Object(me.a)(["translation"]).t,a=Object(n.useCallback)((function(e){return Object(u.a)(Object(u.a)({},e),{},{_processStatus:t(pe[e.processStatus]),_status:t(fe[e.status])})}),[t]),r=new URLSearchParams(e);return r.append("showAll","true"),ee("/api/orders?".concat(r.toString()),Oe,a)};var ge=function(e){var t=new URLSearchParams(e);return t.append("showAll","true"),ee("/api/expenses?".concat(t.toString()),"*")};var Ce=function(){return ee("/api/v2/permissions","*")},ye=a(0),Se=ye.useMemo,Ie=ye.useState,Ne={SUCCESS:function(e,t){return"".concat(e," ").concat(t).concat(t.endsWith("e")?"":"e","d successfully!")},ERROR:function(e,t){return"failed to ".concat(t," ").concat(e)}};var we=function(e){var t=Ie([]),a=Object(j.a)(t,2),n=Object(j.a)(a[0],3),r=n[0],c=n[1],s=n[2],i=a[1],o=Se((function(){return"create"===s&&c?["/api/v2/tasks",{method:"POST",body:JSON.stringify(c)}]:"update"===s&&r&&c?["/api/v2/tasks/".concat(r),{method:"PUT",body:JSON.stringify(c)}]:"delete"===s&&r?["/api/v2/tasks/".concat(r),{method:"DELETE"}]:"status change"===s&&c&&r?["/api/v2/tasks/".concat(r,"/status"),{method:"POST",body:JSON.stringify(c)}]:[void 0,void 0]}),[c,s,r]),l=B(e?"/api/v2/tasks/".concat(e):void 0),d=Object(j.a)(l,2),u=d[0],b=(u=void 0===u?{}:u).data,h=d[1],m=B.apply(void 0,Object(H.a)(o)),O=Object(j.a)(m,2)[1];return s&&(O.action=s,O.message=Ne[O.code]?Ne[O.code]("task",s)+": ".concat(O.message):""),{data:b,add:function(e){return i([void 0,e,"create"])},edit:function(e,t){return i([e,t,"update"])},save:function(e,t){return i([e,t,e?"update":"create"])},del:function(e){return i([e,void 0,"delete"])},reset:function(){return i([])},changeStatus:function(e,t){return i([e,t,"status change"])},status:O,getStatus:h}},Te=a(0),Pe=Te.useMemo,De=Te.useState,ke={SUCCESS:function(e,t){return"".concat(e," ").concat(t).concat(t.endsWith("e")?"":"e","d successfully!")},ERROR:function(e,t){return"failed to ".concat(t," ").concat(e)}};var Ae=function(e){var t=De([]),a=Object(j.a)(t,2),n=Object(j.a)(a[0],3),r=n[0],c=n[1],s=n[2],i=a[1],o=Pe((function(){return"create"===s&&c?["/api/v2/vehicles",{method:"POST",body:JSON.stringify(c)}]:"update"===s&&r&&c?["/api/v2/vehicles/".concat(r),{method:"PUT",body:JSON.stringify(c)}]:"delete"===s&&r?["/api/v2/vehicles/".concat(r),{method:"DELETE"}]:"status change"===s&&c&&r?["/api/v2/vehicles/".concat(r,"/status"),{method:"POST",body:JSON.stringify(c)}]:[void 0,void 0]}),[c,s,r]),l=B(e?"/api/v2/vehicles/".concat(e):void 0),d=Object(j.a)(l,2),u=d[0],b=(u=void 0===u?{}:u).data,h=d[1],m=B.apply(void 0,Object(H.a)(o)),O=Object(j.a)(m,2)[1];return s&&(O.action=s,O.message=ke[O.code]?ke[O.code]("vehicle",s)+": ".concat(O.message):""),{data:b,add:function(e){return i([void 0,e,"create"])},edit:function(e,t){return i([e,t,"update"])},save:function(e,t){return i([e,t,e?"update":"create"])},del:function(e){return i([e,void 0,"delete"])},reset:function(){return i([])},changeStatus:function(e,t){return i([e,t,"status change"])},status:O,getStatus:h}},Ee=(a.p,a(0)),Re=Ee.useMemo,_e=Ee.useState,Me={SUCCESS:function(e,t){return"".concat(e," ").concat(t).concat(t.endsWith("e")?"":"e","d successfully!")},ERROR:function(e,t){return"failed to ".concat(t," ").concat(e)}};var Fe=function(){var e=_e([]),t=Object(j.a)(e,2),a=Object(j.a)(t[0],3),n=a[0],r=a[1],c=a[2],s=t[1],i=Re((function(){return"create"===c&&r?["/api/orgs",{method:"POST",body:JSON.stringify(r)}]:"update"===c&&n&&r?["/api/orgs/".concat(n),{method:"PUT",body:JSON.stringify(r)}]:"delete"===c&&n?["/api/orgs/".concat(n),{method:"DELETE"}]:[void 0,void 0]}),[r,c,n]),o=B.apply(void 0,Object(H.a)(i)),l=Object(j.a)(o,2)[1];return c&&(l.action=c,l.message=Me[l.code]?Me[l.code]("task",c)+": ".concat(l.message):""),{add:function(e){return s([void 0,e,"create"])},edit:function(e,t){return s([e,t,"update"])},save:function(e,t){return s([e,t,e?"update":"create"])},del:function(e){return s([e,void 0,"delete"])},reset:function(){return s([])},status:l}};var Ve=function(e){var t=B("/api/admins"),a=Object(j.a)(t,2),n=a[0],r=(n=void 0===n?{data:[]}:n).data,c=a[1];return{data:r.filter((function(t){var a=t.organizationIds,n=t.roleNumber;return(!e||a.includes(e))&&3===n})).map((function(e){var t=e._id,a=e.firstName,n=e.lastName;return{value:t,label:"".concat(a," ").concat(n)}})),status:c}};var Le=function(){return ee("/api/categories?showAll=true","*")};var Be=function(){var e=Object(me.a)(["translation"]).t,t=B("/api/v2/products/statuses"),a=Object(j.a)(t,2),n=a[0],r=a[1];return{data:(n||[]).map((function(t){return{value:t,text:e(t)}})),status:r}};var He=function(){return ee("/api/departments?showAll=true","*")};var ze=function(){return ee("/api/brands?showAll=true","*")};var qe=function(){return ee("/api/subcategories?showAll=true","*")},Ue={SUCCESS:function(e,t){return"".concat(e," ").concat(t).concat(t.endsWith("e")?"":"e","d successfully!")},ERROR:function(e,t){return"failed to ".concat(t," ").concat(e)}};var Ye=function(e){var t=Object(n.useState)([]),a=Object(j.a)(t,2),r=Object(j.a)(a[0],3),c=r[0],s=r[1],i=r[2],o=a[1],l=Object(n.useMemo)((function(){return"create"===i&&s?["/api/v2/brands",{method:"POST",body:JSON.stringify(s)}]:"update"===i&&c&&s?["/api/brands/".concat(c),{method:"PUT",body:JSON.stringify(s)}]:"delete"===i&&c?["/api/brands/".concat(c),{method:"DELETE"}]:[void 0,void 0]}),[s,i,c]),d=B(e?"/api/brands/".concat(e):void 0),u=Object(j.a)(d,2),b=u[0],h=(b=void 0===b?{}:b).data,m=u[1];console.log("opts :>> ",l);var O=B.apply(void 0,Object(H.a)(l)),p=Object(j.a)(O,2)[1];return i&&(p.action=i,p.message=Ue[p.code]?Ue[p.code]("brand",i)+": ".concat(p.message):""),{data:h,add:function(e){return o([void 0,e,"create"])},edit:function(e,t){return o([e,t,"update"])},save:function(e,t){return o([e,t,e?"update":"create"])},del:function(e){return o([e,void 0,"delete"])},reset:function(){return o([])},status:p,getStatus:m}};var Xe=function(){var e=He(),t=e.all,a=e.status;return{options:t.map((function(e){var t=e._id,a=e.title;return{value:t,text:a,label:a,organizationId:e.organizationId}})),status:a}},We=new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}),Qe=function(e){return Number(100*(e/100).toFixed(2))},Je=function(e){return Number(e.toFixed(2))},Ke=function(e){return Number(e).toLocaleString("pt-BR",{maximumFractionDigits:2})},Ge=function(e){return e?U()(1e3*e).format("DD/MM/YYYY"):"-"};function $e(e){var t=e.style,a=e.alert,n=e.children;return Object(x.jsxs)("span",{style:Object(u.a)(Object(u.a)({},a&&{backgroundColor:a?"yellow":"none",fontWeight:"bold",padding:4}),t),children:[a?"\u26a0\ufe0f  ":"",n]})}var Ze=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];switch(t){case 1:return Object(x.jsx)($e,{alert:a,style:{color:"green"},children:e("Open")});case 2:return Object(x.jsx)($e,{alert:a,style:{color:"orange"},children:e("Partial")});case 3:return Object(x.jsx)($e,{alert:a,style:{color:"blue"},children:e("Closed")});case 4:return Object(x.jsx)($e,{alert:a,style:{color:"violet"},children:e("Quotation")});default:return Object(x.jsx)("p",{children:e("Unknown")})}},et=function(){var e=new URLSearchParams(window.location.search);return{from:e.get("from"),to:e.get("to")}},tt=function(e,t){var a={};for(var n in t)t.hasOwnProperty(n)&&(a[n]=t[n].map((function(t){return Object(u.a)(Object(u.a)({},t),{},{message:t.message?e(t.message):void 0})})));return a},at=a(68),nt=a(975),rt=a(1016),ct=function(e,t){return function(a){return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(at.a,{className:"margin-right",icon:Object(x.jsx)(nt.a,{}),type:"danger",onClick:function(){return t(a._id)},size:"small",ghost:!0}),Object(x.jsx)(at.a,{className:"margin-right",icon:Object(x.jsx)(rt.a,{}),onClick:function(){return e(a)},size:"small"})]})}},st=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=0;for(var n in e){var r=e[n],c=(r.measurementValue||[]).reduce((function(e,t,a){return t*e}),1);a+=(r.quantity||0)*r.price*c}return 0===t?a:a-Number((a*t/100).toFixed(2))},it=function(e){return e?"".concat(e.firstName," ").concat(e.lastName):""},ot=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map(Ke).join(" x ")},lt=a(994),dt={type:"danger"},ut=function(e){var t=e.onOk,a=e.afterClose;return lt.a.confirm({title:__("Are you sure you want to delete")+" ?",onOk:t,afterClose:a,okText:__("Yes, Delete"),cancelText:__("No"),okButtonProps:dt})},jt=function(e){return function(t){return e[t]}},bt=function(e){return We.format(Je(e))},ht=function(e){return We.format(Qe(e))},mt={required:!0},Ot=function(e){var t=e._id,a=e.orderId,n=e.client,r=e.clientId;return{value:t,label:"".concat(a," (").concat(it(n),")"),clientId:r||void 0}},pt=function(e){return 1===e.status||2===e.status};var xt=function(){var e=ve(),t=e.all,a=e.status,n=t.filter(pt).map(Ot);return{options:n,data:n,status:a}};var ft=function(){return ee("/api/models?showAll=true","*")},vt={SUCCESS:function(e,t){return"".concat(e," ").concat(t).concat(t.endsWith("e")?"":"e","d successfully!")},ERROR:function(e,t){return"failed to ".concat(t," ").concat(e)}};var gt=function(e){var t=Object(n.useState)([]),a=Object(j.a)(t,2),r=Object(j.a)(a[0],3),c=r[0],s=r[1],i=r[2],o=a[1],l=Object(n.useMemo)((function(){return"create"===i&&s?["/api/v2/departments",{method:"POST",body:JSON.stringify(s)}]:"update"===i&&c&&s?["/api/v2/departments/".concat(c),{method:"PUT",body:JSON.stringify(s)}]:"delete"===i&&c?["/api/departments/".concat(c),{method:"DELETE"}]:[void 0,void 0]}),[s,i,c]),d=B(e?"/api/tasks/".concat(e):void 0),u=Object(j.a)(d,2),b=u[0],h=(b=void 0===b?{}:b).data,m=u[1],O=B.apply(void 0,Object(H.a)(l)),p=Object(j.a)(O,2)[1];return i&&(p.action=i,p.message=vt[p.code]?vt[p.code]("department",i)+": ".concat(p.message):""),{data:h,add:function(e){return o([void 0,e,"create"])},edit:function(e,t){return o([e,t,"update"])},save:function(e,t){return o([t,e,t?"update":"create"])},del:function(e){return o([e,void 0,"delete"])},reset:function(){return o([])},status:p,getStatus:m}};var Ct=function(){var e=Object(n.useState)(),t=Object(j.a)(e,2),a=t[0],r=t[1],c=Object(n.useMemo)((function(){return[a?"/api/v2/auth/login":void 0,a?{method:"POST",body:JSON.stringify(a)}:void 0]}),[a]),s=B.apply(void 0,Object(H.a)(c)),i=Object(j.a)(s,2);return{data:i[0],login:r,status:i[1]}};var yt=function(){return ee("/api/clients?showAll=true","*")},St={SUCCESS:function(e,t){return"".concat(e," ").concat(t).concat(t.endsWith("e")?"":"e","d successfully!")},ERROR:function(e,t){return"failed to ".concat(t," ").concat(e)}};var It=function(e){var t=Object(n.useState)([]),a=Object(j.a)(t,2),r=Object(j.a)(a[0],3),c=r[0],s=r[1],i=r[2],o=a[1],l=Object(n.useMemo)((function(){return"create"===i&&s?["/api/v2/clients",{method:"POST",body:JSON.stringify(s)}]:"update"===i&&c&&s?["/api/clients/".concat(c),{method:"PUT",body:JSON.stringify(s)}]:"delete"===i&&c?["/api/clients/".concat(c),{method:"DELETE"}]:[void 0,void 0]}),[s,i,c]),d=B(e?"/api/clients/".concat(e):void 0),u=Object(j.a)(d,2),b=u[0],h=(b=void 0===b?{}:b).data,m=u[1],O=B.apply(void 0,Object(H.a)(l)),p=Object(j.a)(O,2),x=p[0],f=(x=void 0===x?{}:x)._id,v=p[1];return i&&(v.action=i,v.message=St[v.code]?St[v.code]("client",i)+": ".concat(v.message):""),{insertedId:f,data:h,add:function(e){return o([void 0,e,"create"])},edit:function(e,t){return o([e,t,"update"])},save:function(e,t){return o([t,e,t?"update":"create"])},del:function(e){return o([e,void 0,"delete"])},reset:function(){return o([])},status:v,getStatus:m}};var Nt=function(){return B("/api/v2/roles")},wt=a(0),Tt=wt.useMemo,Pt=wt.useState,Dt={SUCCESS:function(e,t){return"".concat(e," ").concat(t).concat(t.endsWith("e")?"":"e","d successfully!")},ERROR:function(e,t){return"failed to ".concat(t," ").concat(e)}};var kt=function(){var e=Pt([]),t=Object(j.a)(e,2),a=Object(j.a)(t[0],3),n=a[0],r=a[1],c=a[2],s=t[1],i=Tt((function(){return"add"===c&&r?["/api/v2/products",{method:"POST",body:JSON.stringify(r)}]:"update"===c&&n&&r?["/api/v2/products/".concat(n),{method:"PUT",body:JSON.stringify(r)}]:"delete"===c&&n?["/api/products/".concat(n),{method:"DELETE"}]:"status change"===c&&r&&n?["/api/v2/products/".concat(n,"/status"),{method:"POST",body:JSON.stringify(r)}]:[void 0,void 0]}),[r,c,n]),o=B.apply(void 0,Object(H.a)(i)),l=Object(j.a)(o,2)[1];return c&&(l.action=c,l.message=Dt[l.code]?Dt[l.code]("product",c)+": ".concat(l.message):""),{add:function(e){return s([void 0,e,"add"])},edit:function(e,t){return s([e,t,"update"])},save:function(e,t){return s([t,e,t?"update":"add"])},del:function(e){return s([e,void 0,"delete"])},reset:function(){return s([])},changeStatus:function(e,t){return s([e,t,"status change"])},status:l}},At=a(0),Et=At.useMemo,Rt=At.useState;var _t=function(){var e=Rt(),t=Object(j.a)(e,2),a=t[0],n=t[1],r=Et((function(){return a?["/api/v2/orders/".concat(a,"/to-order"),{method:"POST"}]:[void 0,void 0]}),[a]),c=B.apply(void 0,Object(H.a)(r));return{status:Object(j.a)(c,2)[1],convert:n}};var Mt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new URLSearchParams(e).toString(),a=B("/api/v2/analytics/department/profits?".concat(t)),r=Object(j.a)(a,2),c=r[0],s=(c=void 0===c?{}:c).data,i=void 0===s?[]:s,o=r[1],l=Object(n.useMemo)((function(){return Object.fromEntries(i.map((function(e){return[e._id,e.profit]})))}),[i]);return{data:l,status:o}};var Ft=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new URLSearchParams(e).toString(),a=B("/api/v2/analytics/product/profits?".concat(t)),r=Object(j.a)(a,2),c=r[0],s=(c=void 0===c?{}:c).data,i=void 0===s?[]:s,o=r[1],l=Object(n.useMemo)((function(){return Object.fromEntries(i.map((function(e){return[e._id,e.profit]})))}),[i]);return{data:l,status:o}};var Vt={headers:{OrganizationID:""}};function Lt(e){var t=function(){var e=B("/api/cheques"),t=Object(j.a)(e,3),a=t[0];return[(a=void 0===a?{data:[]}:a).data,t[1],t[2]]}(),a=Object(j.a)(t,3),n=a[0],r=a[1],c=a[2];return[n.filter((function(t){return"new"===t.status&&(!e||t.organizationId===e)})),r,c]}function Bt(e){var t=B("/api/categories"),a=Object(j.a)(t,3),n=a[0],r=(n=void 0===n?{data:[]}:n).data,c=a[1],s=a[2];return[r.filter((function(t){return!e||t.organizationId===e})).map((function(e){return{value:e._id,text:e.title,departmentId:e.departmentId}})),c,s]}function Ht(e){var t=B("/api/subcategories"),a=Object(j.a)(t,3),n=a[0],r=(n=void 0===n?{data:[]}:n).data,c=a[1],s=a[2];return[r.filter((function(t){return!e||t.organizationId===e})).map((function(e){return{value:e._id,text:e.title,categoryId:e.categoryId}})),c,s]}function zt(){var e=B("/api/admins"),t=Object(j.a)(e,3),a=t[0],n=(a=void 0===a?{data:[]}:a).data,r=t[1],c=t[2];return{options:n.filter((function(e){return 5===e.roleNumber})).map((function(e){var t=e._id,a=e.name;return{value:t,text:a,label:a}})),status:r,refresh:c}}a(755);var qt=a(547),Ut=function(e){var t=e.onLogin,a=Object(n.useContext)(k).token,r=Ct(),c=r.data,s=(c=void 0===c?{}:c).token,i=r.login,o=r.status;return Object(n.useEffect)((function(){o.isSuccess?t(s):o.isError&&qt.b.error(o.message||"failed to login")}),[o,s,t]),Object(n.useEffect)((function(){a&&Object(b.d)("/")}),[a]),Object(x.jsx)("div",{style:{height:"100%"},children:Object(x.jsxs)("div",{className:"login-container",children:[Object(x.jsxs)("div",{style:{maxWidth:"90%",margin:"10% auto auto auto",width:400},children:[Object(x.jsx)(f,{}),Object(x.jsx)(h.a,{as:"h2",color:"teal",textAlign:"center",children:"Acessar Sua Conta"}),Object(x.jsx)(P,{onSubmit:i}),Object(x.jsxs)(v.a,{children:["Encontrou algum problema?"," ",Object(x.jsx)(b.a,{exact:!0,to:"/registration",children:"Fale com o suporte"})]})]}),Object(x.jsx)("div",{className:"aside",children:Object(x.jsxs)("div",{style:{backgroundImage:'url("/login-cover-bg.jpg")',backgroundRepeat:"no-repeat",backgroundSize:"cover",height:"100%"},children:[Object(x.jsx)("div",{class:"text-right",style:{padding:16},children:Object(x.jsx)("h2",{children:"GR"})}),Object(x.jsx)("div",{class:"ant-row ant-row-center",children:Object(x.jsxs)("div",{class:"ant-col ant-col-xs-0 ant-col-sm-0 ant-col-md-0 ant-col-lg-20",children:[Object(x.jsx)("img",{class:"img-fluid mb-5",style:{maxWidth:"100%",marginBottom:32},src:"/login-cover.png",alt:""}),Object(x.jsx)("h1",{class:"text-white",style:{fontWeight:"bold"},children:"Bem vindo ao GR"})]})}),Object(x.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",padding:32},children:[Object(x.jsx)("a",{class:"text-white",href:"/#",children:"Termo & Condi\xe7\xf5es"}),Object(x.jsxs)("span",{class:"text-white",style:{margin:"0 8px"},children:[" ","|"," "]}),Object(x.jsx)("a",{class:"text-white",href:"/#",children:"Privacidade & Pol\xedtica"})]})]})})]})})},Yt=a(1008),Xt=a(976),Wt=function(){return Object(x.jsx)(Yt.a,{active:!0,inverted:!0,children:Object(x.jsx)(Xt.a,{size:"massive",inverted:!0})})},Qt=(a(756),a(974)),Jt=a(997),Kt=a(142),Gt=a(1e3),$t=a(324),Zt=a(520);function ea(e){return e.endpoint+(e.query?"?".concat(Zt.stringify(e.query)):"")}function ta(e){var t={};e.attachment||(t["Content-Type"]="application/json",t.Accept="application/json"),(null===e||void 0===e?void 0:e.organizationId)&&(t.OrganizationID=e.organizationId||"");var a,n=localStorage.getItem("token");if(n&&!e.skipAuthorization&&(t.Authorization="Bearer ".concat(n)),e.attachment){if("GET"===e.type)throw new Error("GET request does not support attachments.");var r=new FormData;r.append("file",e.attachment),a=r}else if(e.request){if("GET"===e.type)throw new Error("GET request does not support request body.");a=JSON.stringify(e.request)}return Object(u.a)({method:e.type,headers:t,signal:e.ct},"GET"===e.request?{}:{body:a})}function aa(e){return na.apply(this,arguments)}function na(){return(na=Object(y.a)(C.a.mark((function e(t){var a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.ok){e.next=12;break}return 401===t.status&&localStorage.removeItem("token"),a="Something went wrong with request!",e.prev=3,e.next=6,t.json();case 6:a=e.sent,e.next=11;break;case 9:e.prev=9,e.t0=e.catch(3);case 11:throw a;case 12:case"end":return e.stop()}}),e,null,[[3,9]])})))).apply(this,arguments)}function ra(e){return ca.apply(this,arguments)}function ca(){return(ca=Object(y.a)(C.a.mark((function e(t){var a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(ea(t),ta(t));case 2:return a=e.sent,e.next=5,aa(a);case 5:return e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var sa=function(){var e=Object(y.a)(C.a.mark((function e(t){var a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ra({endpoint:"/api/products/".concat(t),type:"GET"});case 2:return a=e.sent,e.abrupt("return",a.json());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ia=function(){var e=Object(y.a)(C.a.mark((function e(t){var a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ra({endpoint:"/api/products/".concat(t),type:"DELETE"});case 2:return a=e.sent,e.abrupt("return",a.json());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),oa=function(){var e=Object(y.a)(C.a.mark((function e(t,a){var n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ra({endpoint:"/api/products/".concat(t,"/images/").concat(a),type:"DELETE"});case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),la=function(e){var t=e.title,a=e.id,r=e.addToast,c=e.loadProducts,s=Object(n.useState)(!1),i=Object(j.a)(s,2),o=i[0],l=i[1],d=function(){l(!o)};return Object(x.jsxs)($t.a,{trigger:Object(x.jsx)(T.a,{className:"table-action-btn",onClick:d,children:Object(x.jsx)(Kt.a,{name:"trash"})}),open:o,closeIcon:!0,children:[Object(x.jsx)($t.a.Header,{children:"Delete a product"}),Object(x.jsxs)($t.a.Content,{children:[Object(x.jsxs)("h4",{children:["Are you sure you want to delete product ",'"'.concat(t,'"'),"?"]}),Object(x.jsxs)(T.a,{color:"red",inverted:!0,onClick:function(){ia(a).then((function(e){r("Produto deleted successfully",{appearance:"success"})})).catch((function(e){""!==e.message?r("Could not delete product: "+e.message,{appearance:"error"}):r("Something went wrong",{appearance:"error"})})).finally((function(){d(),c()}))},children:[Object(x.jsx)(Kt.a,{name:"remove"})," Delete"]}),Object(x.jsxs)(T.a,{color:"blue",inverted:!0,onClick:d,children:[Object(x.jsx)(Kt.a,{name:"checkmark"})," Cancel"]})]})]})},da=a(996),ua=a(977);var ja=function(e){var t=e.onChange,a=e.options,r=e.defaultValue,c=e.children,s=e.color,i=e.size,o=e.basic,l=Object(me.a)(["translation"]).t,d=Object(n.useRef)(),u=Object(n.useState)(void 0),b=Object(j.a)(u,2),h=b[0],m=b[1],O=Object(n.useState)({value:r}),p=Object(j.a)(O,2),f=p[0],v=f.value,g=f.comment,C=p[1];return Object(n.useEffect)((function(){d.current?t(void 0,{value:v,comment:g}):d.current=!0}),[v]),Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(da.a,{options:a,onChange:function(e,t){var a=t.options.find((function(e){return e.value===t.value}));a.confirm||a.confirmWithComment?m(a):C({value:t.value})},value:v,icon:"",trigger:Object(x.jsxs)(T.a.Group,{color:s,size:i,basic:o,children:[Object(x.jsx)(T.a,{style:{width:80},children:c}),Object(x.jsx)(T.a,{icon:"dropdown"})]})}),(null===h||void 0===h?void 0:h.confirm)&&Object(x.jsx)(ua.a,{open:!0,content:"".concat(l("Are you sure you want to")," ").concat(h.text," ?"),onCancel:function(){return m(void 0)},onConfirm:function(){t(void 0,{value:h.value,comment:g}),m(void 0)},cancelButton:l("No"),confirmButton:l("Yes")}),(null===h||void 0===h?void 0:h.confirmWithComment)&&Object(x.jsxs)($t.a,{closeIcon:!0,open:!0,onClose:function(){return m(void 0)},children:[Object(x.jsx)($t.a.Header,{children:l("Comment")}),Object(x.jsx)($t.a.Content,{children:Object(x.jsxs)(N.a,{onSubmit:function(e,t){C({value:h.value,comment:e.target.elements.comment.value})},children:[Object(x.jsx)(N.a.TextArea,{name:"comment",label:l("Comment"),maxLength:50,required:!0}),Object(x.jsx)("div",{style:{display:"flex",justifyContent:"flex-end"},children:Object(x.jsx)(T.a,{type:"submit",primary:!0,children:l("Submit")})})]})})]})]})},ba={Available:"teal","Not Available":void 0,"On Hold":"blue"},ha=function(e){return!!e},ma=function(e){var t=e.products,a=e.addToast,n=e.showKitModal,r=e.loadProducts,c=e.setProductToEdit,s=e.onPageChange,i=e.pages,o=e.changeStatus,l=e.filters,d=Object(me.a)(["translation"]).t,u=Be().data;return Object(x.jsxs)(Jt.a,{celled:!0,style:{marginBottom:30},children:[Object(x.jsx)(Jt.a.Header,{children:Object(x.jsxs)(Jt.a.Row,{children:[Object(x.jsx)(Jt.a.HeaderCell,{colspan:3,children:d("Actions")}),Object(x.jsx)(Jt.a.HeaderCell,{children:d("Title")}),Object(x.jsx)(Jt.a.HeaderCell,{children:d("Description")}),Object(x.jsx)(Jt.a.HeaderCell,{children:d("Total Units")}),Object(x.jsx)(Jt.a.HeaderCell,{children:d("Department")}),Object(x.jsx)(Jt.a.HeaderCell,{children:d("Brand")}),Object(x.jsx)(Jt.a.HeaderCell,{children:d("Cost")}),Object(x.jsx)(Jt.a.HeaderCell,{children:d("Price")}),Object(x.jsx)(Jt.a.HeaderCell,{children:d("Status")})]})}),Object(x.jsx)(Jt.a.Body,{children:t.map((function(e){var t,s,i,l;return Object(x.jsxs)(Jt.a.Row,{children:[Object(x.jsx)(Jt.a.Cell,{children:e.kitProducts.length>0?Object(x.jsx)(T.a,{className:"table-action-btn",onClick:function(){return n(e)},children:Object(x.jsx)(Kt.a,{name:"pencil alternate"})}):Object(x.jsx)(T.a,{className:"table-action-btn",onClick:function(){return c(e)},children:Object(x.jsx)(Kt.a,{name:"pencil alternate"})})}),Object(x.jsx)(Jt.a.Cell,{children:Object(x.jsx)("a",{href:"/products/view/".concat(e._id),children:Object(x.jsx)(Kt.a,{name:"eye "})})}),Object(x.jsx)(Jt.a.Cell,{children:Object(x.jsx)(la,{title:e.title,id:e._id,addToast:a,loadProducts:r})}),Object(x.jsx)(Jt.a.Cell,{children:e.title}),Object(x.jsx)(Jt.a.Cell,{children:e.description}),e.isService?Object(x.jsx)(Jt.a.Cell,{}):Object(x.jsxs)(Jt.a.Cell,{children:[e.totalUnits<=(e.minStockThreshold||0)&&Object(x.jsx)("span",{style:{fontFamily:"Segoe UI Emoji"},children:"\u26a0\ufe0f "}),Ke(e.totalUnits)]}),Object(x.jsx)(Jt.a.Cell,{children:[e.department.title,null===(t=e.category)||void 0===t?void 0:t.title,null===(s=e.subcategory)||void 0===s?void 0:s.title].filter(ha).join("/")}),Object(x.jsx)(Jt.a.Cell,{children:[e.brand.title,null===(i=e.model)||void 0===i?void 0:i.title].filter(ha).join("/")}),Object(x.jsx)(Jt.a.Cell,{children:We.format(e.cost)}),Object(x.jsx)(Jt.a.Cell,{children:We.format(e.price)}),Object(x.jsx)(Jt.a.Cell,{children:Object(x.jsx)(ja,{options:u,onChange:(l=e._id,function(e,t){o(l,{status:t.value})}),defaultValue:e.status,color:ba[e.status],size:"mini",basic:!0,children:d(e.status)})})]},e._id)}))}),Object(x.jsx)(Jt.a.Footer,{children:Object(x.jsx)(Jt.a.Row,{children:Object(x.jsx)(Jt.a.HeaderCell,{colSpan:"20",style:{textAlign:"right"},children:Object(x.jsx)(Gt.a,{activePage:l.currentPage,totalPages:i,onPageChange:function(e,t){var a=t.activePage;return s(a)}})})})})]})};ma.defaultProps={products:[],isLoading:!0};var Oa=ma,pa=a(991),xa=a(541),fa=a(212),va=a(122),ga=a(228),Ca=a(166),ya=a(1014),Sa=a(52),Ia=a(99),Na=a(96),wa=a(94),Ta=a(531),Pa=a(232),Da=a(532),ka=a.n(Da),Aa=(a(925),a(990)),Ea=a(1003),Ra=a(988),_a=a(1019);function Ma(e){var t=e.children,a=e.style;return Object(x.jsx)("div",{style:Object(u.a)({display:"flex",height:"100%",justifyContent:"center",alignItems:"center",color:"inherit",padding:16},a),children:t})}function Fa(e){var t=e.status,a=e.children,n=e.style,r=e.noDataMessage,c=t instanceof Array?function(e){for(var t=!1,a=!1,n=0;n<e.length;n++){var r=e[n];t&=r.hasData,a&=r.errorCaught}var c=e.every((function(e){return e.isSuccess}))?"SUCCESS":e.find((function(e){return e.isError}))?"ERROR":e.find((function(e){return e.isLoading}))||e.find((function(e){return e.isSuccess}))?"LOADING":"INIT";console.log("code :>> ",c);var s=new R(c,void 0);return s.hasData=t,s.errorCaught=a,s}(t):t;return c.isInit?null:c.isSuccess?!c.hasData&&r?Object(x.jsx)(Ma,{style:n,children:r}):a():c.isLoading||c.isError?Object(x.jsxs)(Ma,{style:n,children:[c.isLoading&&Object(x.jsx)(Xt.a,{active:!0,inline:!0}),c.isError&&"Oops! Something went wrong.",c.isSuccess&&!c.hasData&&r]}):null}var Va=a(156),La=a.n(Va),Ba=a(97),Ha=["onChange","valuePropName"],za=function(e){var t=e.onChange,a=e.valuePropName,n=Object(Ba.a)(e,Ha);return Object(x.jsx)(Sa.a,Object(u.a)(Object(u.a)({customInput:xa.a,thousandSeparator:".",decimalSeparator:","},n),{},{onValueChange:t?function(e){t(e[a||"floatValue"])}:void 0}))},qa=a(126),Ua=["disabled"];var Ya=function(e){var t=e.disabled,a=Object(Ba.a)(e,Ua),c=Object(n.useContext)(D),s=Object(me.a)("translation").t,i=c?r.a.Fragment:function(e){var t=e.children;return Object(x.jsx)(qa.a,{title:s("Org not selected"),children:t})};return Object(x.jsx)(i,{children:Object(x.jsx)(at.a,Object(u.a)({disabled:!c||t},a))})};var Xa=function(e){var t=e.okText,a=e.onClose,r=e.formID,c=e.submitButtonProps,s=e.width,i=e.style,o=e.children,l=e.organizationId,d=Object(n.useContext)(D);return Object(x.jsx)(lt.a,{title:t,onClose:a,visible:!0,okText:t,okButtonProps:Object(u.a)({form:r,htmlType:"submit"},c),onCancel:a,width:s||800,maskClosable:!1,keyboard:!1,style:i,bodyStyle:{maxHeight:"calc(100vh - 144px)"},destroyOnClose:!0,children:Object(x.jsx)(D.Provider,{value:l||d,children:o})})},Wa=a(978),Qa=a(1017),Ja={type:"link",icon:Object(x.jsx)(Wa.a,{})};var Ka=function(e){var t=e.name,a=e.label,r=e.children,c=e.addText,s=e.min,i=void 0===s?0:s,o=e.addBtnProps,l=Object(n.useMemo)((function(){return Object(u.a)(Object(u.a)({},Ja),{},{addBtnPropsFromProps:o})}),[o]);return Object(x.jsxs)(x.Fragment,{children:[a&&Object(x.jsx)("div",{style:{paddingBottom:8},children:a}),Object(x.jsx)(pa.a.List,{name:t,children:function(e,t){var a=t.add,n=t.remove;return Object(x.jsxs)(x.Fragment,{children:[e.map((function(e,t){return Object(x.jsxs)("div",{style:{width:"100%",display:"grid",gridTemplateColumns:"minmax(min-content,max-content) minmax(min-content,max-content) min-content",columnGap:8,alignItems:"baseline"},children:[r(e),Object(x.jsx)(at.a,{style:{visibility:t>i-1?"visible":"hidden"},type:"danger",ghost:!0,icon:Object(x.jsx)(Qa.a,{}),onClick:function(){return n(e.name)}})]},e.key)})),Object(x.jsx)(at.a,Object(u.a)(Object(u.a)({},l),{},{onClick:function(){return a()},children:c}))]})}})]})},Ga=function(e){var t=e.organization;return t?Object(x.jsxs)("div",{children:[Object(x.jsx)("div",{style:{width:60},children:Object(x.jsx)("img",{style:{maxWidth:"100%",maxHeight:"100%"},src:t.logoUrl})}),Object(x.jsx)("div",{children:Object(x.jsx)("strong",{children:t.title})}),Object(x.jsx)("div",{children:t.description}),Object(x.jsx)("div",{children:t.phoneNumber})]}):null},$a=a(548),Za=["component"],en=function(e,t){$a.a[t.appearance||"info"]({message:e,placement:"bottomRight"})},tn=function(e){var t=e.component,a=Object(Ba.a)(e,Za),r=Object(n.useContext)(D);return Object(n.useContext)(k).token?Object(x.jsx)(t,Object(u.a)(Object(u.a)({},a),{},{addToast:en,organizationId:r})):Object(x.jsx)(b.b,{from:"",to:"login",noThrow:!0})},an=a(995);var nn,rn,cn=function(e){var t=e.onChange,a=e.value,n=function(){var e=He().all,t=Le().all,a=qe().all;return{options:e.map((function(e){return{value:e._id,label:e.title,children:t.filter((function(t){return t.departmentId===e._id})).map((function(e){return{value:e._id,label:e.title,children:a.filter((function(t){return t.categoryId===e._id})).map((function(e){return{value:e._id,label:e.title}}))}}))}}))}}().options;return Object(x.jsx)(an.a,{options:n,onChange:t,changeOnSelect:!0,value:a})},sn=a(1012),on=a(1013),ln=a(30),dn="unit",un="linearMeter",jn="squareMeter",bn="cubicMeter",hn=[{label:__("Unit"),value:dn},{label:__("Linear Meter"),value:un},{label:__("Square Meter"),value:jn},{label:__("Cubic Meter"),value:bn}],mn=(nn={},Object(z.a)(nn,un,[null]),Object(z.a)(nn,jn,[null,null]),Object(z.a)(nn,bn,[null,null,null]),nn),On=(a(931),__("Meters")),pn=__("Width"),xn=__("Length"),fn=__("Height"),vn={label:__("M"),placeholder:On},gn={label:__("W"),placeholder:pn},Cn={label:__("H"),placeholder:fn},yn={label:__("L"),placeholder:xn},Sn=(rn={},Object(z.a)(rn,un,[vn]),Object(z.a)(rn,jn,[gn,Cn]),Object(z.a)(rn,bn,[gn,Cn,yn]),rn);var In=function(e){var t=e.measurementType,a=e.onChange,c=e.value,s=Object(n.useCallback)((function(e){return function(t){var n=Object(H.a)(c);n[e]=t,a&&a(n)}}),[c,a]),i=Object(n.useMemo)((function(){var e=Sn[t];return e?e.map((function(e,a){var n=e.label,i=e.placeholder;return Object(x.jsxs)(r.a.Fragment,{children:[n,": ",Object(x.jsx)(za,{placeholder:i,onChange:s(a),value:c[a]})]},t+n)})):null}),[t,s,c]);return Object(x.jsx)(ln.a,{componentSize:"small",children:Object(x.jsx)("div",{className:"dimension-fields-container",children:i})})},Nn=(a(932),function(e){var t=e.showKits;return function(e){return!!t||0===(e.kitProducts||[]).length}}),wn=function(e){var t=e.measurementType,a=e.children,r=e.onAdd,c=Object(n.useState)(mn[t]),s=Object(j.a)(c,2),i=s[0],o=s[1],l=Object(n.useCallback)((function(){r(i)}),[i,r]),d=Object(n.useMemo)((function(){return Object(x.jsxs)("div",{className:"measurement-value-popover-form",children:[Object(x.jsx)(In,{value:i,onChange:o,measurementType:t}),Object(x.jsx)(at.a,{type:"primary",onClick:l,children:__("Add")})]})}),[t,i,l]);return Object(x.jsx)(sn.a,{content:d,children:a})},Tn=function(e){var t=e.product,a=e.onAdd,n=e.addText,r=function(e){var n=Object(u.a)(Object(u.a)({},t),{},{measurementValue:e});a(n)},c=0===t.totalUnits&&!t.isService;return t.measurementType===dn?Object(x.jsxs)(at.a,{onClick:function(){r([])},size:"small",disabled:c,children:["+ ",n]}):Object(x.jsx)(wn,{measurementType:t.measurementType,onAdd:r,children:Object(x.jsxs)(at.a,{size:"small",disabled:c,children:["+ ",n]})})};var Pn=function(e){var t=e.className,a=e.onAdd,r=e.onAddAsNew,c=e.showServices,s=void 0===c||c,i=e.showKits,o=void 0===i||i,l=e.enableOutOfStock,d=void 0!==l&&l,u=Object(me.a)("translation").t,j=Object(n.useMemo)((function(){return{showServices:s,showKits:o}}),[s,o]),b=se(void 0,j,Nn),h=b.all,m=b.status,O=b.search,p=function(e){return a(e)},f=function(e){return r(e)};return Object(n.useEffect)((function(){var e="",t=!1,n=function(n){if("Enter"===n.key){if(e.length>=13){var r=h.find((function(t){var a=t.ISBN;return e===a}));e="",r&&a(r)}}else e+=n.key;t||(t=!0,setTimeout((function(){e="",t=!1}),200))};return document.addEventListener("keydown",n),function(){document.removeEventListener("keydown",n)}}),[h,a]),Object(x.jsxs)("div",{className:"product-select ".concat(t),children:[Object(x.jsx)(xa.a.Search,{onChange:function(e){e.preventDefault(),O(e.target.value)},allowClear:!0}),Object(x.jsx)(on.b,{itemLayout:"horizontal",dataSource:h,loading:m.isLoading,renderItem:function(e){var t;return Object(x.jsx)(on.b.Item,{className:0!==e.totalUnits||e.isService||d?void 0:"disabled",actions:[Object(x.jsx)(Tn,{product:e,onAdd:f,addText:__("Add as Another")}),Object(x.jsx)(Tn,{product:e,onAdd:p,addText:__("Add")})],children:Object(x.jsx)(on.b.Item.Meta,{avatar:Object(x.jsx)("img",{src:"/assets/".concat(null===(t=(e.images||[])[0])||void 0===t?void 0:t.link)}),title:Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{children:e.title}),!e.isService&&Object(x.jsxs)("span",{style:{color:0===e.totalUnits?"red":"inherit"},children:[u("In Stock"),": ",Ke(e.totalUnits)," "]}),Object(x.jsxs)("span",{children:[__("Price"),": ",ht(e.price)]})]})})},e._id)}})]})};var Dn=function(e){var t=e.onChange,a=e.value,n=function(){var e=ze().all,t=ft().all;return{options:e.map((function(e){var a=t.filter((function(t){return t.brandId===e._id})).map((function(e){return{value:e._id,label:e.title}}));return{value:e._id,label:e.title,children:a,disabled:0===a.length}}))}}().options;return Object(x.jsx)(an.a,{options:n,onChange:t,changeOnSelect:!0,value:a})},kn=a(1018),An=(a(934),function(e){var t=e.initialValue,a=e.onChange,r=Object(n.useState)(t),c=Object(j.a)(r,2),s=c[0],i=c[1],o=Object(n.useMemo)((function(){return Object(x.jsx)(xa.a.TextArea,{onChange:function(e){return i(e.target.value)},defaultValue:t})}),[t]);return Object(x.jsx)(sn.a,{content:o,onVisibleChange:function(e){console.log("comment,visible :>> ",s,e),e||a(s)},destroyTooltipOnHide:!0,children:Object(x.jsx)(at.a,{icon:Object(x.jsx)(kn.a,{})})})});function En(e){var t,a=e.product,n=e.onCommentChange,r=e.onQuantityChange,c=e.onDelete,s=e.hideComment,i=a._id,o=a.images,l=void 0===o?[]:o,d=a.quantity,u=a.chargeDuration,j=void 0===u?"":u,b=a.comment;return Object(x.jsx)(on.b.Item,{style:{display:"block"},children:Object(x.jsx)(on.b.Item.Meta,{className:"selected-product-meta",avatar:Object(x.jsx)("img",{src:"/assets/".concat(null===(t=l[0])||void 0===t?void 0:t.link)}),title:Object(x.jsxs)("div",{className:"space-between",children:[Object(x.jsx)("div",{children:a.title+(j?" (per ".concat(j,")"):"")}),Object(x.jsx)("div",{className:"price",children:We.format(st([a]))})]}),description:Object(x.jsx)(ln.a,{componentSize:"small",children:Object(x.jsxs)("div",{className:"fields",children:[__("Q"),":"," ",Object(x.jsx)(za,{style:{width:80,marginRight:8},value:d,onChange:function(e){return r(i,e,a.measurementValue)},step:.01}),Object(x.jsx)(In,{onChange:function(e){r(i,d,e)},measurementType:a.measurementType,value:a.measurementValue}),Object(x.jsxs)("div",{className:"actions",children:[!s&&Object(x.jsx)(An,{onChange:function(e){return n(i,e)},initialValue:b}),Object(x.jsx)(at.a,{icon:Object(x.jsx)(nt.a,{}),onClick:function(){return c(i)},danger:!0})]})]})})})})}var Rn=function(e){var t=e.products,a=e.onQuantityChange,n=e.onCommentChange,r=e.onDelete,c=e.hideComment;return Object(x.jsx)(on.b,{className:"selected-product-list",itemLayout:"horizontal",dataSource:t,renderItem:function(e){return Object(x.jsx)(En,{product:e,onQuantityChange:a,onCommentChange:n,onDelete:r,hideComment:c})}})},_n=function(e){return Object(x.jsx)(Ca.a,Object(u.a)({allowClear:!0,showSearch:!0,optionFilterProp:"label"},e))},Mn=function(e){var t=e.value;return Object(x.jsx)("span",{children:t})};function Fn(e){var t=e.task;return Object(x.jsxs)("div",{className:"printonly printonly-flex space-between",children:[Object(x.jsx)(Ga,{organization:t.organization}),Object(x.jsx)(La.a,{id:"qr-canvas",value:window.location.href,size:100})]})}var Vn=function(e){var t=e.id,a=Object(me.a)(["translation"]).t,n=we(t),r=n.data,c=n.getStatus,s={width:"100%",textAlign:"center"};return Object(x.jsxs)("div",{className:"container",children:[Object(x.jsx)("div",{className:"text-right margin-bottom noprint",children:Object(x.jsx)(at.a,{icon:Object(x.jsx)(_a.a,{}),onClick:function(){return window.print()},children:a("Print")})}),Object(x.jsx)(Fa,{status:c,children:function(){var e;return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(Fn,{task:r}),Object(x.jsx)("div",{className:"site-card-wrapper",children:Object(x.jsx)(Aa.a,{style:s,title:a("Service order")+r.order.orderId,children:Object(x.jsxs)(fa.a,{gutter:16,children:[Object(x.jsx)(va.a,{span:8,children:Object(x.jsxs)(Aa.a,{title:a("Delivery or Job Site"),bordered:!1,children:[Object(x.jsx)("h3",{children:it(r.client)}),r.workAddress,Object(x.jsx)("br",{}),Object(x.jsxs)("b",{children:["#: ",r.client.mobileNumber]})]})}),Object(x.jsx)(va.a,{span:8,children:Object(x.jsx)(Aa.a,{title:a("Seller"),bordered:!1,children:it(r.assignee)})}),Object(x.jsx)(va.a,{span:8,children:Object(x.jsxs)(Aa.a,{title:a("Client"),bordered:!1,children:[Object(x.jsx)("h3",{children:it(r.client)}),r.client.address," - ",r.client.zipCode,Object(x.jsx)("br",{}),Object(x.jsxs)("b",{children:["#: ",r.client.mobileNumber]})]})})]})})}),Object(x.jsxs)(Ea.b,{size:"small",bordered:!0,style:{marginBottom:32},children:[Object(x.jsx)(Ea.b.Item,{label:a("Start Date"),span:1.5,children:U.a.unix(r.startDate).format("DD/MM/YYYY")}),Object(x.jsx)(Ea.b.Item,{label:a("Conlusion Date"),span:1.5,children:U.a.unix(r.estConclusionDate).format("DD/MM/YYYY")}),Object(x.jsx)(Ea.b.Item,{label:a("Leader"),children:it(r.leader)}),Object(x.jsx)(Ea.b.Item,{label:a("Helpers"),span:2,children:r.helpers.map(it).join(",")})]}),Object(x.jsxs)(fa.a,{gutter:16,children:[Object(x.jsx)(va.a,{span:8,children:Object(x.jsx)(Aa.a,{title:a("host"),children:r.host})}),Object(x.jsx)(va.a,{span:8,children:Object(x.jsx)(Aa.a,{title:a("lunch"),children:r.lunch})}),Object(x.jsx)(va.a,{span:8,children:Object(x.jsxs)(Aa.a,{title:a("Vehicle"),children:[r.vehicle,Object(x.jsx)("b",{children:it(r.drivers)})]})})]}),Object(x.jsx)(Ea.b,{size:"small",bordered:!0,style:{marginBottom:32}}),Object(x.jsx)(Aa.a,{title:a("Rota"),children:r.rute}),Object(x.jsx)(Aa.a,{title:a("Description"),children:r.description}),r.order&&Object(x.jsxs)(Ea.b,{size:"small",bordered:!0,title:__("Order"),children:[Object(x.jsx)("div",{children:Object(x.jsxs)(Ra.a,{size:"small",dataSource:null===(e=r.order)||void 0===e?void 0:e.items,rowKey:"productId",pagination:!1,bordered:!1,children:[Object(x.jsx)(Ra.a.Column,{title:__("Title"),dataIndex:"title"}),Object(x.jsx)(Ra.a.Column,{title:__("Quantity"),dataIndex:"amount",width:"95px",render:Ke}),Object(x.jsx)(Ra.a.Column,{title:__("Dimensions"),dataIndex:"measurementValue",render:ot,width:"180px"}),Object(x.jsx)(Ra.a.Column,{title:__("Comment"),dataIndex:"comment"})]})}),Object(x.jsx)("br",{}),Object(x.jsx)(Aa.a,{title:a("Comment"),children:r.order.comment}),Object(x.jsx)(Aa.a,{title:a("Obs"),children:r.obs})]})]})}})]})},Ln=function(e){Object(Na.a)(a,e);var t=Object(wa.a)(a);function a(e){var n;return Object(A.a)(this,a),(n=t.call(this,e)).onEditorStateChange=function(e){n.setState({editorState:e,rawMessage:ka()(Object(Pa.convertToRaw)(e.getCurrentContent()))})},n.state={editorState:Pa.EditorState.createEmpty(),rawMessage:""},n.onEditorStateChange=n.onEditorStateChange.bind(Object(Ia.a)(n)),n.handleEditorStateToMessage=n.handleEditorStateToMessage.bind(Object(Ia.a)(n)),n}return Object(E.a)(a,[{key:"handleEditorStateToMessage",value:function(){this.setState({message:this.state.rawMessage})}},{key:"render",value:function(){var e=this.state.editorState;return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)("div",{className:"editor",children:[Object(x.jsx)(Vn,{editorState:Object(Pa.convertToRaw)(e.getCurrentContent())}),Object(x.jsx)(Ta.Editor,{initialEditorState:e,toolbarClassName:"toolbarClassName",wrapperClassName:"wrapperClassName",editorClassName:"editorClassName",onEditorStateChange:this.onEditorStateChange})]})})}}]),a}(n.Component),Bn={required:!0},Hn={name:[Bn],status:[Bn],price:[Bn],departmentId:[Bn],categoryId:[Bn],subcategoryId:[Bn],chargeDuration:[Bn]};var zn=function(e){var t=e.onClose,a=e.okText,r=e.okButtonProps,c=e.afterSave,s=e.initialValue,i=Object(me.a)(["translation"]).t,o=ce(null===s||void 0===s?void 0:s._id),l=o.save,d=o.status,b=Object(n.useContext)(D),h=Xe(b).options,m=function(e){var t=Bt(e),a=Object(j.a)(t,3),n=a[0],r=a[1],c=a[2];return{options:n.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{label:e.text})})),status:r,refresh:c}}(b),O=m.options,p=function(e){var t=Ht(e),a=Object(j.a)(t,3),n=a[0],r=a[1],c=a[2];return{options:n.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{label:e.text})})),status:r,refresh:c}}(b),f=p.options;return Object(n.useEffect)((function(){d.isSuccess&&(t(),c())}),[d,c]),Object(x.jsxs)(lt.a,{visible:!0,onCancel:t,title:a,onClose:t,okText:a,okButtonProps:Object(u.a)({form:"service-add-modal",htmlType:"submit"},r),width:800,children:[Object(x.jsxs)(pa.a,{layout:"vertical",id:"service-add-modal",initialValues:s,onFinish:function(e){var t=Object(u.a)({isService:!0},e);l(t,null===s||void 0===s?void 0:s._id)},children:[Object(x.jsx)(pa.a.Item,{label:i("Name"),name:"title",rules:Hn.name,children:Object(x.jsx)(xa.a,{})}),Object(x.jsxs)(fa.a,{gutter:16,children:[Object(x.jsx)(va.a,{span:8,children:Object(x.jsx)(pa.a.Item,{label:i("Price"),name:"price",trigger:"onValueChange",getValueFromEvent:function(e){return e.floatValue},rules:Hn.price,children:Object(x.jsx)(Sa.a,{customInput:xa.a,thousandSeparator:".",decimalSeparator:","})})}),Object(x.jsx)(va.a,{span:8,children:Object(x.jsx)(pa.a.Item,{label:i("Cost"),name:"cost",trigger:"onValueChange",getValueFromEvent:function(e){return e.floatValue},rules:Hn.cost,children:Object(x.jsx)(Sa.a,{customInput:xa.a,thousandSeparator:".",decimalSeparator:","})})}),Object(x.jsx)(va.a,{children:Object(x.jsx)(pa.a.Item,{name:"chargeDuration",label:"\u2800",rules:Hn.chargeDuration,children:Object(x.jsxs)(ga.a.Group,{children:[Object(x.jsx)(ga.a.Button,{value:"day",children:i("Per day")}),Object(x.jsx)(ga.a.Button,{value:"hour",children:i("Per hour")}),Object(x.jsx)(ga.a.Button,{value:"fixed",children:i("Fixed")})]})})})]}),Object(x.jsxs)(fa.a,{gutter:16,children:[Object(x.jsx)(va.a,{span:8,children:Object(x.jsx)(pa.a.Item,{label:i("Department"),name:"departmentId",rules:Hn.departmentId,children:Object(x.jsx)(Ca.a,{options:h})})}),Object(x.jsx)(va.a,{span:8,children:Object(x.jsx)(pa.a.Item,{dependencies:["departmentId"],noStyle:!0,children:function(e){var t=e.getFieldValue;return Object(x.jsx)(pa.a.Item,{label:i("Category"),name:"categoryId",children:Object(x.jsx)(Ca.a,{options:O.filter((function(e){return e.departmentId===t("departmentId")}))})})}})}),Object(x.jsx)(va.a,{span:8,children:Object(x.jsx)(pa.a.Item,{dependencies:["categoryId"],noStyle:!0,children:function(e){var t=e.getFieldValue;return Object(x.jsx)(pa.a.Item,{label:i("Sub Category"),name:"subcategoryId",children:Object(x.jsx)(Ca.a,{options:f.filter((function(e){var a=e.categoryId;return t("categoryId")===a}))})})}})})]}),Object(x.jsx)(pa.a.Item,{label:i("Description"),name:"description",rules:Hn.description,children:Object(x.jsx)(Ln,{})})]}),d.isError&&Object(x.jsx)(ya.a,{message:d.message,type:"error"})]})},qn=a(989),Un=(a(935),["_id"]),Yn=function(e){return Array.isArray(e)?e:e&&e.fileList},Xn={title:[mt],categoryInfo:[mt],brandInfo:[mt],price:[mt],products:[mt]},Wn={products:[],discount:0,images:[]};var Qn=function(e){var t=e.onClose,a=e.afterSave,r=e.initialValue,c=e.okText,s=Object(me.a)(["translation"]).t,i=kt(),o=i.save,l=i.status,d=pa.a.useForm(),b=Object(j.a)(d,1)[0],h=function(e,t,a){var n=b.getFieldValue("products"),r=n.find((function(t){return t._id===e}));r.quantity=t,r.measurementValue=a,b.setFieldsValue({products:null}),b.setFieldsValue({products:n})},m=function(e){var t=b.getFieldValue("products"),a=t.findIndex((function(t){return t._id===e}));b.setFieldsValue({products:null}),b.setFieldsValue({products:[].concat(Object(H.a)(t.slice(0,a)),Object(H.a)(t.slice(a+1)))})};Object(n.useEffect)((function(){l.isSuccess&&(qt.b.success(l.message),a())}),[l,a]);var O=new Set,p=Object(n.useMemo)((function(){return r?Object(u.a)(Object(u.a)(Object(u.a)({},Wn),r),{},{categoryInfo:[r.departmentId,r.categoryId,r.subcategoryId].filter(Boolean),brandInfo:[r.brandId,r.modelId].filter(Boolean),images:(r.imageUrls||[]).map((function(e){return{url:e,uid:e}})),products:r.kitProducts.map((function(e){var t=e._id,a=Object(Ba.a)(e,Un),n=O.has(t)?Symbol(t):t;return O.add(t),Object(u.a)({_id:n},a)}))}):Wn}),[r]);return Object(x.jsxs)(Xa,{className:"kit-form-modal",formID:"kit-form-modal",okText:c,onClose:t,submitButtonProps:{loading:l.isLoading},width:"100%",style:{top:16},organizationId:null===p||void 0===p?void 0:p.organizationId,children:[Object(x.jsxs)(pa.a,{id:"kit-form-modal",layout:"vertical",form:b,onFinish:function(e){var t=[],a=b.getFieldValue("products");if(0!==a.length){for(var n in a){var c=a[n];c.quantity&&t.push({_id:c.__id,quantity:c.quantity,title:c.title,price:c.price,cost:c.cost,measurementValue:c.measurementValue})}o(Object(u.a)(Object(u.a)(Object(u.a)({},r),e),{},{departmentId:e.categoryInfo[0],categoryId:e.categoryInfo[1],subcategoryId:e.categoryInfo[2],brandId:e.brandInfo[0],modelId:e.brandInfo[1],kitProducts:t,imageUrls:e.images.map((function(e){var t=e.response;return null===t||void 0===t?void 0:t.message}))}),null===r||void 0===r?void 0:r._id)}},initialValues:p,preserve:!1,children:[Object(x.jsxs)("div",{className:"products-wrapper",children:[Object(x.jsx)(Pn,{className:"product-list",onAdd:function(e){var t=b.getFieldValue("products"),a=t.findIndex((function(t){return t._id===e._id})),n=(null===a||void 0===a?void 0:a.quantity)||0;if(e.isService||n!==e.quantity)if(-1===a){var r={_id:e._id,__id:e._id,title:e.title,price:e.price,cost:e.cost,quantity:1,images:e.images,chargeDuration:e.chargeDuration,measurementType:e.measurementType,measurementValue:e.measurementValue};b.setFieldsValue({products:[r].concat(Object(H.a)(t))})}else t[a].quantity+=1,b.setFieldsValue({products:t})},onAddAsNew:function(e){var t,a=b.getFieldValue("products"),n=(null===(t=a[e._id])||void 0===t?void 0:t.quantity)||0;if(e.isService||e.quantity!==n){var r={_id:Symbol(e._id),__id:e._id,title:e.title,price:e.price,cost:e.cost,quantity:1,images:e.images,chargeDuration:e.chargeDuration,measurementType:e.measurementType,measurementValue:e.measurementValue};b.setFieldsValue({products:[r].concat(Object(H.a)(a))})}},enableOutOfStock:!0,showKits:!1}),Object(x.jsxs)("div",{style:{width:"50%",display:"inline-block",height:"100%"},children:[Object(x.jsx)(pa.a.Item,{className:"products-form-item",wrapperCol:{span:24},shouldUpdate:!0,noStyle:!0,children:function(e){var t=e.getFieldValue;return Object(x.jsx)(Rn,{products:t("products"),onQuantityChange:h,onDelete:m,hideComment:!0})}}),Object(x.jsx)(pa.a.Item,{className:"product-total",wrapperCol:{span:24},shouldUpdate:!0,children:function(e){var t=e.getFieldValue;return Object(x.jsxs)("div",{style:{textAlign:"right",fontSize:"1.2em"},children:[s("Total"),": ",We.format(st(t("products")))]})}})]})]}),Object(x.jsxs)("div",{className:"grid-50-50",children:[Object(x.jsxs)("div",{children:[Object(x.jsxs)(fa.a,{gutter:16,children:[Object(x.jsx)(va.a,{span:8,children:Object(x.jsx)(pa.a.Item,{label:s("Title"),name:"title",rules:Xn.title,children:Object(x.jsx)(xa.a,{})})}),Object(x.jsx)(va.a,{span:8,children:Object(x.jsx)(pa.a.Item,{name:"categoryInfo",label:["Department","Category","Sub Category"].map(s).join("/"),rules:Xn.categoryInfo,children:Object(x.jsx)(cn,{})})}),Object(x.jsx)(va.a,{span:8,children:Object(x.jsx)(pa.a.Item,{name:"brandInfo",label:["Brand","Model"].map(s).join("/"),rules:Xn.brandInfo,children:Object(x.jsx)(Dn,{})})})]}),Object(x.jsx)(fa.a,{gutter:16,children:Object(x.jsx)(va.a,{span:8,children:Object(x.jsx)(pa.a.Item,{name:"price",label:s("Price"),rules:Xn.price,children:Object(x.jsx)(za,{})})})}),Object(x.jsx)(pa.a.Item,{label:s("Description"),name:"description",rules:Xn.description,children:Object(x.jsx)(Ln,{})}),Object(x.jsx)(pa.a.Item,{labelCol:{span:4},label:s("Comment"),name:"comment",rules:Xn.comment,children:Object(x.jsx)(Ln,{})})]}),Object(x.jsx)(pa.a.Item,{name:"images",valuePropName:"fileList",label:s("Images"),getValueFromEvent:Yn,rules:Xn.images,children:Object(x.jsx)(qn.a,{multiple:!0,action:"/assets/upload?entity=product",accept:".jpg, .jpeg",name:"file",listType:"picture-card",children:Object(x.jsxs)("div",{children:[Object(x.jsx)(Wa.a,{}),Object(x.jsx)("div",{style:{marginLeft:8},children:"Upload"})]})})})]})]}),l.isError&&Object(x.jsx)(ya.a,{message:l.message,type:"error"})]})},Jn=a(979),Kn=a(980),Gn=(a(936),{title:[mt],totalUnits:[mt],departmentTree:[mt],brandTree:[mt],minStockThreshold:[mt],costContributionValue:[mt],price:[mt],unitType:[mt],measurementType:[mt],metricValue:[mt]});function $n(e){return new Promise((function(t,a){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){return t(n.result)},n.onerror=function(e){return a(e)}}))}var Zn=function(e){return Array.isArray(e)?e:e&&e.fileList};var er={costContribution:[{name:"",value:0}],profitInPercentage:!1,images:[],measurementType:dn,measurementValue:[]};var tr=function(e){var t,a,r=e.onClose,c=e.afterSave,s=e.okText,i=e.initialValue,o=Object(me.a)(["translation"]).t,l=tt(o,Gn),d=Object(n.useState)(),b=Object(j.a)(d,2),h=b[0],m=b[1],O=function(){var e=He().all,t=Le().all,a=qe().all;return{options:e.map((function(e){return{value:e._id,label:e.title,children:t.filter((function(t){return t.departmentId===e._id})).map((function(e){return{value:e._id,label:e.title,children:a.filter((function(t){return t.categoryId===e._id})).map((function(e){return{value:e._id,label:e.title}}))}}))}}))}}().options,p=function(){var e=ze().all,t=ft().all;return{options:e.map((function(e){var a=t.filter((function(t){return t.brandId===e._id})).map((function(e){return{value:e._id,label:e.title}}));return{value:e._id,label:e.title,children:a,disabled:0===a.length}}))}}().options,f=zt().options,v=kt(),g=v.save,S=v.status,I=pa.a.useForm(),N=Object(j.a)(I,1)[0],w=function(){var e=Object(y.a)(C.a.mark((function e(t){var a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.url||t.preview)){e.next=5;break}m(t.url),e.next=9;break;case 5:return e.next=7,$n(t.originFileObj);case 7:a=e.sent,m(a);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){S.isSuccess&&(qt.b.success(S.message),c())}),[S,c]);var T=i?Object(u.a)(Object(u.a)(Object(u.a)({},er),i),{},{departmentTree:[i.departmentId,i.categoryId,i.subcategoryId],brandTree:[i.brandId,i.modelId],images:(i.imageUrls||[]).map((function(e){return{url:e,uid:e}})),profit:i.price-i.cost,metricType:null===(t=i.unit[i.unitType])||void 0===t?void 0:t.unit,metricValue:null===(a=i.unit[i.unitType])||void 0===a?void 0:a.value,costContribution:i.costContribution||[{name:"",value:i.cost}]}):er;return Object(x.jsxs)(Xa,{formID:"product-add-modal",onClose:r,okText:s,submitButtonProps:{loading:S.isLoading},width:"100%",style:{top:16},organizationId:null===T||void 0===T?void 0:T.organizationId,children:[Object(x.jsx)(pa.a,{form:N,layout:"vertical",id:"product-add-modal",onValuesChange:function(e){var t=N.getFieldValue("costContribution").reduce((function(e,t){return e+((null===t||void 0===t?void 0:t.value)||0)}),0),a=N.getFieldValue("profit")||0,n=t+(N.getFieldValue("profitInPercentage")?a*t/100:a);if(e.costContribution)N.setFieldsValue({price:Number(n.toFixed(2)),profit:Number(a.toFixed(2))});else if(void 0!==e.profitInPercentage)N.setFieldsValue({price:Number(n.toFixed(2))});else if(e.profit)N.setFieldsValue({price:Number(n.toFixed(2))});else if(e.price){var r=N.getFieldValue("profitInPercentage")?100*(e.price-t)/t:e.price-t;N.setFieldsValue({profit:Number(r.toFixed(2))})}},initialValues:T,onFinish:function(e){var t=Object(u.a)(Object(u.a)({},e),{},{departmentId:e.departmentTree[0],categoryId:e.departmentTree[1]||void 0,subcategoryId:e.departmentTree[2]||void 0,brandId:e.brandTree[0],modelId:e.brandTree[1],cost:e.costContribution.reduce((function(e,t){return e+((null===t||void 0===t?void 0:t.value)||0)}),0),imageUrls:e.images.map((function(e){var t=e.response;return null===t||void 0===t?void 0:t.message})),revenue:e.profit,providerId:e.providerId||void 0});console.log("payload :>> ",t),g(t,null===i||void 0===i?void 0:i._id)},children:Object(x.jsxs)(fa.a,{gutter:16,children:[Object(x.jsxs)(va.a,{span:16,children:[Object(x.jsxs)(fa.a,{gutter:16,children:[Object(x.jsx)(va.a,{span:12,children:Object(x.jsx)(pa.a.Item,{name:"title",label:o("Title"),rules:l.title,children:Object(x.jsx)(xa.a,{})})}),Object(x.jsx)(va.a,{span:6,children:Object(x.jsx)(pa.a.Item,{name:"minStockThreshold",label:o("Min Stock Threshold"),rules:l.minStockThreshold,children:Object(x.jsx)(za,{})})})]}),Object(x.jsxs)(fa.a,{gutter:16,children:[Object(x.jsx)(va.a,{span:12,children:Object(x.jsx)(pa.a.Item,{label:["Department","Category","Sub Category"].map(o).join("/"),name:"departmentTree",rules:l.departmentTree,children:Object(x.jsx)(an.a,{options:O,changeOnSelect:!0})})}),Object(x.jsx)(va.a,{span:12,children:Object(x.jsx)(pa.a.Item,{label:["Brand","Model"].map(o).join("/"),name:"brandTree",rules:l.brandTree,children:Object(x.jsx)(an.a,{options:p})})})]}),Object(x.jsxs)(fa.a,{gutter:16,children:[Object(x.jsx)(va.a,{span:6,children:Object(x.jsx)(pa.a.Item,{name:"ISBN",label:o("BCode"),rules:l.ISBN,children:Object(x.jsx)(xa.a,{})})}),Object(x.jsx)(va.a,{span:6,children:Object(x.jsx)(pa.a.Item,{name:"providerId",label:o("Provider"),rules:l.providerId,children:Object(x.jsx)(Ca.a,{options:f})})})]}),Object(x.jsxs)(fa.a,{gutter:16,children:[Object(x.jsx)(va.a,{span:4,children:Object(x.jsx)(pa.a.Item,{name:"measurementType",label:o("Metric"),rules:l.measurementType,children:Object(x.jsx)(Ca.a,{options:hn})})}),Object(x.jsx)(va.a,{span:4,children:Object(x.jsx)(pa.a.Item,{name:"totalUnits",label:o("Total Quantity"),rules:l.totalUnits,children:Object(x.jsx)(za,{})})})]}),Object(x.jsx)(Jn.a,{style:{margin:"8px 0"}}),Object(x.jsxs)(fa.a,{gutter:16,children:[Object(x.jsxs)(va.a,{span:8,children:[Object(x.jsx)(Ka,{label:o("Cost"),name:"costContribution",children:function(e){return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(pa.a.Item,{name:[e.name,"name"],fieldKey:[e.fieldKey,"name"],rules:l.costContributionName,children:Object(x.jsx)(xa.a,{placeholder:o("Cost Name")})}),Object(x.jsx)(pa.a.Item,{name:[e.name,"value"],fieldKey:[e.fieldKey,"value"],rules:l.costContributionValue,children:Object(x.jsx)(za,{})})]})}}),Object(x.jsx)(pa.a.Item,{shouldUpdate:!0,noStyle:!0,children:function(e){var t=e.getFieldValue;return Object(x.jsxs)(x.Fragment,{children:["Total: ",ht(t("costContribution").reduce((function(e,t){return e+((null===t||void 0===t?void 0:t.value)||0)}),0))]})}})]}),Object(x.jsx)(va.a,{span:8,children:Object(x.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"auto max-content"},children:[Object(x.jsx)(pa.a.Item,{label:o("Profit"),name:"profit",children:Object(x.jsx)(za,{})}),Object(x.jsx)(pa.a.Item,{name:"profitInPercentage",label:"\u2800",children:Object(x.jsxs)(ga.a.Group,{children:[Object(x.jsx)(ga.a.Button,{value:!1,children:"#"}),Object(x.jsx)(ga.a.Button,{value:!0,children:"%"})]})})]})}),Object(x.jsx)(va.a,{span:8,children:Object(x.jsx)(pa.a.Item,{name:"price",label:o("Price"),rules:l.price,children:Object(x.jsx)(za,{})})})]}),Object(x.jsx)(Jn.a,{style:{margin:"8px 0"}}),Object(x.jsxs)(fa.a,{gutter:16,children:[Object(x.jsx)(va.a,{span:12,children:Object(x.jsx)(pa.a.Item,{name:"description",label:o("Description"),rules:l.description,children:Object(x.jsx)(Ln,{})})}),Object(x.jsx)(va.a,{span:12,children:Object(x.jsx)(pa.a.Item,{name:"comment",label:o("Comment"),rules:l.comment,children:Object(x.jsx)(Ln,{})})})]})]}),Object(x.jsx)(va.a,{span:8,children:Object(x.jsxs)(Aa.a,{title:o("Product Images"),className:"image-upload-container",size:"small",children:[Object(x.jsx)("div",{className:"preview-image-container",children:h?Object(x.jsx)("img",{src:h,alt:"preview"}):Object(x.jsxs)("span",{children:["click on ",Object(x.jsx)(Kn.a,{})," in thumbline to preview"]})}),Object(x.jsx)(pa.a.Item,{name:"images",valuePropName:"fileList",getValueFromEvent:Zn,children:Object(x.jsx)(qn.a,{multiple:!0,action:"/assets/upload?entity=product",accept:".jpg, .jpeg",name:"file",listType:"picture-card",onPreview:w,children:Object(x.jsxs)("div",{children:[Object(x.jsx)(Wa.a,{}),Object(x.jsx)("div",{style:{marginLeft:8},children:"Upload"})]})})})]})})]})}),S.isError&&Object(x.jsx)(ya.a,{message:S.message,type:"error"})]})},ar={departmentId:void 0,brandId:void 0},nr=function(e){var t=e.departmentId,a=e.brandId;return function(e){return(!t||e.departmentId===t)&&(!a||e.brandId===a)}};var rr=function(e){var t=e.location,a=e.addToast,r=Object(me.a)(["translation"]).t,c=Object(n.useMemo)((function(){return Object(u.a)(Object(u.a)({},ar),Object.fromEntries(new URLSearchParams(t.search)))}),[]),s=se(void 0,c,nr),i=s.data,o=s.total,l=s.pages,d=s.search,h=s.goto,m=s.filters,O=s.status,p=s.refresh,f=ce(),v=f.changeStatus,g=f.status,C=Object(n.useState)(!1),y=Object(j.a)(C,2),S=y[0],I=y[1],N=Object(n.useState)(void 0),w=Object(j.a)(N,2),T=w[0],P=w[1],D=Object(n.useState)(!1),k=Object(j.a)(D,2),A=k[0],E=k[1],R=Object(n.useState)(!1),_=Object(j.a)(R,2),M=_[0],F=_[1],V=Object(n.useState)(void 0),L=Object(j.a)(V,2),H=L[0],z=L[1],q=Object(n.useState)(!1),U=Object(j.a)(q,2),Y=U[0],X=U[1],W=Xe(null===H||void 0===H?void 0:H.organizationId).options,Q=function(e){var t=B("/api/brands"),a=Object(j.a)(t,3),n=a[0],r=(n=void 0===n?{data:[]}:n).data,c=a[1],s=a[2];return[r.filter((function(t){return!e||t.organizationId===e})).map((function(e){var t=e._id,a=e.title;return{value:t,text:a,label:a,departmentId:e.departmentId}})),c,s]}(null===H||void 0===H?void 0:H.organizationId),J=Object(j.a)(Q,1)[0],K=function(e){var t=B("/api/models"),a=Object(j.a)(t,3),n=a[0],r=(n=void 0===n?{data:[]}:n).data,c=a[1],s=a[2];return[r.filter((function(t){return!e||t.organizationId===e})).map((function(e){return{value:e._id,text:e.title,brandId:e.brandId}})),c,s]}(null===H||void 0===H?void 0:H.organizationId),G=Object(j.a)(K,1)[0],$=Bt(null===H||void 0===H?void 0:H.organizationId),Z=Object(j.a)($,1)[0],ee=Ht(null===H||void 0===H?void 0:H.organizationId),te={departmentOptions:W,brandOptions:J,modelOptions:G,categoryOptions:Z,subCategoryOptions:Object(j.a)(ee,1)[0],providerOptions:zt(null===H||void 0===H||H.organizationId).options},ae=function(){return F(!1)},ne=function(){return z(void 0)};Object(n.useEffect)((function(){Y||(i||[]).some((function(e){return!e.isService&&e.totalUnits<=(e.minStockThreshold||0)}))&&(a(r("You have few product with low stock"),{appearance:"warning",autoDismissTimeout:1e4}),X(!0))}),[Y,i]);var re=function(){I(!1),P(void 0)},ie=function(){E(!1),z(void 0)};return Object(n.useEffect)((function(){g.isSuccess&&p()}),[g]),Object(n.useEffect)((function(){Object(b.d)("/products",{replace:!0})}),[]),O.isLoading?Object(x.jsx)(Wt,{}):Object(x.jsxs)("div",{className:"container",children:[Object(x.jsx)("h2",{style:{display:"inline"},children:"Produtos"}),Object(x.jsxs)("span",{style:{marginLeft:16,marginRight:16},children:[r("Total"),": ",o]}),Object(x.jsxs)("div",{class:"ui action input",style:{marginLeft:16,marginRight:16},children:[Object(x.jsx)(Qt.a,{type:"text",placeholder:"Search...",onChange:function(e){d(e.target.value)},value:m.searchText}),Object(x.jsx)("button",{class:"ui icon button",onClick:function(){d("")},children:Object(x.jsx)("i",{class:"delete icon"})})]}),Object(x.jsx)(Ca.a,{defaultValue:m.values.departmentId,onChange:m.handlers.departmentId,style:{width:200,marginRight:16},placeholder:r("Department"),options:W.map((function(e){return{value:e.value,label:e.label}})),allowClear:!0,showSearch:!0}),Object(x.jsx)(Ca.a,{defaultValue:m.values.brandId,onChange:m.handlers.brandId,style:{width:200,marginRight:16},placeholder:r("Brand"),options:J.map((function(e){return{value:e.value,label:e.label}})),allowClear:!0,showSearch:!0}),Object(x.jsxs)(Ya,{type:"primary",className:"generic-create-btn",onClick:function(){return F(!0)},children:[r("Add")," ",r("Product")]}),Object(x.jsxs)(Ya,{type:"primary",className:"generic-create-btn",onClick:function(){I(!0)},children:[r("Create")," ",r("Kit")]}),Object(x.jsxs)(Ya,{type:"primary",className:"generic-create-btn",onClick:function(){return E(!0)},children:[r("Add")," ",r("Service")]}),Object(x.jsx)(Oa,{options:te,loadProducts:p,filters:m,addToast:a,products:i,showKitModal:P,setProductToEdit:z,pages:l,onPageChange:h,changeStatus:v}),(S||T)&&Object(x.jsx)(Qn,{onClose:re,afterSave:function(){re(),p()},okText:"".concat(r(T?"Update":"Add")," ").concat(r("Kit")),initialValue:T}),(M||H&&!H.isService)&&Object(x.jsx)(tr,{onClose:function(){ae(),ne()},okText:"".concat(r(H?"Update":"Add")," ").concat(r("Product")),afterSave:function(){ae(),ne(),p()},initialValue:H}),((null===H||void 0===H?void 0:H.isService)||A)&&Object(x.jsx)(zn,{okText:H?r("Update")+" "+r("Service"):r("Add")+" "+r("Service"),afterSave:function(){ie(),p()},initialValue:H,onClose:ie})]})},cr=function(e,t,a){return e&&e.length>=t&&(e.length<=a||0===a)},sr=function(e){var t=e.category,a=void 0===t?{}:t,r=e.categoryOptions,c=e.submit,s=e.addToast,i=e.componentName,o=e.loadSubcategories,l=Object(n.useState)(!1),d=Object(j.a)(l,2),u=d[0],b=d[1],h=Object(n.useState)(a.title),m=Object(j.a)(h,2),O=m[0],p=m[1],f=Object(n.useState)(!0),v=Object(j.a)(f,2),g=v[0],S=v[1],I=Object(n.useState)(a.description),w=Object(j.a)(I,2),P=w[0],D=w[1],k=Object(n.useState)(""),A=Object(j.a)(k,2),E=A[0],R=A[1],_=Object(n.useState)(!0),M=Object(j.a)(_,2),F=M[0],V=M[1],L=Object(n.useState)(!1),B=Object(j.a)(L,2),H=B[0],z=B[1],q=function(){var e=Object(y.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(F&&g&&""!==E&&!H){e.next=3;break}return e.abrupt("return");case 3:return z(!0),e.next=6,c({title:O,description:P,categoryId:E}).then((function(e){s("Subcategory ".concat(a.title?"updated":"created"," successfully"),{appearance:"success"}),p(""),D(""),R(""),Y()})).catch((function(e){s(e.message,{appearance:"error"})}));case 6:z(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),U=function(){b(!u)},Y=function(){o(),U()};return Object(x.jsxs)($t.a,{trigger:Object(x.jsx)(T.a,{className:"Edit"===i?"table-action-btn":"generic-create-btn",onClick:U,children:"Edit"===i?Object(x.jsx)(Kt.a,{name:"pencil"}):Object(x.jsx)("span",{children:i})}),closeIcon:!0,open:u,onClose:Y,children:[Object(x.jsxs)($t.a.Header,{children:[i," Subcategory"]}),Object(x.jsx)($t.a.Content,{children:Object(x.jsxs)(N.a,{name:"createDepForm",size:"large",onSubmit:q,children:[Object(x.jsx)(N.a.Input,{fluid:!0,placeholder:"Titulo",value:O,error:!g,onChange:function(e){return p(e.target.value)},onBlur:function(){return S(cr(O,3,0))}}),Object(x.jsx)(N.a.TextArea,{fluid:!0,placeholder:"Descri\xe7\xe3o",value:P,error:!F,onChange:function(e){return D(e.target.value)},onBlur:function(){return V(cr(P,5,0))}}),Object(x.jsx)(N.a.Select,{fluid:!0,label:"Category",options:r,placeholder:"Category",onChange:function(e,t){var a=t.value;return R(a)},search:!0}),Object(x.jsx)(T.a,{type:"submit",color:"teal",fluid:!0,size:"small",loading:H,primary:!0,children:"Submit"})]})})]})};sr.defaultProps={category:{}};var ir=sr;a(496);var or=function(){var e=Object(y.a)(C.a.mark((function e(t,a){var n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ra({endpoint:"/api/subcategories",type:"POST",request:t,organizationId:a});case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),lr=function(){var e=Object(y.a)(C.a.mark((function e(t,a){var n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ra({endpoint:"/api/subcategories/".concat(t),type:"PUT",request:a});case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),dr=function(){var e=Object(y.a)(C.a.mark((function e(t){var a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ra({endpoint:"/api/subcategories/".concat(t),type:"DELETE"});case 2:return a=e.sent,e.abrupt("return",a.json());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ur=function(e){var t=e.title,a=e.id,r=e.addToast,c=e.loadSubcategories,s=Object(n.useState)(!1),i=Object(j.a)(s,2),o=i[0],l=i[1],d=function(){l(!o)};return Object(x.jsxs)($t.a,{trigger:Object(x.jsx)(T.a,{className:"table-action-btn",onClick:d,children:Object(x.jsx)(Kt.a,{name:"trash"})}),open:o,closeIcon:!0,children:[Object(x.jsx)($t.a.Header,{children:"Delete a category"}),Object(x.jsxs)($t.a.Content,{children:[Object(x.jsxs)("h4",{children:["Are you sure you want to delete category ",'"'.concat(t,'"'),"?"]}),Object(x.jsxs)(T.a,{color:"red",inverted:!0,onClick:function(){dr(a).then((function(e){r("Subcategory deleted successfully",{appearance:"success"})})).catch((function(e){""!==e.message?r("Could not delete subcategory: "+e.message,{appearance:"error"}):r("Something went wrong",{appearance:"error"})})).finally((function(){d(),c()}))},children:[Object(x.jsx)(Kt.a,{name:"remove"})," Delete"]}),Object(x.jsxs)(T.a,{color:"blue",inverted:!0,onClick:d,children:[Object(x.jsx)(Kt.a,{name:"checkmark"})," Cancel"]})]})]})},jr=function(e){Object(Na.a)(a,e);var t=Object(wa.a)(a);function a(e){var n;return Object(A.a)(this,a),(n=t.call(this,e)).createSubcategoryRow=function(e){return Object(x.jsxs)(Jt.a.Row,{children:[Object(x.jsx)(Jt.a.Cell,{children:Object(x.jsx)(ir,{category:e,componentName:"Edit",addToast:n.props.addToast,categoryOptions:n.props.categoryOptions,loadSubcategories:n.props.loadSubcategories,submit:function(t){return lr(e._id,t)}})}),Object(x.jsx)(Jt.a.Cell,{children:Object(x.jsx)(ur,{addToast:n.props.addToast,id:e._id,title:e.title,loadSubcategories:n.props.loadSubcategories})}),Object(x.jsx)(Jt.a.Cell,{children:e._id}),Object(x.jsx)(Jt.a.Cell,{children:e.title}),Object(x.jsx)(Jt.a.Cell,{children:e.category.title}),Object(x.jsx)(Jt.a.Cell,{children:e.description})]},e._id)},n.handlePaginationClick=function(e){n.props.updatePageFilter({page:e})},n.createSubcategoryRow=n.createSubcategoryRow.bind(Object(Ia.a)(n)),n.handlePaginationClick=n.handlePaginationClick.bind(Object(Ia.a)(n)),n}return Object(E.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.pages,n=t.filters,r=t.onPageChange;return Object(x.jsxs)(Jt.a,{celled:!0,children:[Object(x.jsx)(Jt.a.Header,{children:Object(x.jsxs)(Jt.a.Row,{children:[Object(x.jsx)(Jt.a.HeaderCell,{colspan:2,rowspan:2,children:"Actions"}),Object(x.jsx)(Jt.a.HeaderCell,{children:"ID"}),Object(x.jsx)(Jt.a.HeaderCell,{children:"Titulo"}),Object(x.jsx)(Jt.a.HeaderCell,{children:"Category"}),Object(x.jsx)(Jt.a.HeaderCell,{children:"Descri\xe7\xe3o"})]})}),Object(x.jsx)(Jt.a.Body,{children:this.props.subcategories.map((function(t){return e.createSubcategoryRow(t)}))}),Object(x.jsx)(Jt.a.Footer,{children:Object(x.jsx)(Jt.a.Row,{children:Object(x.jsx)(Jt.a.HeaderCell,{colSpan:"20",style:{textAlign:"right"},children:Object(x.jsx)(Gt.a,{activePage:n.currentPage,totalPages:a,onPageChange:function(e,t){var a=t.activePage;return r(a)}})})})})]})}}]),a}(n.Component);var br=function(e){var t=Z("/api/subcategories","*"),a=Object(j.a)(t,8),r=a[0],c=a[1],s=c.total,i=c.pages,o=a[2],l=a[3],d=(a[4],a[5]),u=(a[6],a[7]),b=B("/api/categories"),h=Object(j.a)(b,1)[0],m=(h=void 0===h?{data:[]}:h).data,O=Object(n.useContext)(D),p=m.map((function(e){return{value:e._id,text:e.title}}));return Object(x.jsxs)("div",{className:"categories-container container",children:[Object(x.jsx)("h2",{children:"Subcategories"}),Object(x.jsx)(ir,{componentName:"Create",categoryOptions:p,addToast:e.addToast,loadSubcategories:u,submit:function(e){return or(e,O)}}),Object(x.jsxs)("div",{children:[Object(x.jsxs)("span",{children:["Total subcategories: ",s]}),Object(x.jsxs)("div",{class:"ui action input",style:{marginLeft:16},children:[Object(x.jsx)(Qt.a,{type:"text",placeholder:"Search...",onChange:function(e){o(e.target.value)},value:d.searchText}),Object(x.jsx)("button",{class:"ui icon button",onClick:function(){o("")},children:Object(x.jsx)("i",{class:"delete icon"})})]})]}),Object(x.jsx)(jr,{addToast:e.addToast,categoryOptions:p,subcategories:r,filters:d,loadSubcategories:u,onPageChange:l,pages:i})]})},hr=(a(937),function(e){var t=e.category,a=void 0===t?{}:t,r=e.departmentOptions,c=e.submit,s=e.addToast,i=e.componentName,o=e.loadCategories,l=Object(n.useState)(!1),d=Object(j.a)(l,2),u=d[0],b=d[1],h=Object(n.useState)(a.title),m=Object(j.a)(h,2),O=m[0],p=m[1],f=Object(n.useState)(!0),v=Object(j.a)(f,2),g=v[0],S=v[1],I=Object(n.useState)(a.description),w=Object(j.a)(I,2),P=w[0],D=w[1],k=Object(n.useState)(a.departmentId),A=Object(j.a)(k,2),E=A[0],R=A[1],_=Object(n.useState)(!0),M=Object(j.a)(_,2),F=M[0],V=M[1],L=Object(n.useState)(!1),B=Object(j.a)(L,2),H=B[0],z=B[1],q=function(){var e=Object(y.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(F&&g&&""!==E&&!H){e.next=3;break}return e.abrupt("return");case 3:return z(!0),e.next=6,c({title:O,description:P,departmentId:E}).then((function(e){s("Category ".concat(a.title?"updated":"created"," successfully"),{appearance:"success"}),p(""),D(""),R("")})).catch((function(e){s(e.message,{appearance:"error"})}));case 6:z(!1),Y();case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),U=function(){b(!u)},Y=function(){o(),U()};return Object(x.jsxs)($t.a,{trigger:Object(x.jsx)(T.a,{className:"Edit"===i?"table-action-btn":"generic-create-btn",onClick:U,children:"Edit"===i?Object(x.jsx)(Kt.a,{name:"pencil"}):Object(x.jsx)("span",{children:i})}),closeIcon:!0,open:u,onClose:Y,children:[Object(x.jsxs)($t.a.Header,{children:[i," a category"]}),Object(x.jsx)($t.a.Content,{children:Object(x.jsxs)(N.a,{name:"createDepForm",size:"large",onSubmit:q,children:[Object(x.jsx)(N.a.Input,{fluid:!0,placeholder:"Titulo",value:O,error:!g,onChange:function(e){return p(e.target.value)},onBlur:function(){return S(cr(O,3,0))}}),Object(x.jsx)(N.a.TextArea,{fluid:!0,placeholder:"Descri\xe7\xe3o",value:P,error:!F,onChange:function(e){return D(e.target.value)},onBlur:function(){return V(cr(P,5,0))}}),Object(x.jsx)(N.a.Select,{fluid:!0,label:"Departamento",options:r,placeholder:"Departamento",onChange:function(e,t){var a=t.value;return R(a)},value:E}),Object(x.jsx)(T.a,{type:"submit",color:"teal",fluid:!0,loading:H,primary:!0,children:"Submit"})]})})]})});hr.defaultProps={department:{}};var mr=hr,Or=function(){var e=Object(y.a)(C.a.mark((function e(t,a){var n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ra({endpoint:"/api/categories",type:"POST",request:t,organizationId:a});case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),pr=function(){var e=Object(y.a)(C.a.mark((function e(t,a){var n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ra({endpoint:"/api/categories/".concat(t),type:"PUT",request:a});case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),xr=function(){var e=Object(y.a)(C.a.mark((function e(t){var a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ra({endpoint:"/api/categories/".concat(t),type:"DELETE"});case 2:return a=e.sent,e.abrupt("return",a.json());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),fr=(a(938),function(e){var t=e.title,a=e.id,r=e.addToast,c=e.loadCategories,s=Object(n.useState)(!1),i=Object(j.a)(s,2),o=i[0],l=i[1],d=function(){l(!o)};return Object(x.jsxs)($t.a,{trigger:Object(x.jsx)(T.a,{className:"cat-delete-btn cat-btn",onClick:d,children:Object(x.jsx)(Kt.a,{name:"trash"})}),open:o,closeIcon:!0,children:[Object(x.jsx)($t.a.Header,{children:"Delete a category"}),Object(x.jsxs)($t.a.Content,{children:[Object(x.jsxs)("h4",{children:["Are you sure you want to delete category ",'"'.concat(t,'"'),"?"]}),Object(x.jsxs)(T.a,{color:"red",inverted:!0,onClick:function(){xr(a).then((function(e){r("Category deleted successfully",{appearance:"success"})})).catch((function(e){""!==e.message?r("Could not delete category: "+e.message,{appearance:"error"}):r("Something went wrong",{appearance:"error"})})).finally((function(){d(),c()}))},children:[Object(x.jsx)(Kt.a,{name:"remove"})," Delete"]}),Object(x.jsxs)(T.a,{color:"blue",inverted:!0,onClick:d,children:[Object(x.jsx)(Kt.a,{name:"checkmark"})," Cancel"]})]})]})}),vr=function(e){Object(Na.a)(a,e);var t=Object(wa.a)(a);function a(e){var n;return Object(A.a)(this,a),(n=t.call(this,e)).createCategoryRow=function(e){return Object(x.jsxs)(Jt.a.Row,{children:[Object(x.jsx)(Jt.a.Cell,{children:Object(x.jsx)(mr,{category:e,componentName:"Edit",addToast:n.props.addToast,departmentOptions:n.props.departmentOptions,loadCategories:n.props.loadCategories,submit:function(t){return pr(e._id,t)}})}),Object(x.jsx)(Jt.a.Cell,{children:Object(x.jsx)(fr,{addToast:n.props.addToast,id:e._id,title:e.title,loadCategories:n.props.loadCategories})}),Object(x.jsx)(Jt.a.Cell,{children:e._id}),Object(x.jsx)(Jt.a.Cell,{children:e.title}),Object(x.jsx)(Jt.a.Cell,{children:e.department?e.department.title:""}),Object(x.jsx)(Jt.a.Cell,{children:e.description})]},e._id)},n.handlePaginationClick=function(e){n.props.updatePageFilter({page:e})},n.createCategoryRow=n.createCategoryRow.bind(Object(Ia.a)(n)),n.handlePaginationClick=n.handlePaginationClick.bind(Object(Ia.a)(n)),n}return Object(E.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.pages,n=t.onPageChange,r=t.filters;return Object(x.jsxs)(Jt.a,{celled:!0,children:[Object(x.jsx)(Jt.a.Header,{children:Object(x.jsxs)(Jt.a.Row,{children:[Object(x.jsx)(Jt.a.HeaderCell,{colspan:2,rowspan:2,children:"Actions"}),Object(x.jsx)(Jt.a.HeaderCell,{children:"ID"}),Object(x.jsx)(Jt.a.HeaderCell,{children:"Titulo"}),Object(x.jsx)(Jt.a.HeaderCell,{children:"Departamento"}),Object(x.jsx)(Jt.a.HeaderCell,{children:"Descri\xe7\xe3o"})]})}),Object(x.jsx)(Jt.a.Body,{children:this.props.categories.map((function(t){return e.createCategoryRow(t)}))}),Object(x.jsx)(Jt.a.Footer,{children:Object(x.jsx)(Jt.a.Row,{children:Object(x.jsx)(Jt.a.HeaderCell,{colSpan:"20",style:{textAlign:"right"},children:Object(x.jsx)(Gt.a,{activePage:r.currentPage,totalPages:a,onPageChange:function(e,t){var a=t.activePage;return n(a)}})})})})]})}}]),a}(n.Component);a(939);var gr=function(e){var t=Le(),a=t.data,r=t.total,c=t.pages,s=t.search,i=t.goto,o=t.filters,l=t.refresh,d=B("/api/departments","*"),u=Object(j.a)(d,8)[0],b=(u=void 0===u?{data:[]}:u).data,h=Object(n.useContext)(D),m=b.map((function(e){return{value:e._id,text:e.title}}));return Object(x.jsxs)("div",{className:"categories-container container",children:[Object(x.jsx)("h2",{children:"Categories"}),Object(x.jsx)(mr,{componentName:"Create",departmentOptions:m,addToast:e.addToast,loadCategories:l,submit:function(e){return Or(e,h)}}),Object(x.jsxs)("div",{children:[Object(x.jsxs)("strong",{children:["Total categories: ",r]}),Object(x.jsxs)("div",{class:"ui action input",style:{marginLeft:16},children:[Object(x.jsx)(Qt.a,{type:"text",placeholder:"Search...",onChange:function(e){return s(e.target.value)},value:o.searchText}),Object(x.jsx)("button",{class:"ui icon button",onClick:function(){return s("")},children:Object(x.jsx)("i",{class:"delete icon"})})]})]}),Object(x.jsx)(vr,{addToast:e.addToast,departmentOptions:m,categories:a,loadCategories:l,onPageChange:i,filters:o,pages:c})]})},Cr=a(992),yr={required:!0},Sr={pattern:"[0-9]+",message:"only digits allowed"},Ir=function(e){var t=e.target.value.slice(0,6);return/^([0-9]{1,5}|[0-9]{1,4}([-]{1}[0-9]{0,1})?)$/.test(t)?t.length>4&&!t.endsWith("-")?t.substr(0,4)+"-"+t.substr(-1):t:""},Nr=function(e){var t=e.target.value.slice(0,10);return/^([0-9]{1,9}|[0-9]{1,8}([-]{1}[0-9]{0,1})?)$/.test(t)?t.length>8&&!t.endsWith("-")?t.substr(0,8)+"-"+t.substr(-1):t:""},wr={agencyNo:[yr,{pattern:"^[0-9]{4}(-[0-9]{1})?$",message:"Should be XXXX or XXXX-X"},{max:6}],no:[yr,Sr,{max:6}],accountNo:[yr,{pattern:"^[0-9]{8}(-[0-9]{1})?$",message:"Should be XXXXXXXX or XXXXXXXX-X"},{max:10}],date:[yr],holder:[yr],to:[yr],destinationName:[yr],destinationBank:[Sr,{max:4}],destinationDate:[yr],depositMode:[yr],amount:[yr]},Tr={depositMode:"cash",accountType:"personal",frontImage:[],backImage:[]},Pr=function(e){return{url:e,name:e,status:"done",uid:e}},Dr=function(e){var t,a,n,r=e.file;if("removed"===r.status)return[];(null===r||void 0===r||null===(t=r.response)||void 0===t?void 0:t.message)&&(r.uid=null===r||void 0===r||null===(a=r.response)||void 0===a?void 0:a.message,r.url=null===r||void 0===r||null===(n=r.response)||void 0===n?void 0:n.message);return[r]};var kr=function(e){var t=e.onClose,a=e.okText,r=e.okButtonProps,c=e.onSave,s=e.initialValues,i=Object(me.a)(["translation"]).t,o=pa.a.useForm(),l=Object(j.a)(o,1)[0],d=Object(n.useMemo)((function(){return tt(i,wr)}),[i]),b=s?Object(u.a)(Object(u.a)({},s),{},{date:U()(1e3*s.date),destinationDate:U()(1e3*s.destinationDate),frontImage:s.frontImageUrl?[Pr(s.frontImageUrl)]:[],backImage:s.backImageUrl?[Pr(s.backImageUrl)]:[]}):Tr;return Object(x.jsx)(ln.a,{children:Object(x.jsx)(lt.a,{title:a,onClose:t,visible:!0,okText:a,okButtonProps:Object(u.a)({form:"cheque-add-modal",htmlType:"submit"},r),onCancel:t,width:800,maskClosable:!1,keyboard:!1,children:Object(x.jsxs)(pa.a,{layout:"vertical",id:"cheque-add-modal",form:l,initialValues:b,onFinish:function(e){var t,a;c(Object(u.a)(Object(u.a)(Object(u.a)({},s),e),{},{date:e.date.unix(),destinationDate:e.destinationDate.unix(),frontImageUrl:null===(t=e.frontImage[0])||void 0===t?void 0:t.uid,backImageUrl:null===(a=e.backImage[0])||void 0===a?void 0:a.uid}))},children:[Object(x.jsxs)(fa.a,{gutter:16,children:[Object(x.jsx)(va.a,{span:6,children:Object(x.jsx)(pa.a.Item,{label:i("Cheque No"),name:"no",rules:d.no,children:Object(x.jsx)(xa.a,{})})}),Object(x.jsx)(va.a,{span:6,children:Object(x.jsx)(pa.a.Item,{label:i("Agency No"),name:"agencyNo",getValueFromEvent:Ir,rules:d.agencyNo,children:Object(x.jsx)(xa.a,{})})}),Object(x.jsx)(va.a,{span:6,children:Object(x.jsx)(pa.a.Item,{label:i("Account No"),name:"accountNo",rules:d.accountNo,getValueFromEvent:Nr,children:Object(x.jsx)(xa.a,{})})}),Object(x.jsx)(va.a,{span:6,children:Object(x.jsx)(pa.a.Item,{label:i("Cheque Date"),name:"date",rules:d.date,children:Object(x.jsx)(Cr.a,{style:{width:"100%"}})})})]}),Object(x.jsxs)(fa.a,{gutter:16,children:[Object(x.jsx)(va.a,{span:8,children:Object(x.jsx)(pa.a.Item,{label:i("Amount"),name:"amount",rules:d.amount,trigger:"onValueChange",getValueFromEvent:function(e){return e.floatValue},children:Object(x.jsx)(Sa.a,{customInput:xa.a,thousandSeparator:".",decimalSeparator:","})})}),Object(x.jsx)(va.a,{span:8,children:Object(x.jsx)(pa.a.Item,{label:i("Holder"),name:"holder",rules:d.holder,children:Object(x.jsx)(xa.a,{})})}),Object(x.jsx)(va.a,{span:8,children:Object(x.jsx)(pa.a.Item,{label:i("To"),name:"to",rules:d.to,children:Object(x.jsx)(xa.a,{})})})]}),Object(x.jsxs)(fa.a,{gutter:16,children:[Object(x.jsx)(va.a,{span:8,children:Object(x.jsx)(pa.a.Item,{label:i("Destination Bank Number"),name:"destinationBank",rules:d.destinationBank,children:Object(x.jsx)(xa.a,{})})}),Object(x.jsx)(va.a,{span:8,children:Object(x.jsx)(pa.a.Item,{label:i("Destination Name (Beneficiary)"),name:"destinationName",rules:d.destinationName,children:Object(x.jsx)(xa.a,{})})}),Object(x.jsx)(va.a,{span:8,children:Object(x.jsx)(pa.a.Item,{label:i("Destination Date"),name:"destinationDate",rules:d.destinationDate,children:Object(x.jsx)(Cr.a,{style:{width:"100%"}})})})]}),Object(x.jsxs)(fa.a,{children:[Object(x.jsx)(va.a,{span:12,children:Object(x.jsx)(pa.a.Item,{name:"depositMode",rules:d.depositMode,children:Object(x.jsxs)(ga.a.Group,{children:[Object(x.jsx)(ga.a,{value:"cash",children:i("Cash")}),Object(x.jsx)(ga.a,{value:"deposit",children:i("Deposit")})]})})}),Object(x.jsx)(va.a,{span:12,children:Object(x.jsx)(pa.a.Item,{name:"accountType",children:Object(x.jsxs)(ga.a.Group,{children:[Object(x.jsx)(ga.a,{value:"personal",children:i("Personal")}),Object(x.jsx)(ga.a,{value:"business",children:i("Business")})]})})})]}),Object(x.jsxs)(fa.a,{children:[Object(x.jsx)(va.a,{span:12,children:Object(x.jsx)(pa.a.Item,{label:i("Front Image"),name:"frontImage",rules:d.frontImageUrl,getValueFromEvent:Dr,valuePropName:"fileList",shouldUpdate:!0,help:i("only images (jpeg, png etc..) allowed"),children:Object(x.jsx)(qn.a,{action:"/assets/upload?entity=cheque",accept:"image/*",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))},listType:"picture-card",children:i("upload")})})}),Object(x.jsx)(va.a,{span:12,children:Object(x.jsx)(pa.a.Item,{label:i("Back Image"),name:"backImage",rules:d.backImageUrl,getValueFromEvent:Dr,valuePropName:"fileList",shouldUpdate:!0,help:i("only images (jpeg, png etc..) allowed"),children:Object(x.jsx)(qn.a,{action:"/assets/upload?entity=cheque",accept:"image/*",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))},listType:"picture-card",children:i("upload")})})})]})]})})})};var Ar=function(e){var t=e.urls,a=e.onClose,r=Object(n.useState)(t[0]),c=Object(j.a)(r,2),s=c[0],i=c[1];return Object(x.jsx)(lt.a,{visible:!0,onCancel:a,footer:null,width:1e3,children:Object(x.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"80px auto",height:450},children:[Object(x.jsx)("div",{style:{textAlign:"center",borderRight:"1px solid #aaa",paddingRight:16},children:t.map((function(e){return Object(x.jsx)("div",{style:{borderWidth:s===e?3:0,borderStyle:"solid",marginBottom:16,borderColor:"teal"},children:Object(x.jsx)("img",{style:{maxWidth:"100%",height:60,objectFit:"contain"},src:e,onClick:function(){return i(e)}},e)})}))}),Object(x.jsx)("div",{style:{display:"flex",alignItems:"center",minHeight:0,justifyContent:"center",padding:16},children:Object(x.jsx)("img",{style:{maxWidth:"100%",maxHeight:"100%",objectFit:"contain"},src:s})})]})})},Er=a(1006),Rr=new Intl.NumberFormat("pt-BR",{maximumFractionDigits:2,minimumFractionDigits:2}),_r=["teal","blue","orange"];function Mr(e){var t=e.cheques;return Object(x.jsx)("ul",{children:t.map((function(e,t){return Object(x.jsxs)("li",{style:{fontSize:10,whiteSpace:"nowrap",textOverflow:"ellipsis"},children:[Object(x.jsx)("i",{style:{color:_r[t%_r.length],marginRight:4},children:"\u29bf"}),e.no," (",e.status,") (",Rr.format(e.amount),")"]},e._id)}))})}var Fr=function(e){var t=e.cheques,a=e.onClose,n=t.reduce((function(e,t){var a=U()(1e3*t.date).format("DD/MM/YYYY"),n=U()(1e3*t.destinationDate).format("DD/MM/YYYY"),r=e[a]||[],c=e[n]||[];return r.push(t),c.push(t),e[a]=r,e[n]=c,e}),{}),r=t.reduce((function(e,t){var a=U()(1e3*t.date).format("MM/YYYY"),n=U()(1e3*t.destinationDate).format("MM/YYYY"),r=e[a]||[],c=e[n]||[];return r.push(t),c.push(t),e[a]=r,e[n]=c,e}),{});return Object(x.jsxs)(lt.a,{visible:!0,onCancel:a,width:"95%",bodyStyle:{height:"80vh",overflowY:"auto"},footer:null,children:[Object(x.jsx)(Er.a,{fullscreen:!0,dateCellRender:function(e){var t=n[e.format("DD/MM/YYYY")];return t?Object(x.jsx)(Mr,{cheques:t}):null},monthCellRender:function(e){var t=r[e.format("MM/YYYY")];return t?Object(x.jsx)(Mr,{cheques:t}):null}}),","]})},Vr={new:"teal",canceled:"orange",good:"blue",compensated:void 0,other:void 0,returned:void 0},Lr=[{value:"new",text:"New"},{value:"good",text:"Good"},{value:"compensated",text:"Compensate"},{value:"canceled",text:"Cancel",confirm:!0},{value:"returned",text:"Return"},{value:"other",text:"Other",confirmWithComment:!0}],Br={SUCCESS:function(e,t){return"".concat(e," ").concat(t).concat(t.endsWith("e")?"":"e","d successfully!")},ERROR:function(e,t){return"status change"===t?"failed to change status of ".concat(e):"failed to ".concat(t," ").concat(e)}};var Hr=function(e){var t=e.addToast,a=Object(me.a)(["translation"]).t,r=function(){var e=Object(n.useContext)(D);return Z("/api/cheques?organizationId=".concat(e||""),"*")}(),c=Object(j.a)(r,8),s=c[0],i=c[1],o=i.total,l=i.pages,d=c[2],b=c[3],h=c[4],m=c[5],O=c[6],p=c[7],f=function(){var e=Object(n.useState)([]),t=Object(j.a)(e,2),a=Object(j.a)(t[0],3),r=a[0],c=a[1],s=a[2],i=t[1],o=Object(n.useMemo)((function(){return"add"===s&&c?["/api/cheques",{method:"POST",body:JSON.stringify(c)}]:"update"===s&&r&&c?["/api/cheques/".concat(r),{method:"PUT",body:JSON.stringify(c)}]:"delete"===s&&r?["/api/cheques/".concat(r),{method:"DELETE"}]:"status change"===s&&r&&c?["/api/cheques/".concat(r,"/status"),{method:"POST",body:JSON.stringify(c)}]:[void 0,void 0]}),[c,s,r]),l=B.apply(void 0,Object(H.a)(o)),d=Object(j.a)(l,2)[1];return s&&(d.action=s,d.message=Br[d.code]?Br[d.code]("cheque",s):""),{add:function(e){return i([void 0,e,"add"])},edit:function(e,t){return i([t,e,"update"])},del:function(e){return i([e,void 0,"delete"])},reset:function(){return i([])},changeStatus:function(e,t){return i([t,e,"status change"])},status:d}}(),v=f.add,g=f.edit,C=f.del,y=f.changeStatus,S=f.reset,I=f.status,N=Object(n.useState)(!1),w=Object(j.a)(N,2),P=w[0],k=w[1],A=Object(n.useState)(!1),E=Object(j.a)(A,2),R=E[0],_=E[1],M=Object(n.useState)(),F=Object(j.a)(M,2),V=F[0],L=F[1],z=Object(n.useState)(),q=Object(j.a)(z,2),Y=q[0],X=q[1],W=Object(n.useState)(),Q=Object(j.a)(W,2),J=Q[0],K=Q[1],G=function(){return k(!1)},$=function(){return L(void 0)},ee=function(e){return function(){return L(e)}},te=function(){return X(void 0)},ae=function(e,t){b(t.activePage)},ne=function(e){return function(t,a){y({status:a.value,comment:a.comment},e)}};Object(n.useEffect)((function(){(I.isError||I.isSuccess)&&(t(I.message,{appearance:I.toString().toLowerCase()}),I.isSuccess&&(G(),$(),te(),p()))}),[I]),Object(n.useEffect)((function(){!P&&"add"===I.action&&I.isSuccess&&S()}),[P,I.action,I.isSuccess]);var re=Object(n.useMemo)((function(){return Lr.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{text:a(e.text)})}))}),[a]);return Object(x.jsxs)("div",{className:"container",children:[Object(x.jsx)("h2",{children:a("Cheques")}),Object(x.jsxs)("div",{className:"list-actions",children:[Object(x.jsxs)("span",{children:[a("Total"),": ",o]}),Object(x.jsx)("div",{style:{marginLeft:16,marginRight:16},children:Object(x.jsx)(Qt.a,{type:"text",placeholder:a("Search"),onChange:function(e){return d(e.target.value)},value:m.searchText,icon:Object(x.jsx)(Kt.a,{name:"delete",onClick:function(){return d("")},circular:!0,link:!0})})}),Object(x.jsx)(T.a,{onClick:function(){return _(!0)},icon:"calendar alternate outline"}),Object(x.jsxs)(Ya,{type:"primary",className:"generic-create-btn",onClick:function(){return k(!0)},children:[a("Add")," ",a("Cheque")]})]}),Object(x.jsx)(Fa,{status:O,children:function(){return Object(x.jsxs)(Jt.a,{sortable:!0,children:[Object(x.jsx)(Jt.a.Header,{children:Object(x.jsxs)(Jt.a.Row,{children:[Object(x.jsx)(Jt.a.HeaderCell,{children:a("Actions")}),Object(x.jsx)(Jt.a.HeaderCell,{children:a("Status")}),Object(x.jsx)(Jt.a.HeaderCell,{children:a("Cheque No")}),Object(x.jsx)(Jt.a.HeaderCell,{sorted:"date"===m.sort.by?m.sort.direction:null,onClick:function(){return h("date","descending"===m.sort.direction?"ascending":"descending")},children:a("Cheque Date")}),Object(x.jsx)(Jt.a.HeaderCell,{children:a("Agency No")}),Object(x.jsx)(Jt.a.HeaderCell,{children:a("Account No")}),Object(x.jsx)(Jt.a.HeaderCell,{sorted:"holder"===m.sort.by?m.sort.direction:null,onClick:function(){return h("holder","descending"===m.sort.direction?"ascending":"descending")},children:a("Holder")}),Object(x.jsx)(Jt.a.HeaderCell,{children:a("To")}),Object(x.jsx)(Jt.a.HeaderCell,{children:a("Amount")}),Object(x.jsx)(Jt.a.HeaderCell,{children:a("Destination")}),Object(x.jsx)(Jt.a.HeaderCell,{children:a("Images")})]})}),Object(x.jsx)(Jt.a.Body,{children:s.map((function(e){return Object(x.jsxs)(Jt.a.Row,{children:[Object(x.jsxs)(Jt.a.Cell,{children:[Object(x.jsx)(T.a,{icon:"edit",basic:!0,onClick:ee(e),size:"mini"}),Object(x.jsx)(T.a,{icon:"trash alternate",negative:!0,basic:!0,onClick:(t=e._id,function(){return X(t)}),size:"mini"})]}),Object(x.jsxs)(Jt.a.Cell,{style:{width:160},children:[Object(x.jsx)(ja,{options:re,onChange:ne(e._id),defaultValue:e.status,color:Vr[e.status],size:"mini",basic:!0,children:e.status.toUpperCase()}),"other"===e.status&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("br",{}),Object(x.jsx)("br",{}),Object(x.jsxs)("strong",{children:[a("Comment"),": "]}),e.comment]})]}),Object(x.jsx)(Jt.a.Cell,{children:e.no}),Object(x.jsx)(Jt.a.Cell,{children:U()(1e3*e.date).format("DD/MM/YYYY")}),Object(x.jsx)(Jt.a.Cell,{children:e.agencyNo}),Object(x.jsx)(Jt.a.Cell,{children:e.accountNo}),Object(x.jsx)(Jt.a.Cell,{children:e.holder}),Object(x.jsx)(Jt.a.Cell,{children:e.to}),Object(x.jsx)(Jt.a.Cell,{children:We.format(e.amount)}),Object(x.jsxs)(Jt.a.Cell,{children:[Object(x.jsx)(Kt.a,{name:"user outline"}),e.destinationName,Object(x.jsx)("br",{}),Object(x.jsx)(Kt.a,{name:"building outline"}),e.destinationBank,Object(x.jsx)("br",{}),Object(x.jsx)(Kt.a,{name:"calendar alternate outline"}),U()(1e3*e.destinationDate).format("DD/MM/YYYY")]}),Object(x.jsx)(Jt.a.Cell,{children:(e.frontImageUrl||e.backImageUrl)&&Object(x.jsx)(T.a,{basic:!0,icon:"images outline",size:"mini",onClick:function(){return K([e.frontImageUrl,e.backImageUrl])}})})]},e._id);var t}))}),Object(x.jsx)(Jt.a.Footer,{children:Object(x.jsx)(Jt.a.Row,{children:Object(x.jsx)(Jt.a.HeaderCell,{colSpan:"20",style:{textAlign:"right"},children:Object(x.jsx)(Gt.a,{activePage:m.currentPage,totalPages:l,onPageChange:ae})})})})]})}}),P&&Object(x.jsx)(kr,{onSave:v,okText:"Add Cheque",okButtonProps:{disabled:I.isLoading},onClose:G}),V&&Object(x.jsx)(kr,{onSave:function(e){return g(e,V._id)},onClose:$,initialValues:V,okButtonProps:{disabled:I.isLoading},okText:"Update Cheque"}),Y&&Object(x.jsx)(ua.a,{open:!0,content:"Are you sure you want to DELETE this cheque ?",onCancel:te,onConfirm:function(){return C(Y)},cancelButton:"No",confirmButton:"Yes, Delete"}),J&&Object(x.jsx)(Ar,{urls:J,onClose:function(){return K(void 0)}}),R&&Object(x.jsx)(Fr,{cheques:s,onClose:function(){return _(!1)}})]})},zr={daily:__("Daily"),weekly:__("Weekly"),biweekly:__("Bi-Weekly"),monthly:__("Monthly"),custom:__("Custom")},qr=jt(zr),Ur=Object.entries(zr).map((function(e){var t=Object(j.a)(e,2);return{value:t[0],label:t[1]}})),Yr={utility:__("Utility"),salary:__("Salary"),rent:__("Rent"),purchase:__("Purchase")},Xr=jt(Yr),Wr=Object.entries(Yr).map((function(e){var t=Object(j.a)(e,2);return{value:t[0],label:t[1]}})),Qr=xa.a.TextArea,Jr={required:!0},Kr={name:[Jr],type:[Jr],frequency:[Jr],issueDate:[Jr],dueDate:[Jr],moneySource:[Jr],paymentMethod:[Jr],amount:[Jr],lateFee:[Jr],receiptUrl:[Jr],invoiceUrl:[Jr],numTimes:[{min:1,type:"number"}],fixedAmount:[Jr,{min:1,type:"number"}],variableAmount:[{min:1,type:"number"}]},Gr={frequency:zr.monthly,type:"utility",receipt:[],invoice:[],fixed:!0,chequeIds:[]},$r=function(e){return{url:e,name:e,status:"done",uid:e}};var Zr=function(e){var t=e.onClose,a=e.okText,n=e.okButtonProps,r=e.onSave,c=e.initialValues,s=Object(me.a)(["translation"]).t,i=pa.a.useForm(),o=Object(j.a)(i,1)[0],l=function(e){var t=B("/api/departments-with-profits"),a=Object(j.a)(t,3),n=a[0],r=void 0===n?[]:n,c=a[1],s=a[2];return[r.filter((function(t){return!e||t.organizationId===e})),c,s]}(null===c||void 0===c?void 0:c.organizationId),d=Object(j.a)(l,2),b=d[0],h=void 0===b?[]:b,m=d[1],O=c?Object(u.a)(Object(u.a)({},c),{},{amount:c.amount,lateFee:c.lateFee||0,issueDate:c.issueDate?U()(1e3*c.issueDate):void 0,dueDate:c.dueDate?U()(1e3*c.dueDate):void 0,receipts:(c.receipts||[]).map((function(e){var t=e.url;return $r(t)})),invoices:(c.invoices||[]).map((function(e){var t=e.url;return $r(t)}))}):Gr,p=h.filter((function(e){return e.profit>0})).map((function(e){return{label:"".concat(e.title," (").concat(We.format(e.profit),")"),value:e._id}}));return Object(x.jsx)(ln.a,{componentSize:"middle",children:Object(x.jsx)(lt.a,{title:a,onClose:t,visible:!0,okText:a,okButtonProps:Object(u.a)({form:"expense-add-modal",htmlType:"submit"},n),onCancel:t,width:1024,maskClosable:!1,keyboard:!1,children:Object(x.jsxs)(pa.a,{layout:"vertical",id:"expense-add-modal",form:o,initialValues:O,onFinish:function(e){r(Object(u.a)(Object(u.a)({},e),{},{numTimes:Number(e.numTimes),moneySourceId:e.moneySourceId||void 0,issueDate:e.issueDate.unix(),dueDate:e.dueDate.unix(),amount:e.amount,lateFee:e.lateFee}))},children:[Object(x.jsxs)(fa.a,{gutter:16,children:[Object(x.jsx)(va.a,{span:6,children:Object(x.jsx)(pa.a.Item,{label:s("Title"),name:"name",rules:Kr.name,children:Object(x.jsx)(xa.a,{})})}),Object(x.jsx)(va.a,{span:4,children:Object(x.jsx)(pa.a.Item,{label:s("Type"),name:"type",rules:Kr.type,children:Object(x.jsx)(_n,{options:Wr})})}),Object(x.jsx)(va.a,{children:Object(x.jsx)(pa.a.Item,{label:s("Frequency"),name:"frequency",rules:Kr.frequency,children:Object(x.jsx)(ga.a.Group,{options:Ur})})}),Object(x.jsx)(va.a,{span:4,children:Object(x.jsx)(pa.a.Item,{noStyle:!0,shouldUpdate:!0,children:function(e){var t=e.getFieldValue;return Object(x.jsx)(pa.a.Item,{label:"\u2800",name:"numTimes",rules:Kr.numTimes,trigger:"onValueChange",getValueFromEvent:function(e){return e.floatValue},children:Object(x.jsx)(Sa.a,{customInput:function(e){return Object(x.jsx)(xa.a,Object(u.a)(Object(u.a)({},e),{},{suffix:"times"}))},thousandSeparator:".",decimalSeparator:",",disabled:"custom"!==t("frequency")})})}})})]}),Object(x.jsxs)(fa.a,{gutter:16,children:[Object(x.jsx)(va.a,{span:9,children:Object(x.jsx)(pa.a.Item,{label:s("Source of Money"),name:"moneySourceId",children:Object(x.jsx)(_n,{options:p,loading:m.isLoading,allowClear:!0})})}),Object(x.jsx)(va.a,{span:5,children:Object(x.jsx)(pa.a.Item,{label:s("Issue Date"),name:"issueDate",rules:Kr.issueDate,children:Object(x.jsx)(Cr.a,{style:{width:"100%"}})})}),Object(x.jsx)(va.a,{span:5,children:Object(x.jsx)(pa.a.Item,{label:s("Due Date"),name:"dueDate",rules:Kr.dueDate,children:Object(x.jsx)(Cr.a,{style:{width:"100%"}})})}),Object(x.jsx)(va.a,{span:5,children:Object(x.jsx)(pa.a.Item,{noStyle:!0,shouldUpdate:!0,children:function(e){var t=e.getFieldValue;return Object(x.jsx)(pa.a.Item,{label:s("Fixed or Variable"),name:"fixed",rules:Kr.fixed,children:Object(x.jsxs)(ga.a.Group,{disabled:"1"===t("numTimes")&&"custom"===t("frequency"),children:[Object(x.jsx)(ga.a.Button,{value:!0,children:s("Fixed")}),Object(x.jsx)(ga.a.Button,{value:!1,children:s("Variable")})]})})}})})]}),Object(x.jsxs)(fa.a,{gutter:16,children:[Object(x.jsx)(va.a,{span:6,children:Object(x.jsx)(pa.a.Item,{dependencies:["fixed"],noStyle:!0,children:function(e){var t=e.getFieldValue;return Object(x.jsx)(pa.a.Item,{label:s("Amount (single time)"),name:"amount",rules:t("fixed")?Kr.fixedAmount:Kr.variableAmount,trigger:"onValueChange",getValueFromEvent:function(e){return e.floatValue||0},children:Object(x.jsx)(Sa.a,{customInput:xa.a,thousandSeparator:".",decimalSeparator:","})})}})}),Object(x.jsx)(va.a,{span:3,children:Object(x.jsx)(pa.a.Item,{label:s("Late Fee"),name:"lateFee",children:Object(x.jsx)(za,{})})})]}),Object(x.jsx)(pa.a.Item,{name:"description",label:s("Description"),children:Object(x.jsx)(Qr,{rows:6})})]})})})},ec={SUCCESS:function(e,t){return"".concat(e," ").concat(t).concat(t.endsWith("e")?"":"e","d successfully!")},ERROR:function(e,t){return"status change"===t?"failed to change status of ".concat(e):"failed to ".concat(t," ").concat(e)}};var tc=function(e){var t=e.addToast,a=Object(me.a)(["translation"]).t,r=ge(),c=r.data,s=r.total,i=r.pages,o=r.search,l=r.goto,d=r.sort,u=r.filters,h=r.status,m=r.refresh,O=function(){var e=new URLSearchParams(window.location.search);return e.get("create")?{name:e.get("name"),type:e.get("type"),description:e.get("description"),amount:Number(e.get("amount")),numTimes:Number(e.get("numTimes")),frequency:e.get("frequency"),shouldAdd:!!e.get("create"),fixed:"true"===e.get("fixed")}:void 0}(),p=function(){var e=Object(n.useState)([]),t=Object(j.a)(e,2),a=Object(j.a)(t[0],3),r=a[0],c=a[1],s=a[2],i=t[1],o=Object(n.useMemo)((function(){return"add"===s&&c?["/api/expenses",{method:"POST",body:JSON.stringify(c)}]:"update"===s&&r&&c?["/api/expenses/".concat(r),{method:"PUT",body:JSON.stringify(c)}]:"delete"===s&&r?["/api/expenses/".concat(r),{method:"DELETE"}]:[void 0,void 0]}),[c,s,r]),l=B.apply(void 0,Object(H.a)(o)),d=Object(j.a)(l,2)[1];return d.action=s,d.message=ec[d.code]?ec[d.code]("expense",s):"",{add:function(e){return i([void 0,e,"add"])},edit:function(e,t){return i([t,e,"update"])},del:function(e){return i([e,void 0,"delete"])},changeStatus:function(e,t){return i([t,e,"status change"])},status:d}}(),f=p.add,v=p.edit,g=p.del,C=(p.changeStatus,p.status),y=Object(n.useState)(!!(null===O||void 0===O?void 0:O.shouldAdd)),S=Object(j.a)(y,2),I=S[0],N=S[1],w=Object(n.useState)(),P=Object(j.a)(w,2),D=P[0],k=P[1],A=Object(n.useState)(),E=Object(j.a)(A,2),R=E[0],_=E[1],M=function(){return N(!1)},F=function(){return k(void 0)},V=function(){return _(void 0)},L=function(e,t){l(t.activePage)};return Object(n.useEffect)((function(){(C.isError||C.isSuccess)&&(t(C.message,{appearance:C.toString().toLowerCase()}),C.isSuccess&&(M(),F(),V(),m()))}),[C]),Object(x.jsxs)("div",{className:"container",children:[Object(x.jsx)("h2",{children:a("Expenses")}),Object(x.jsxs)("div",{className:"list-actions",children:[Object(x.jsxs)("span",{children:[a("Total"),": ",s]}),Object(x.jsx)("div",{style:{marginLeft:16},children:Object(x.jsx)(Qt.a,{type:"text",placeholder:a("Search"),onChange:function(e){return o(e.target.value)},value:u.searchText,icon:Object(x.jsx)(Kt.a,{name:"delete",onClick:function(){return o("")},circular:!0,link:!0})})}),Object(x.jsxs)(Ya,{type:"primary",className:"generic-create-btn",onClick:function(){return N(!0)},children:[a("Add")," ",a("Expense")]})]}),Object(x.jsx)(Fa,{status:h,children:function(){return Object(x.jsxs)(Jt.a,{sortable:!0,children:[Object(x.jsx)(Jt.a.Header,{children:Object(x.jsxs)(Jt.a.Row,{children:[Object(x.jsx)(Jt.a.HeaderCell,{children:a("Actions")}),Object(x.jsx)(Jt.a.HeaderCell,{sorted:(u.sort.by,u.sort.direction),onClick:function(){return d("name","descending"===u.sort.direction?"ascending":"descending")},children:a("Title")}),Object(x.jsx)(Jt.a.HeaderCell,{sorted:"issueDate"===u.sort.by?u.sort.direction:null,onClick:function(){return d("issueDate","descending"===u.sort.direction?"ascending":"descending")},children:a("Issue Date")}),Object(x.jsx)(Jt.a.HeaderCell,{sorted:"dueDate"===u.sort.by?u.sort.direction:null,onClick:function(){return d("dueDate","descending"===u.sort.direction?"ascending":"descending")},children:a("Due Date")}),Object(x.jsx)(Jt.a.HeaderCell,{children:a("Frequency")}),Object(x.jsx)(Jt.a.HeaderCell,{children:a("Source")}),Object(x.jsx)(Jt.a.HeaderCell,{children:a("Cheque")}),Object(x.jsx)(Jt.a.HeaderCell,{children:a("Amount")})]})}),Object(x.jsx)(Jt.a.Body,{children:c.map((function(e){var t,n,r;return Object(x.jsxs)(Jt.a.Row,{children:[Object(x.jsxs)(Jt.a.Cell,{children:[Object(x.jsx)(T.a,{icon:"edit",basic:!0,onClick:(r=e,function(){return k(r)}),size:"mini"}),Object(x.jsx)(T.a,{icon:"trash alternate",negative:!0,basic:!0,onClick:(n=e._id,function(){return _(n)}),size:"mini"})]}),Object(x.jsx)(Jt.a.Cell,{children:Object(x.jsxs)(b.a,{to:"/expenses/".concat(e._id),children:["(",Yr[e.type],") ",e.name]})}),Object(x.jsx)(Jt.a.Cell,{children:U()(1e3*e.issueDate).format("DD/MM/YYYY")}),Object(x.jsx)(Jt.a.Cell,{children:U()(1e3*e.dueDate).format("DD/MM/YYYY")}),Object(x.jsx)(Jt.a.Cell,{children:zr[e.frequency]}),Object(x.jsx)(Jt.a.Cell,{children:null===(t=e.moneySource)||void 0===t?void 0:t.title}),Object(x.jsx)(Jt.a.Cell,{children:e.cheques.map((function(e){var t=e.no,a=e.amount;return Object(x.jsxs)("a",{style:{display:"block"},target:"_blank",href:"/cheques",children:["(",t,") ",We.format(a)]},t)}))}),Object(x.jsxs)(Jt.a.Cell,{children:[We.format(e.amount),Object(x.jsx)("br",{}),a("Late Fee"),": ",We.format(e.lateFee),Object(x.jsx)("br",{}),e.fixed?"(".concat(a("Fixed"),")"):"(".concat(a("Variable"),")")]})]},e._id)}))}),Object(x.jsx)(Jt.a.Footer,{children:Object(x.jsx)(Jt.a.Row,{children:Object(x.jsx)(Jt.a.HeaderCell,{colSpan:"20",style:{textAlign:"right"},children:Object(x.jsx)(Gt.a,{activePage:u.currentPage,totalPages:i,onPageChange:L})})})})]})}}),I&&Object(x.jsx)(Zr,{onSave:f,okText:"".concat(a("Add")," ").concat(a("Expense")),okButtonProps:{disabled:C.isLoading},onClose:M,initialValues:O}),D&&Object(x.jsx)(Zr,{onSave:function(e){return v(e,D._id)},onClose:F,initialValues:D,okButtonProps:{disabled:C.isLoading},okText:"".concat(a("Update")," ").concat(a("Expense"))}),R&&Object(x.jsx)(ua.a,{open:!0,content:"".concat(a("Are you sure you want to delete")," ?"),onCancel:V,onConfirm:function(){return g(R)},cancelButton:a("No"),confirmButton:a("Delete")})]})},ac=a(981);var nc=function(e){var t=e.className,a=e.revenue,n=e.cost,r=e.collected,c=e.notCollected,s=e.label,i=e.value,o=e.labelLink,l=Object(me.a)("translation").t;return Object(x.jsxs)("div",{className:"".concat(t," card"),children:[Object(x.jsx)("div",{className:"main",children:We.format(a-n)}),Object(x.jsxs)("div",{className:"below",children:[Object(x.jsxs)("span",{style:{fontSize:12,color:"gray"},children:[l("Revenue"),":",Object(x.jsx)("br",{}),Object(x.jsx)("span",{className:"revenue",children:We.format(a)})]}),Object(x.jsxs)("span",{style:{fontSize:12,color:"gray"},children:[l("Cost"),":",Object(x.jsx)("br",{}),Object(x.jsx)("span",{className:"cost",children:We.format(n)})]})]}),Object(x.jsxs)("div",{className:"below",children:[void 0!==r&&Object(x.jsxs)("span",{style:{fontSize:12,color:"gray"},children:[l("Collected"),":",Object(x.jsx)("br",{}),Object(x.jsx)("span",{className:"collected",children:We.format(r)})]}),void 0!==c&&Object(x.jsxs)("span",{style:{fontSize:12,color:"gray"},children:[l("Yet to collect"),":",Object(x.jsx)("br",{}),Object(x.jsx)("span",{className:"needtocollect",children:We.format(c)})]})]}),Object(x.jsx)("div",{className:"side-by-side",children:o?Object(x.jsxs)(b.a,{to:o,children:[s,": ",i]}):"".concat(s,": ").concat(i)})]})},rc="Partial",cc="Paid",sc="Not Paid",ic="Next Month Expense",oc="Late Payment",lc=function(e){return e.reduce((function(e,t){return t.payments.reduce((function(e,t){return e+t.amount}),0)+e}),0)},dc=function(e){return e.reduce((function(e,t){return t.amount+e}),0)};var uc=function(){var e=Object(me.a)("translation").t,t=B("/api/expenses/stats"),a=Object(j.a)(t,2),n=a[0],r=void 0===n?{}:n,c=a[1];return Object(x.jsxs)("div",{className:"expense-stats-container",children:[Object(x.jsx)("h3",{style:{textTransform:"uppercase"},children:e("Expense Stats")}),Object(x.jsx)(Fa,{status:c,children:function(){return Object(x.jsxs)("div",{className:"expense-stats",children:[Object(x.jsxs)("div",{className:"card",children:[Object(x.jsx)("div",{className:"main",children:r.total}),Object(x.jsx)("div",{className:"side-by-side",children:e("Total Expenses")})]}),Object(x.jsxs)("div",{className:"card",children:[Object(x.jsx)("div",{className:"main",children:We.format(lc(r.paid))}),Object(x.jsx)("div",{className:"below"}),Object(x.jsxs)("div",{className:"side-by-side",children:[e(cc),": ",r.paid.length]})]}),Object(x.jsxs)("div",{className:"card",children:[Object(x.jsx)("div",{className:"main",children:We.format(lc(r.partial))}),Object(x.jsx)("div",{className:"below"}),Object(x.jsxs)("div",{className:"side-by-side",children:[e(rc),": ",r.partial.length]})]}),Object(x.jsxs)("div",{className:"card",children:[Object(x.jsx)("div",{className:"main",children:We.format(dc(r.notpaid))}),Object(x.jsx)("div",{className:"below"}),Object(x.jsxs)("div",{className:"side-by-side",children:[e(sc),": ",r.notpaid.length]})]}),Object(x.jsxs)("div",{className:"card",children:[Object(x.jsx)("div",{className:"main",children:We.format(dc(r.nextMonthExpense))}),Object(x.jsx)("div",{className:"below"}),Object(x.jsxs)("div",{className:"side-by-side",children:[e(ic),": ",r.nextMonthExpense.length]})]}),Object(x.jsxs)("div",{className:"card",children:[Object(x.jsx)("div",{className:"main",children:We.format(dc(r.dues))}),Object(x.jsx)("div",{className:"below"}),Object(x.jsxs)("div",{className:"side-by-side",children:[e(oc),": ",r.dues.length]})]})]})}}),Object(x.jsx)(ac.a,{})]})},jc=(a(942),Cr.a.RangePicker),bc={organizations:"Organizations",branches:"Branches",products:"Products",brands:"Brands",reps:"Representants",departments:"Departments"},hc={open:"future-commission",closed:"paid-commission",partial:"generated-commission",quotations:"potential-commission",canceled:"lost-commission"};function mc(e){var t=e.data,a=e.dashboard,n=t.partial.revenue+t.closed.revenue-t.partial.cost-t.closed.cost,r=n-a.totalexpenses,c=Object(me.a)("translation").t;return Object(x.jsxs)("div",{className:"card",children:[Object(x.jsx)("div",{className:"main",style:{color:r<0?"#d3131d":""},children:We.format(r)}),Object(x.jsxs)("div",{className:"below",children:[Object(x.jsxs)("span",{style:{fontSize:12,color:"gray"},children:[c("Profit"),":",Object(x.jsx)("br",{}),Object(x.jsx)("span",{className:"revenue",children:We.format(n)})]}),Object(x.jsxs)("span",{style:{fontSize:12,color:"gray"},children:[c("Expense"),":",Object(x.jsx)("br",{}),Object(x.jsx)("span",{className:"cost",children:We.format(a.totalexpenses)})]})]}),Object(x.jsx)("div",{className:"side-by-side",children:Object(x.jsx)("div",{children:c("Real Profits")})})]})}var Oc=function(e){e.history;var t=Object(n.useContext)(k).user,a=Object(n.useState)({range:"alltime",value:[void 0,void 0]}),r=Object(j.a)(a,2),c=r[0],s=r[1],i=Object(me.a)("translation").t,o=new URLSearchParams([["from",c.value[0]?c.value[0].unix():""],["to",c.value[1]?c.value[1].unix():""]]),l=B("/api/orders-stats?".concat(o)),d=Object(j.a)(l,2),h=d[0],m=void 0===h?{}:h,O=d[1],p=B("/api/dashboard?".concat(o)),f=Object(j.a)(p,2),v=f[0],g=void 0===v?{}:v,C=f[1],y=B("/api/products-stats?".concat(o)),S=Object(j.a)(y,2),I=S[0],N=void 0===I?[]:I,w=S[1],T=B("/api/orders/aggregations/process-status?".concat(o)),P=Object(j.a)(T,2),D=P[0],A=void 0===D?[]:D,E=P[1],R=Object(n.useState)(!1),_=Object(j.a)(R,2),M=_[0],F=_[1],V=0,L=0,H=0,z=0,q=0;O.isSuccess&&(V=m.open.revenue+m.closed.revenue+m.partial.revenue,L=m.open.cost+m.closed.cost+m.partial.cost,H=m.open.orders+m.closed.orders+m.partial.orders,z=m.closed.revenue+m.partial.collected,q=m.open.revenue+(m.partial.revenue-m.partial.collected)),O.isSuccess&&C.isSuccess&&(m.partial.revenue,m.closed.revenue,m.partial.cost,m.closed.cost,g.totalexpenses);var Y={products:0,worthPrice:0,worthCost:0};w.isSuccess&&(Y=N.reduce((function(e,t){return{products:e.products+t.total,worthPrice:e.worthPrice+t.worthPrice,worthCost:e.worthCost+t.worthCost}}),Y));var X=N.sort((function(e,t){return t.worthPrice-t.worthCost-(e.worthPrice-e.worthCost)})).slice(0,5),W=null===g||void 0===g?void 0:g.allrepearnings;return Object(x.jsxs)("div",{className:"dashboard",children:[Object(x.jsx)("div",{className:"filters",children:Object(x.jsxs)("div",{children:[Object(x.jsx)("span",{style:{marginRight:16},children:i("See by date range")}),Object(x.jsxs)(ga.a.Group,{onChange:function(e){var t=e.target.value;switch(t){case"alltime":s({range:t,value:[void 0,void 0]});break;case"last30days":s({range:t,value:[U()().subtract(30,"days"),void 0]});break;case"today":s({range:t,value:[U()().startOf("day"),void 0]});break;case"custom":s({range:t,value:[U()().subtract(14,"days"),void 0]})}},defaultValue:c.range,children:[Object(x.jsx)(ga.a,{value:"alltime",children:i("All Time")}),Object(x.jsx)(ga.a,{value:"last30days",children:i("Last 30 days")}),Object(x.jsx)(ga.a,{value:"today",children:i("Today")}),Object(x.jsx)(ga.a,{value:"custom",children:i("Custom")})]}),Object(x.jsx)(jc,{onChange:function(e){s((function(t){return Object(u.a)(Object(u.a)({},t),{},{value:null===e?[void 0,void 0]:e})}))},defaultValue:[U()().subtract(14,"days"),U()()],disabled:"custom"!==c.range})]})}),Object(x.jsxs)("div",{class:"ui cards",style:{minWidth:"auto",maxWidth:"98%",margin:"auto"},children:[Object(x.jsx)("div",{class:"ui card",children:Object(x.jsxs)("div",{class:"content",children:[Object(x.jsx)("div",{class:"header",children:"Tarefas Para hoje"}),Object(x.jsxs)("div",{class:"meta",children:["custom"!==c.range," "]}),Object(x.jsx)("div",{class:"description",children:"5"})]})}),Object(x.jsx)("div",{class:"ui card",children:Object(x.jsxs)("div",{class:"content",children:[Object(x.jsx)("div",{class:"header",children:"Tarefas Atrasadas"}),Object(x.jsxs)("div",{class:"meta",children:["custom"!==c.range," "]}),Object(x.jsx)("div",{class:"description",children:"3"})]})}),Object(x.jsx)("div",{class:"ui card",children:Object(x.jsxs)("div",{class:"content",children:[Object(x.jsx)("div",{class:"header",children:"Contas A Pagar"}),Object(x.jsxs)("div",{class:"meta",children:["custom"!==c.range," "]}),Object(x.jsx)("div",{class:"description",children:"R$ 510,00"})]})}),Object(x.jsx)("div",{class:"ui card",children:Object(x.jsxs)("div",{class:"content",children:[Object(x.jsx)("div",{class:"header",children:"A Receber Hoje"}),Object(x.jsx)("div",{class:"meta",children:"custom"!==c.range}),Object(x.jsx)("div",{class:"description",children:"R$ 630,00"})]})}),Object(x.jsx)("div",{class:"ui card",children:Object(x.jsxs)("div",{class:"content",children:[Object(x.jsx)("div",{class:"header",children:"Contas Atrasadas"}),Object(x.jsxs)("div",{class:"meta",children:["custom"!==c.range," "]}),Object(x.jsx)("div",{class:"description",children:"R$: 150,00"})]})}),Object(x.jsx)("div",{class:"ui card",children:Object(x.jsxs)("div",{class:"content",children:[Object(x.jsx)("div",{class:"header",children:"A Receber Atrasadas"}),Object(x.jsxs)("div",{class:"meta",children:["custom"!==c.range," "]}),Object(x.jsx)("div",{class:"description",children:"R$: 125,00"})]})})]}),Object(x.jsx)("div",{style:{marginLeft:16,marginRight:16}}),Object(x.jsxs)("div",{className:"dashboard-inner",style:{minWidth:"auto",maxWidth:"98%",margin:"auto"},children:[O.isLoading&&Object(x.jsx)(Yt.a,{active:O.isLoading,children:Object(x.jsx)(Xt.a,{})}),Object(x.jsxs)("div",{className:"space-between margin-bottom",children:[Object(x.jsx)("h3",{style:{textTransform:"uppercase"},children:i("Dashboard Reports")}),Object(x.jsx)(at.a,{icon:[1,2,3].includes(t.roleNumber)&&Object(x.jsx)(_a.a,{}),onClick:function(){return F(!0)},children:[1,2,3].includes(t.roleNumber)&&i("Print")})]}),O.isSuccess&&Object(x.jsxs)("div",{className:"statisticsv2",children:[[1,2].includes(t.roleNumber)&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(nc,{className:"open",labelLink:"/orders?paymentStatus=1",revenue:m.open.revenue,cost:m.open.cost,label:i("Open"),value:m.open.orders}),Object(x.jsx)(nc,{className:"partial",labelLink:"/orders?paymentStatus=2",revenue:m.partial.revenue,cost:m.partial.cost,collected:m.partial.collected,notCollected:m.partial.revenue-m.partial.collected,label:i("Partial"),value:m.partial.orders}),Object(x.jsx)(nc,{className:"closed",labelLink:"/orders?paymentStatus=3",revenue:m.closed.revenue,cost:m.closed.cost,label:i("Closed"),value:m.closed.orders}),Object(x.jsx)(nc,{revenue:V,cost:L,collected:z,notCollected:q,label:i("Placed Orders"),value:H,labelLink:"/orders"}),Object(x.jsx)(nc,{revenue:Y.worthPrice,cost:Y.worthCost,label:i("Products Registered"),value:Y.products,labelLink:"/products"})]}),[1,2,3,8].includes(t.roleNumber)&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(nc,{className:"quotations",labelLink:"/orders?paymentStatus=4",revenue:[1,2].includes(t.roleNumber)&&m.quotations.revenue,cost:[1,2].includes(t.roleNumber)&&m.quotations.cost,label:i("Quotations"),value:m.quotations.orders}),Object(x.jsx)("div",{children:Object(x.jsx)(nc,{className:"canceled",revenue:m.canceled.revenue,cost:m.canceled.cost,label:i("Canceled"),value:m.canceled.orders,labelLink:"/orders?status=9"})})]}),[1,2].includes(t.roleNumber)&&Object(x.jsxs)(x.Fragment,{children:[O.isSuccess&&C.isSuccess&&Object(x.jsx)(mc,{data:m,dashboard:g}),Object(x.jsx)("div",{className:"card org-stats",children:C.isSuccess&&Object(x.jsxs)("div",{className:"wrapper",children:[Object(x.jsx)("div",{className:"main",children:We.format(g.topreps.reduce((function(e,t){return e+t.earnings}),0))}),Object(x.jsxs)("div",{className:"below",children:[i("Rep Orders"),": ",g.topreps.reduce((function(e,t){return e+t.orders}),0)]})]})})]}),Object(x.jsx)("div",{className:"card org-stats",children:C.isSuccess&&Object(x.jsxs)("div",{className:"wrapper",children:[Object(x.jsx)("div",{className:"main",onClick:function(){return Object(b.d)("/clients")},children:g.clients}),Object(x.jsx)("div",{className:"below",children:i("Clients")})]})}),Object(x.jsx)("div",{className:"card org-stats",children:C.isSuccess&&Object(x.jsxs)("div",{className:"wrapper",children:[Object(x.jsx)("div",{className:"main",onClick:function(){return Object(b.d)("/orders")},children:g.orders}),Object(x.jsx)("div",{className:"below",children:i("Orders")})]})}),Object(x.jsx)("div",{className:"card org-stats",children:C.isSuccess&&Object(x.jsxs)("div",{className:"wrapper",children:[Object(x.jsx)("div",{className:"main",onClick:function(){return Object(b.d)("/tasks")},children:g.task}),Object(x.jsx)("div",{className:"below",children:i("Tasks")})]})})]}),C.isLoading&&Object(x.jsx)(Yt.a,{active:C.isLoading,children:Object(x.jsx)(Xt.a,{})}),Object(x.jsx)(ac.a,{}),[1,2,8].includes(t.roleNumber)&&C.isSuccess&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:"org-statsv2",children:Object.entries(bc).filter((function(e){var a=Object(j.a)(e,1)[0];return 1!==t.roleNumber||"organizations"!==a})).map((function(e){var t=Object(j.a)(e,2),a=t[0],n=t[1];return Object(x.jsxs)("div",{className:"wrapper simplecard",children:[Object(x.jsx)("div",{className:"main",children:g[a]||0}),Object(x.jsx)("div",{className:"below",children:i(n)})]},a)}))}),Object(x.jsx)(ac.a,{})]}),[1,2,3,8].includes(t.roleNumber)&&E.isSuccess&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:"order-process-status-counts",children:A.filter((function(e){var a=e.id;return!(t.allowedStatuses||[]).length||(t.allowedStatuses||[]).includes(a)})).map((function(e){var t=e.status,a=e.count;return Object(x.jsxs)("div",{className:"wrapper simplecard",onClick:function(){return Object(b.d)("/orders?status=".concat(t))},children:[Object(x.jsx)("div",{className:"main",children:a}),Object(x.jsx)("div",{className:"below",children:t})]},t)}))}),Object(x.jsx)(ac.a,{})]}),[1,2,3].includes(t.roleNumber)&&Object(x.jsx)(uc,{}),[1,2].includes(t.roleNumber)&&Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)("div",{className:"statisticsv2",children:[Object(x.jsx)("div",{className:"card org-stats",children:C.isSuccess&&Object(x.jsxs)("div",{className:"wrapper",children:[Object(x.jsx)("div",{className:"main",onClick:function(){return Object(b.d)("/cheques")},children:g.cheques}),Object(x.jsx)("div",{className:"below",children:i("Cheques")})]})}),Object(x.jsx)("div",{className:"card org-stats",children:C.isSuccess&&Object(x.jsxs)("div",{className:"wrapper",children:[Object(x.jsx)("div",{className:"main",onClick:function(){return Object(b.d)("/vehicles")},children:g.vehicle}),Object(x.jsx)("div",{className:"below",children:i("Vehicles")})]})})]})}),[1,2,3,8].includes(t.roleNumber)&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("h3",{style:{textTransform:"uppercase"},children:i("Top departments")}),w.isSuccess&&Object(x.jsx)("div",{className:"product-statistics",children:X.map((function(e){var a,n,r;return Object(x.jsx)(nc,{revenue:[1,2].includes(t.roleNumber)&&e.worthPrice,cost:[1,2].includes(t.roleNumber)&&e.worthCost,label:null===e||void 0===e||null===(n=e.department)||void 0===n?void 0:n.title,value:e.total,labelLink:"/products?departmentId=".concat(null===(r=e.department)||void 0===r?void 0:r._id)},null===e||void 0===e||null===(a=e.department)||void 0===a?void 0:a._id)}))}),Object(x.jsx)(ac.a,{})]}),[1,2].includes(t.roleNumber)&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("h3",{style:{textTransform:"uppercase"},children:i("Top Representants Earnings")}),C.isSuccess&&Object(x.jsx)("div",{className:"product-statistics",children:[0,1,2,3,4,5].map((function(e){return Object(x.jsx)("div",{className:"card",children:g.topreps[e]&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:"main",children:We.format(g.topreps[e].earnings)}),Object(x.jsx)("div",{className:"below"}),Object(x.jsxs)("div",{className:"side-by-side",children:[g.topreps[e].name,": ",g.topreps[e].orders]})]})},e)}))}),Object(x.jsx)(ac.a,{})]}),(3===t.roleNumber&&t.isRep||8===t.roleNumber)&&C.isSuccess&&Object(x.jsxs)("div",{className:"all-rep-earnings",children:[Object(x.jsx)("div",{className:"card",children:Object(x.jsxs)("div",{className:"wrapper",children:[Object(x.jsx)("div",{className:"main",children:We.format([i("open"),i("partial"),i("closed"),i("quotations")].reduce((function(e,t){return(W[hc[t]]||0)+e}),0))}),Object(x.jsxs)("div",{className:"below",children:[i("Total"),":"," ",[i("open"),i("partial"),i("closed"),i("quotations")].reduce((function(e,t){return(W[t]||[]).filter(Boolean).length+e}),0)]})]})}),Object.entries(hc).map((function(e){var t=Object(j.a)(e,2),a=t[0],n=t[1];return Object(x.jsx)("div",{className:"card",children:Object(x.jsxs)("div",{className:"wrapper",children:[Object(x.jsx)("div",{className:"main",children:We.format(W[n]||0)}),Object(x.jsxs)("div",{className:"below",children:[a,": ",(W[a]||[]).filter(Boolean).length]})]})},a)}))]})]}),[1,2,3].includes(t.roleNumber)&&M&&Object(x.jsx)(lt.a,{onCancel:function(){return F(!1)},visible:!0,width:"95%",bodyStyle:{height:"87vh"},footer:null,centered:!0,children:Object(x.jsx)("iframe",{src:"/print-everything?nav=false&".concat(o),width:"100%",height:"100%",title:i("Report")})})]})},pc=a(130),xc=function(){var e=Object(y.a)(C.a.mark((function e(t){var a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ra({endpoint:"/api/v2/organizations",type:"GET",query:t});case 2:return a=e.sent,e.abrupt("return",a.json());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),fc=function(){var e=Object(y.a)(C.a.mark((function e(t){var a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ra({endpoint:"/api/orgs",type:"POST",request:t});case 2:return a=e.sent,e.abrupt("return",a.json());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),vc=function(){var e=Object(y.a)(C.a.mark((function e(t,a){var n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ra({endpoint:"/api/orgs/".concat(t),type:"PUT",request:a});case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),gc=(a(943),a(982)),Cc=[{value:"pt-BR",label:"Portugu\xeas"},{value:"en-US",label:"English"}],yc=function(e){Object(Na.a)(a,e);var t=Object(wa.a)(a);function a(){var e;Object(A.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={organizations:[]},e.handleItemClick=function(t,a){var n=a.name;return e.setState({activeItem:n})},e.handleOrganizationChange=function(e){},e}return Object(E.a)(a,[{key:"componentDidMount",value:function(){var e=this;1===this.props.admin.roleNumber?xc().then((function(t){e.setState({organizations:(t.data||[]).filter((function(t){var a=t._id;return!((e.props.admin.organizationIds||[]).length>0)||e.props.admin.organizationIds.includes(a)})).map((function(e){return{value:e._id,label:e.title}}))})})):this.props.onOrganizationChange(this.props.admin.organizationIds[0])}},{key:"render",value:function(){var e=this.props,t=e.logout,a=e.admin,n=e.t,r=e.onLocaleChange,c=e.locale;return Object(x.jsxs)(pc.a,{theme:"light",stackable:!0,inverted:!0,mode:"horizontal",children:[Object(x.jsx)(pc.a.Item,{children:Object(x.jsx)(b.a,{exact:!0,to:"/",className:"logo-link",children:n("Management")})}),[1,2,3,8].includes(a.role.roleNumber)&&Object(x.jsx)(pc.a.Item,{children:Object(x.jsx)(da.a,{inverted:!0,text:n("Departament Properties"),children:Object(x.jsxs)(da.a.Menu,{children:[Object(x.jsx)(da.a.Item,{children:Object(x.jsx)(b.a,{exact:!0,activeClassName:"active",to:"/departments",className:"submenuBtn ",children:n("Departaments")})}),Object(x.jsx)(da.a.Item,{children:Object(x.jsx)(b.a,{exact:!0,activeClassName:"active",to:"/brands",className:"submenuBtn",children:n("Brands")})}),Object(x.jsx)(da.a.Item,{children:Object(x.jsx)(b.a,{exact:!0,activeClassName:"active",to:"/models",className:"submenuBtn",children:n("Models")})}),Object(x.jsx)(da.a.Item,{children:Object(x.jsx)(b.a,{exact:!0,activeClassName:"active",to:"/categories",className:"submenuBtn",children:n("Categories")})}),Object(x.jsx)(da.a.Item,{children:Object(x.jsx)(b.a,{exact:!0,activeClassName:"active",to:"/subcategories",className:"submenuBtn",children:n("Subcategories")})}),[1,2,3,8].includes(a.role.roleNumber)&&Object(x.jsx)(da.a.Item,{name:n("products"),onClick:this.handleItemClick,children:Object(x.jsx)(b.a,{exact:!0,activeClassName:"active",to:"/products",className:"submenuBtn",children:n("Products")})})]})})}),Object(x.jsx)(pc.a.Item,{children:Object(x.jsx)(da.a,{inverted:!0,text:n("Order Properties"),children:Object(x.jsxs)(da.a.Menu,{children:[Object(x.jsx)(da.a.Item,{children:Object(x.jsx)(b.a,{exact:!0,activeClassName:"active",to:"/orders",className:"menuBtn",children:n("Orders")})}),[1,2,3,8].includes(a.role.roleNumber)&&Object(x.jsx)(da.a.Item,{children:Object(x.jsx)(b.a,{exact:!0,activeClassName:"active",to:"/clients",className:"menuBtn",children:n("Clients")})}),[1,2,3,8].includes(a.roleNumber)&&Object(x.jsx)(da.a.Item,{children:Object(x.jsx)(b.a,{exact:!0,activeClassName:"active",to:"/tasks",className:"menuBtn",children:n("Tasks")})})]})})}),[1,2,3].includes(a.roleNumber)&&Object(x.jsx)(pc.a.Item,{children:Object(x.jsx)(da.a,{inverted:!0,text:n("Administration"),children:Object(x.jsxs)(da.a.Menu,{children:[[1,2].includes(a.roleNumber)&&Object(x.jsx)(da.a.Item,{children:Object(x.jsx)(b.a,{exact:!0,activeClassName:"active",to:"/orgs",className:"menuBtn",children:n("Organizations")})}),[1,2,3].includes(a.roleNumber)&&Object(x.jsx)(da.a.Item,{children:Object(x.jsx)(b.a,{exact:!0,activeClassName:"active",to:"/admins",className:"menuBtn",children:n("Admins")})})]})})}),[1,2,3].includes(null===a||void 0===a?void 0:a.roleNumber)&&Object(x.jsx)(pc.a.Item,{children:Object(x.jsx)(da.a,{inverted:!0,text:n("Finance"),children:Object(x.jsxs)(da.a.Menu,{children:[Object(x.jsx)(da.a.Item,{children:Object(x.jsx)(b.a,{exact:!0,activeClassName:"active",to:"/cheques",className:"menuBtn",children:n("Cheque Mgmt")})}),Object(x.jsx)(da.a.Item,{children:Object(x.jsx)(b.a,{exact:!0,activeClassName:"active",to:"/expenses",className:"menuBtn",children:n("Expense Mgmt")})})]})})}),[1,2].includes(null===a||void 0===a?void 0:a.roleNumber)&&Object(x.jsx)(pc.a.Item,{children:Object(x.jsx)(da.a,{inverted:!0,text:n("Utilities"),children:Object(x.jsx)(da.a.Menu,{children:Object(x.jsx)(da.a.Item,{children:Object(x.jsx)(b.a,{exact:!0,activeClassName:"active",to:"/wood-price-calculator",className:"menuBtn",children:n("Wood Price Calculator")})})})})}),[1,2,3,8].includes(null===a||void 0===a?void 0:a.roleNumber)&&Object(x.jsx)(pc.a.Item,{children:Object(x.jsx)(da.a,{inverted:!0,text:n("Assets"),children:Object(x.jsxs)(da.a.Menu,{children:[Object(x.jsx)(da.a.Item,{children:Object(x.jsx)(b.a,{exact:!0,activeClassName:"active",to:"/vehicles",className:"menuBtn",children:n("Vehicles")})}),Object(x.jsx)(da.a.Item,{children:Object(x.jsx)(b.a,{exact:!0,activeClassName:"active",to:"/properties",className:"menuBtn",children:n("properties")})}),Object(x.jsx)(da.a.Item,{children:Object(x.jsx)(b.a,{exact:!0,activeClassName:"active",to:"/tools",className:"menuBtn",children:n("tools")})}),Object(x.jsx)(da.a.Item,{children:Object(x.jsx)(b.a,{exact:!0,activeClassName:"active",to:"/others",className:"menuBtn",children:n("outros")})})]})})}),[1,2,8].includes(null===a||void 0===a?void 0:a.roleNumber)&&Object(x.jsx)(pc.a.Item,{children:Object(x.jsx)(Ca.a,{style:{width:200},options:this.state.organizations,placeholder:n("Organization"),onChange:this.props.onOrganizationChange,allowClear:!0,value:this.context})}),Object(x.jsx)(pc.a.Item,{children:Object(x.jsx)(Ca.a,{placeholder:"locale",options:Cc,onChange:r,defaultValue:c})}),Object(x.jsx)(pc.a.Item,{onClick:t,children:n("Logout")})]})}}]),a}(n.Component);yc.contextType=D;var Sc=Object(gc.a)("translation")(yc),Ic=function(){return Object(x.jsxs)(h.a,{as:"h2",icon:!0,textAlign:"center",style:{marginTop:50},children:[Object(x.jsx)(Kt.a,{name:"frown",circular:!0}),Object(x.jsxs)(h.a.Content,{children:[Object(x.jsx)("div",{children:"404 Not Found"}),"Go to ",Object(x.jsx)(b.a,{to:"/",children:"Home"})," page"]})]})},Nc=function(){var e=Object(y.a)(C.a.mark((function e(t,a){var n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ra({endpoint:"/api/models",type:"POST",request:t,organizationId:a});case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),wc=function(){var e=Object(y.a)(C.a.mark((function e(t,a){var n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ra({endpoint:"/api/models/".concat(t),type:"PUT",request:a});case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Tc=function(){var e=Object(y.a)(C.a.mark((function e(t){var a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ra({endpoint:"/api/models/".concat(t),type:"DELETE"});case 2:return a=e.sent,e.abrupt("return",a.json());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Pc=function(e){var t=e.model,a=void 0===t?{}:t,r=e.brandOptions,c=e.submit,s=e.addToast,i=e.componentName,o=e.loadModels,l=!!a.title,d=Object(n.useState)(!1),u=Object(j.a)(d,2),b=u[0],h=u[1],m=Object(n.useState)(a.title),O=Object(j.a)(m,2),p=O[0],f=O[1],v=Object(n.useState)(!0),g=Object(j.a)(v,2),S=g[0],I=g[1],w=Object(n.useState)(a.description),P=Object(j.a)(w,2),D=P[0],k=P[1],A=Object(n.useState)(!0),E=Object(j.a)(A,2),R=E[0],_=E[1],M=Object(n.useState)(a.brandId),F=Object(j.a)(M,2),V=F[0],L=F[1],B=Object(n.useState)(!1),H=Object(j.a)(B,2),z=H[0],q=H[1],U=function(){var e=Object(y.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(R&&S&&""!==V&&!z){e.next=3;break}return e.abrupt("return");case 3:return q(!0),e.next=6,c({title:p,description:D,brandId:V}).then((function(e){s("Model ".concat(a.title?"updated":"created"," successfully"),{appearance:"success"}),f(""),k(""),L("")})).catch((function(e){s(e.message,{appearance:"error"})}));case 6:q(!1),X();case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Y=function(){h(!b)},X=function(){o(),Y(),f(""),I(!0),k(""),_(!0),L("")};return Object(x.jsxs)($t.a,{trigger:Object(x.jsxs)(T.a,{onClick:Y,className:l?"table-action-btn":"generic-create-btn",children:[" ",l?Object(x.jsx)(Kt.a,{name:"pencil"}):Object(x.jsx)("span",{children:i})]}),closeIcon:!0,open:b,onClose:X,children:[Object(x.jsxs)($t.a.Header,{children:[i," a model"]}),Object(x.jsx)($t.a.Content,{children:Object(x.jsxs)(N.a,{name:"createDepForm",size:"large",onSubmit:U,children:[Object(x.jsx)(N.a.Input,{fluid:!0,placeholder:"Titulo",value:p,error:!S,onChange:function(e){return f(e.target.value)},onBlur:function(){return I(cr(p,3,0))}}),Object(x.jsx)(N.a.TextArea,{fluid:!0,placeholder:"Descri\xe7\xe3o",value:D,error:!R,onChange:function(e){return k(e.target.value)},onBlur:function(){return _(cr(D,5,0))}}),Object(x.jsx)(N.a.Select,{fluid:!0,label:"Brand",options:r,placeholder:"Brand",onChange:function(e,t){var a=t.value;return L(a)}}),Object(x.jsx)(T.a,{type:"submit",color:"teal",fluid:!0,size:"small",loading:z,primary:!0,children:"Submit"})]})})]})};Pc.defaultProps={model:{},brandsOptions:[]};var Dc=Pc,kc=function(e){var t=e.title,a=e.id,r=e.addToast,c=e.loadModels,s=Object(n.useState)(!1),i=Object(j.a)(s,2),o=i[0],l=i[1],d=function(){l(!o)};return Object(x.jsxs)($t.a,{trigger:Object(x.jsx)(T.a,{className:"table-action-btn",onClick:d,children:Object(x.jsx)(Kt.a,{name:"trash"})}),open:o,onClose:d,closeIcon:!0,children:[Object(x.jsx)($t.a.Header,{children:"Delete a model"}),Object(x.jsxs)($t.a.Content,{children:[Object(x.jsxs)("h4",{children:["Are you sure you want to delete model ",'"'.concat(t,'"'),"?"]}),Object(x.jsxs)(T.a,{color:"red",inverted:!0,onClick:function(){Tc(a).then((function(e){r("Model deleted successfully",{appearance:"success"})})).catch((function(e){""!==e.message?r("Could not delete model: "+e.message,{appearance:"error"}):r("Something went wrong",{appearance:"error"})})).finally((function(){d(),c()}))},children:[Object(x.jsx)(Kt.a,{name:"remove"})," Delete"]}),Object(x.jsxs)(T.a,{color:"blue",inverted:!0,onClick:d,children:[Object(x.jsx)(Kt.a,{name:"checkmark"})," Cancel"]})]})]})},Ac=function(e){Object(Na.a)(a,e);var t=Object(wa.a)(a);function a(e){var n;return Object(A.a)(this,a),(n=t.call(this,e)).createModelRow=function(e){return Object(x.jsxs)(Jt.a.Row,{children:[Object(x.jsx)(Jt.a.Cell,{children:Object(x.jsx)(Dc,{model:e,componentName:"Edit",addToast:n.props.addToast,brandOptions:n.props.brandOptions,loadModels:n.props.loadModels,submit:function(t){return wc(e._id,t)}})}),Object(x.jsx)(Jt.a.Cell,{children:Object(x.jsx)(kc,{addToast:n.props.addToast,id:e._id,title:e.title,loadModels:n.props.loadModels})}),Object(x.jsx)(Jt.a.Cell,{children:e._id}),Object(x.jsx)(Jt.a.Cell,{children:e.brand.title}),Object(x.jsx)(Jt.a.Cell,{children:e.title}),Object(x.jsx)(Jt.a.Cell,{children:e.description})]},e._id)},n.handlePaginationClick=function(e){n.props.updatePageFilter({page:e})},n.createModelRow=n.createModelRow.bind(Object(Ia.a)(n)),n.handlePaginationClick=n.handlePaginationClick.bind(Object(Ia.a)(n)),n}return Object(E.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.pages,n=t.onPageChange,r=t.filters;return Object(x.jsxs)(Jt.a,{celled:!0,children:[Object(x.jsx)(Jt.a.Header,{children:Object(x.jsxs)(Jt.a.Row,{children:[Object(x.jsx)(Jt.a.HeaderCell,{colspan:2,rowspan:2,children:"Actions"}),Object(x.jsx)(Jt.a.HeaderCell,{children:"ID"}),Object(x.jsx)(Jt.a.HeaderCell,{children:"Brand"}),Object(x.jsx)(Jt.a.HeaderCell,{children:"Titulo"}),Object(x.jsx)(Jt.a.HeaderCell,{children:"Descri\xe7\xe3o"})]})}),Object(x.jsx)(Jt.a.Body,{children:this.props.models.map((function(t){return e.createModelRow(t)}))}),Object(x.jsx)(Jt.a.Footer,{children:Object(x.jsx)(Jt.a.Row,{children:Object(x.jsx)(Jt.a.HeaderCell,{colSpan:"20",style:{textAlign:"right"},children:Object(x.jsx)(Gt.a,{activePage:r.currentPage,totalPages:a,onPageChange:n})})})})]})}}]),a}(n.Component);var Ec=function(e){var t=Z("/api/models","*"),a=Object(j.a)(t,8),r=a[0],c=a[1],s=c.total,i=c.pages,o=a[2],l=a[3],d=(a[4],a[5]),u=(a[6],a[7]),b=B("/api/brands?showAll=true","*"),h=Object(j.a)(b,8),m=h[0],O=(m=void 0===m?{data:[]}:m).data,p=(h[6],Object(n.useContext)(D)),f=O.map((function(e){var t=e._id;return{text:e.title,value:t}}));return Object(x.jsxs)("div",{className:"container",children:[Object(x.jsx)("h2",{children:"Models"}),Object(x.jsx)(Dc,{componentName:"Create",brandOptions:f,addToast:e.addToast,loadModels:u,submit:function(e){return Nc(e,p)}}),Object(x.jsxs)("div",{children:[Object(x.jsxs)("span",{children:["Total models: ",s]}),Object(x.jsxs)("div",{class:"ui action input",style:{marginLeft:16},children:[Object(x.jsx)(Qt.a,{type:"text",placeholder:"Search...",onChange:function(e){o(e.target.value)},value:d.searchText}),Object(x.jsx)("button",{class:"ui icon button",onClick:function(){o("")},children:Object(x.jsx)("i",{class:"delete icon"})})]})]}),Object(x.jsx)(Ac,{addToast:e.addToast,brandOptions:f,models:r,loadModels:u,onPageChange:function(e,t){l(t.activePage)},pages:i,filters:d})]})},Rc=a(238),_c=a(999),Mc=a(983),Fc=function(e){var t=e.index,a=e.image,r=e.productId,c=e.header,s=e.addToast,i=Object(n.useState)(!1),o=Object(j.a)(i,2),l=o[0],d=o[1],u=function(){return d(!l)};return Object(x.jsx)(Rc.c,{index:t,children:Object(x.jsx)("div",{children:Object(x.jsxs)(_c.a,{centered:!0,color:"grey",children:[Object(x.jsx)(_c.a.Content,{children:Object(x.jsxs)($t.a,{trigger:Object(x.jsx)(T.a,{icon:"delete",style:{position:"float",float:"right"},color:"orange",onClick:u}),open:l,onClose:u,closeIcon:!0,children:[Object(x.jsx)($t.a.Header,{children:"Delete a model"}),Object(x.jsxs)($t.a.Content,{children:[Object(x.jsx)("h4",{children:"Are you sure you want to delete this image?"}),Object(x.jsxs)(T.a,{color:"red",inverted:!0,onClick:function(){return function(e,t,a,n){oa(t,a).then((function(t){window.location.reload(!1),e("Image deleted successfully",{appearance:"success"})})).catch((function(t){""!==t.message?e("Could not delete product image: "+t.message,{appearance:"error"}):e("Something went wrong",{appearance:"error"})})).finally((function(){return n()}))}(s,r,a._id,u)},children:[Object(x.jsx)(Kt.a,{name:"remove"})," Delete"]}),Object(x.jsxs)(T.a,{color:"blue",inverted:!0,onClick:u,children:[Object(x.jsx)(Kt.a,{name:"checkmark"})," Cancel"]})]})]})}),Object(x.jsx)(m.a,{src:a.link,verticalAlign:"middle",centered:!0,size:"small"}),Object(x.jsxs)(_c.a.Content,{children:[c,Object(x.jsx)("br",{})]})]})})})},Vc=function(e){var t=e.slides,a=e.size;return Object(x.jsx)(Mc.a,{textAlign:"center",children:Object(x.jsx)(T.a.Group,{size:a,children:Object(H.a)(Array(t).keys()).map((function(e){return Object(x.jsx)(T.a,{as:Rc.b,icon:"circle",slide:e},e)}))})})};Vc.defaultProps={size:"mini"};var Lc=function(e){var t=e.productId,a=e.images,n=e.addToast;return 0===a.length?Object(x.jsx)(x.Fragment,{}):Object(x.jsxs)(Rc.a,{naturalSlideWidth:1,naturalSlideHeight:1.25,totalSlides:a.length,style:{width:"55%"},children:[Object(x.jsx)(Rc.d,{children:a.map((function(e){return Object(x.jsx)(Fc,{addToast:n,image:e,productId:t,index:0,header:e.comment||"-"},e._id)}))}),Object(x.jsx)(Vc,{slides:a.length})]})};Lc.defaultProps={images:[]};var Bc=Lc,Hc=(a(945),a(946),function(e){var t=e.uploadHandler,a=Object(me.a)("translation").t,r=Object(n.useState)(void 0),c=Object(j.a)(r,2),s=c[0],i=c[1];return Object(x.jsxs)("div",{children:[Object(x.jsx)("input",{type:"file",onChange:function(e){i(e.target.files[0])}}),Object(x.jsxs)(T.a,{onClick:function(){return t(s)},color:"blue",inverted:!0,children:[Object(x.jsx)(Kt.a,{name:"checkmark"})," ",a("Upload")]})]})}),zc=function(){var e=Object(y.a)(C.a.mark((function e(t,a){var n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ra({endpoint:"/api/products/".concat(t,"/images"),type:"POST",attachment:a});case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();var qc=function(e){var t=e.fileName,a=e.className,r=e.style,c=Object(n.useState)(!1),s=Object(j.a)(c,2),i=s[0],o=s[1],l=Object(me.a)("translation").t;return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(T.a,{className:a,style:r,primary:!0,onClick:function(){return o(!0)},children:l("Show QR")}),i&&Object(x.jsxs)(lt.a,{visible:!0,onCancel:function(){return o(!1)},width:300,footer:null,children:[Object(x.jsx)(La.a,{id:"qr-canvas",value:window.location.href,size:256,includeMargin:!0}),Object(x.jsx)(at.a,{onClick:function(){var e=document.getElementById("qr-canvas").toDataURL("image/png").replace("image/png","image/octet-stream"),a=document.createElement("a");a.href=e,a.download="".concat(t,".png"),document.body.appendChild(a),a.click(),document.body.removeChild(a)},type:"primary",block:!0,children:"Download"})]})]})};var Uc,Yc=function(e){var t=e.type,a=e.value;switch(t){case dn:return"";case un:return"".concat(__("Meters"),": ").concat(Ke(a[0]));case jn:return"".concat(__("Width"),": ").concat(Ke(a[0]),", ").concat(__("Length"),": ").concat(Ke(a[1]));case bn:return"".concat(__("Width"),": ").concat(Ke(a[0]),", ").concat(__("Length"),": ").concat(Ke(a[1]),", ").concat(__("Height"),": ").concat(Ke(a[2]));default:return a}},Xc=function(e){Object(Na.a)(a,e);var t=Object(wa.a)(a);function a(e){var n;return Object(A.a)(this,a),(n=t.call(this,e)).prepareProdDescriptionTableBody=function(e){var t,a,r=n.props.t;return Object(x.jsxs)(Jt.a.Body,{children:[Object(x.jsxs)(Jt.a.Row,{children:[Object(x.jsx)(Jt.a.Cell,{children:r("ID")}),Object(x.jsx)(Jt.a.Cell,{children:e._id})]}),Object(x.jsxs)(Jt.a.Row,{children:[Object(x.jsx)(Jt.a.Cell,{children:r("Title")}),Object(x.jsx)(Jt.a.Cell,{children:e.title})]}),Object(x.jsxs)(Jt.a.Row,{children:[Object(x.jsx)(Jt.a.Cell,{children:r("BCode")}),Object(x.jsx)(Jt.a.Cell,{children:e.ISBN})]}),Object(x.jsxs)(Jt.a.Row,{children:[Object(x.jsx)(Jt.a.Cell,{children:r("Cost")}),Object(x.jsx)(Jt.a.Cell,{children:Rr.format(e.cost)})]}),Object(x.jsxs)(Jt.a.Row,{children:[Object(x.jsx)(Jt.a.Cell,{children:r("Price")}),Object(x.jsx)(Jt.a.Cell,{children:Rr.format(e.price)})]}),!!(null===(t=e.kitItems)||void 0===t?void 0:t.length)&&Object(x.jsxs)(Jt.a.Row,{children:[Object(x.jsx)(Jt.a.Cell,{children:r("Items")}),Object(x.jsx)(Jt.a.Cell,{children:e.kitItems.map((function(e){return e.title})).join(",")})]}),Object(x.jsxs)(Jt.a.Row,{children:[Object(x.jsx)(Jt.a.Cell,{children:r("Metric")}),Object(x.jsx)(Jt.a.Cell,{children:null===(a=hn.find((function(t){var a=t.value;return e.measurementType===a})))||void 0===a?void 0:a.label})]}),Object(x.jsxs)(Jt.a.Row,{children:[Object(x.jsx)(Jt.a.Cell,{children:r("Dimensions")}),Object(x.jsx)(Jt.a.Cell,{children:Object(x.jsx)(Yc,{type:e.measurementType,value:e.measurementValue})})]}),Object(x.jsxs)(Jt.a.Row,{children:[Object(x.jsx)(Jt.a.Cell,{children:r("Total Units")}),Object(x.jsx)(Jt.a.Cell,{children:Ke(e.totalUnits)})]}),Object(x.jsxs)(Jt.a.Row,{children:[Object(x.jsx)(Jt.a.Cell,{children:r("Category")}),Object(x.jsx)(Jt.a.Cell,{children:e.category?e.category.title:""})]}),Object(x.jsxs)(Jt.a.Row,{children:[Object(x.jsx)(Jt.a.Cell,{children:r("Department")}),Object(x.jsx)(Jt.a.Cell,{children:e.department?e.department.title:""})]}),Object(x.jsxs)(Jt.a.Row,{children:[Object(x.jsx)(Jt.a.Cell,{children:r("Model")}),Object(x.jsx)(Jt.a.Cell,{children:e.model?e.model.title:""})]}),Object(x.jsxs)(Jt.a.Row,{children:[Object(x.jsx)(Jt.a.Cell,{children:r("Subcategory")}),Object(x.jsx)(Jt.a.Cell,{children:e.subcategory?e.subcategory.title:""})]}),Object(x.jsxs)(Jt.a.Row,{children:[Object(x.jsx)(Jt.a.Cell,{children:r("Brand")}),Object(x.jsx)(Jt.a.Cell,{children:e.brand?e.brand.title:""})]}),Object(x.jsxs)(Jt.a.Row,{children:[Object(x.jsx)(Jt.a.Cell,{children:r("Provider")}),Object(x.jsx)(Jt.a.Cell,{children:e.provider?e.provider.name:""})]}),Object(x.jsxs)(Jt.a.Row,{children:[Object(x.jsx)(Jt.a.Cell,{children:r("Created At")}),Object(x.jsx)(Jt.a.Cell,{children:U()(1e3*e.createdAt).format("DD/MM/YYYY")})]}),Object(x.jsxs)(Jt.a.Row,{children:[Object(x.jsx)(Jt.a.Cell,{children:r("Comment")}),Object(x.jsx)(Jt.a.Cell,{children:e.comment})]})]})},n.prepareProductStats=function(e){var t=n.props.t;return Object(x.jsxs)(Jt.a.Body,{children:[Object(x.jsxs)(Jt.a.Row,{children:[Object(x.jsxs)(Jt.a.Cell,{children:[t("Open")," ",t("Orders")]}),Object(x.jsxs)(Jt.a.Cell,{children:[t("Total")," ",t("Orders"),": ",Object(x.jsx)("strong",{children:n.state.product.stats.openOrders.total})]}),Object(x.jsxs)(Jt.a.Cell,{children:[" ",t("Total")," ",t("Amount"),": ",Object(x.jsx)("strong",{children:n.state.product.stats.openOrders.value})]}),Object(x.jsxs)(Jt.a.Cell,{children:[t("Total Units"),": ",Object(x.jsx)("strong",{children:Ke(n.state.product.stats.openOrders.units)})]})]}),Object(x.jsxs)(Jt.a.Row,{children:[Object(x.jsxs)(Jt.a.Cell,{children:[t("Partial")," ",t("Orders")]}),Object(x.jsxs)(Jt.a.Cell,{children:[t("Total")," ",t("Orders"),":",Object(x.jsx)("strong",{children:n.state.product.stats.partial.total})]}),Object(x.jsxs)(Jt.a.Cell,{children:[t("Total Amount"),": ",Object(x.jsx)("strong",{children:n.state.product.stats.partial.value})]}),Object(x.jsxs)(Jt.a.Cell,{children:[t("Total Units"),": ",Object(x.jsx)("strong",{children:Ke(n.state.product.stats.partial.units)})]})]}),Object(x.jsxs)(Jt.a.Row,{children:[Object(x.jsxs)(Jt.a.Cell,{children:[t("Closed")," ",t("Orders")]}),Object(x.jsxs)(Jt.a.Cell,{children:[" ",t("Total Orders"),": ",Object(x.jsx)("strong",{children:n.state.product.stats.closed.total})]}),Object(x.jsxs)(Jt.a.Cell,{children:[" ",t("Total Amount"),": ",Object(x.jsx)("strong",{children:n.state.product.stats.closed.value})]}),Object(x.jsxs)(Jt.a.Cell,{children:[t("Total Units"),": ",Object(x.jsx)("strong",{children:Ke(n.state.product.stats.closed.units)})]})]}),Object(x.jsxs)(Jt.a.Row,{children:[Object(x.jsx)(Jt.a.Cell,{children:t("Quotations")}),Object(x.jsxs)(Jt.a.Cell,{children:[" ",t("Total Orders"),": ",Object(x.jsx)("strong",{children:n.state.product.stats.quotations.total})]}),Object(x.jsxs)(Jt.a.Cell,{children:[" ",t("Total Amount"),": ",Object(x.jsx)("strong",{children:n.state.product.stats.quotations.value})]}),Object(x.jsxs)(Jt.a.Cell,{children:[t("Total Units"),": ",Object(x.jsx)("strong",{children:Ke(n.state.product.stats.quotations.units)})]})]})]})},n.toggleModal=function(){n.setState({modalOpen:!n.state.modalOpen})},n.fileChangedHandler=function(e){n.setState({selectedFile:e.target.files[0]})},n.uploadHandler=function(e){zc(n.props.id,e).then(n.props.addToast(n.props.t("image added"),{appearance:"success"})).catch(n.props.addToast(n.props.t("Something went wrong"))),window.location.reload()},n.state={loading:!0,product:{stats:{openOrders:{},quotations:{},closed:{},partial:{}}},images:[]},n}return Object(E.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.t;sa(this.props.id).then((function(t){return e.setState({product:t,loading:!1},(function(){return console.log(e.state)}))})).catch((function(a){return e.props.addToast(t("Could not fetch")+" "+t("product"),{appearance:"error"})}))}},{key:"render",value:function(){var e,t=this.props.t;return this.state.loading?"loading...":Object(x.jsxs)("div",{className:"container",children:[Object(x.jsxs)("div",{className:"product-block product-descr",children:[Object(x.jsx)("div",{style:{display:"flex",justifyContent:"flex-end"},children:Object(x.jsx)(qc,{fileName:null===(e=this.state.product)||void 0===e?void 0:e._id})}),Object(x.jsxs)(Jt.a,{celled:!0,striped:!0,children:[Object(x.jsx)(Jt.a.Header,{children:Object(x.jsx)(Jt.a.Row,{children:Object(x.jsxs)(Jt.a.HeaderCell,{colSpan:"3",children:[t("Product")," ",t("Description")]})})}),this.prepareProdDescriptionTableBody(this.state.product),Object(x.jsx)(Jt.a.Footer,{})]}),Object(x.jsxs)(Jt.a,{celled:!0,striped:!0,children:[Object(x.jsx)(Jt.a.Header,{children:Object(x.jsx)(Jt.a.Row,{children:Object(x.jsxs)(Jt.a.HeaderCell,{colSpan:"4",children:[t("Product")," ",t("Stats")]})})}),this.prepareProductStats(this.state.product)]})]}),Object(x.jsxs)("div",{className:"product-block product-images",children:[Object(x.jsx)(Bc,{images:this.state.product.imageUrls,addToast:this.props.addToast,productId:this.state.product._id}),Object(x.jsxs)($t.a,{trigger:Object(x.jsxs)(T.a,{onClick:this.toggleModal,color:"teal",style:{position:"float",float:"center"},className:"menuBtn'",children:[Object(x.jsx)(Kt.a,{name:"picture"})," ",t("Add an image")]}),open:this.state.modalOpen,onClose:this.toggleModal,closeIcon:!0,children:[Object(x.jsx)($t.a.Header,{children:t("Upload a picture")}),Object(x.jsx)($t.a.Content,{children:Object(x.jsx)(Hc,{uploadHandler:this.uploadHandler})})]})]})]})}}]),a}(r.a.Component),Wc=Object(gc.a)("translation")(Xc),Qc=function(){var e=Object(y.a)(C.a.mark((function e(){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ra({endpoint:"/api/orders/statuses",type:"GET"});case 2:return t=e.sent,e.abrupt("return",t.json());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Jc=function(){var e=Object(y.a)(C.a.mark((function e(t){var a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ra({endpoint:"/api/orders/".concat(t),type:"GET"});case 2:return a=e.sent,e.abrupt("return",a.json());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Kc=function(){var e=Object(y.a)(C.a.mark((function e(t,a){var n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ra({endpoint:"/api/orders/".concat(t,"/payment/").concat(a),type:"DELETE"});case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Gc=function(){var e=Object(y.a)(C.a.mark((function e(t,a){var n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ra({endpoint:"/api/orders/".concat(t,"/process-status"),type:"POST",request:a});case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),$c=function(){var e=Object(y.a)(C.a.mark((function e(t,a){var n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ra({endpoint:"/api/orders/".concat(t),type:"DELETE",request:a});case 2:return n=e.sent,e.abrupt("return",n.text().then((function(e){return e?JSON.parse(e):void 0})));case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Zc=function(){var e=Object(y.a)(C.a.mark((function e(t,a){var n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ra({endpoint:"/api/orders/".concat(t,"/payment-upload"),type:"POST",attachment:a});case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),es=function(){var e=Object(y.a)(C.a.mark((function e(t,a,n){var r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ra({endpoint:"/api/orders/".concat(t,"/payment"),type:"POST",request:a,organizationId:n});case 2:return r=e.sent,e.abrupt("return",r.json());case 4:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),ts=function(){var e=Object(y.a)(C.a.mark((function e(t,a,n){var r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ra({endpoint:"/api/orders/".concat(t,"/payment/").concat(a),type:"PUT",request:n});case 2:return r=e.sent,e.abrupt("return",r.json());case 4:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),as=function(){var e=Object(y.a)(C.a.mark((function e(t){var a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ra({endpoint:"/api/orders/".concat(t,"/payment"),type:"GET"});case 2:return a=e.sent,e.abrupt("return",a.json());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ns=function(e){var t=e.id,a=e.addToast,r=(e.hasPayments,e.loadOrders),c=Object(n.useState)(!1),s=Object(j.a)(c,2),i=s[0],o=s[1],l=function(){o(!i)};return Object(x.jsxs)($t.a,{trigger:Object(x.jsx)(T.a,{onClick:l,icon:"trash alternate",negative:!0,basic:!0,size:"mini",style:{height:32}}),open:i,onClose:l,closeIcon:!0,children:[Object(x.jsx)($t.a.Header,{children:"Delete Order"}),Object(x.jsxs)($t.a.Content,{children:[Object(x.jsxs)("h4",{children:["Are you sure you want to delete an order with id ",'"'.concat(t,'"'),"?"]}),Object(x.jsxs)("div",{style:{textAlign:"right",paddingTop:16},children:[Object(x.jsx)(T.a,{onClick:l,children:"Close"}),Object(x.jsxs)(T.a,{color:"red",onClick:function(){$c(t,{deleteTrxs:!0}).then((function(e){a("Order deleted successfully",{appearance:"success"})})).catch((function(e){""!==e.message?a("Could not delete order: "+e.message,{appearance:"error"}):a("Something went wrong",{appearance:"error"})})).finally((function(){l(),r()}))},children:[Object(x.jsx)(Kt.a,{name:"trash"})," Delete"]})]})]})]})},rs=["title","titleId"];function cs(){return cs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},cs.apply(this,arguments)}function ss(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},c=Object.keys(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function is(e,t){var a=e.title,r=e.titleId,c=ss(e,rs);return n.createElement("svg",cs({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 490.996 490.996",width:"1em",height:"1em",fill:"currentColor",ref:t,"aria-labelledby":r},c),a?n.createElement("title",{id:r},a):null,Uc||(Uc=n.createElement("g",null,n.createElement("path",{d:"M484.058,112.28c-7.247-10.404-19.144-16.614-31.816-16.614h-94.624c13.291,2.775,24.603,11.714,29.943,24.615 c1.063,2.569,1.761,5.212,2.283,7.869h62.396c2.063,0,3.997,1.015,5.155,2.67c1.175,1.698,1.444,3.862,0.73,5.791 l-44.992,121.107c-0.905,2.451-3.267,4.102-5.887,4.102H154.939L114.734,90.314c-5.01-21.286-23.772-36.153-45.631-36.153H24.361 C10.912,54.161,0,65.065,0,78.522s10.912,24.362,24.361,24.362h43.286l54.131,230.919c4.914,20.864,23.058,35.479,44.36,36.042 c-12.532,9.103-20.764,23.765-20.764,40.436c0,27.662,22.429,50.078,50.09,50.078c27.662,0,50.072-22.416,50.072-50.078 c0-16.605-8.17-31.212-20.623-40.326h93.421c-12.454,9.114-20.634,23.721-20.634,40.326c0,27.662,22.428,50.078,50.083,50.078 c27.646,0,50.072-22.416,50.072-50.078c0-16.605-8.187-31.212-20.634-40.326h22.714c13.448,0,24.361-10.901,24.361-24.361 c0-13.457-10.913-24.361-24.361-24.361h-231.07l-6.313-26.931h244.693c16.113,0,30.703-10.143,36.338-25.256l44.994-121.118 C492.986,136.046,491.305,122.732,484.058,112.28z"}),n.createElement("path",{d:"M275.701,209.63c1.776,1.785,4.109,2.673,6.437,2.673c2.334,0,4.667-0.888,6.426-2.673l67.007-66.987 c2.621-2.609,3.396-6.525,1.986-9.935c-0.923-2.221-3.986-5.64-8.422-5.64c-6.472,0-25.886,0-25.886,0V95.665v-55.89 c-0.017-5.035-4.094-9.137-9.138-9.137h-63.964c-5.044,0-9.12,4.102-9.12,9.12v55.908v31.412c0,0-19.408,0-25.878,0 c-4.144,0-7.473,3.332-8.424,5.622c-1.41,3.41-0.635,7.334,1.962,9.943L275.701,209.63z"}))))}var os=n.forwardRef(is),ls=(a.p,function(e){var t=e.id,a=e.addToast,r=e.loadOrders,c=Object(me.a)("translation").t,s=Object(n.useState)(!1),i=Object(j.a)(s,2),o=i[0],l=i[1],d=_t(t),u=d.convert,b=d.status,h=function(){l(!o)};return Object(n.useEffect)((function(){b.isSuccess&&(a(c("Converted to order successfully!"),{appearance:"success"}),h(),r())}),[b]),Object(x.jsxs)($t.a,{trigger:Object(x.jsx)(T.a,{onClick:h,className:"table-action-btn",style:{fontSize:"1.3em",color:"teal"},children:Object(x.jsx)(os,{})}),style:{width:500},open:o,onClose:h,closeIcon:!0,children:[Object(x.jsx)($t.a.Header,{children:c("Convert this order into open order ?")}),Object(x.jsxs)($t.a.Content,{children:[Object(x.jsxs)("div",{style:{textAlign:"right",marginBottom:16},children:[Object(x.jsx)(T.a,{onClick:h,children:c("No")}),Object(x.jsx)(T.a,{primary:!0,onClick:function(){u(t)},children:c("Yes")})]}),b.isError&&Object(x.jsx)(ya.a,{type:"error",message:c("Not enough stock")+": ".concat(b.message)})]})]})}),ds=a(236),us={unitOptions:[{key:"unit",text:"Unit",value:"unit"},{key:"size",text:"Size",value:"size"}],volumeOptions:[{key:"l",text:"Liter",value:1},{key:"m",text:"Milliliter",value:2},{key:"o",text:"Ounce",value:3},{key:"g",text:"Gallon",value:4},{key:"b",text:"Barrel",value:5}],sizeOptions:[{key:"ml",text:"Millimeter",value:1},{key:"cm",text:"Centimeter",value:2},{key:"m",text:"Meter",value:3},{key:"sm",text:"SquareMeter",value:4},{key:"cbm",text:"CubicMeter",value:5},{key:"in",text:"Inch",value:6},{key:"ft",text:"Foot",value:7}],sizev2Options:[{key:"linear",text:"linear",value:1},{key:"sqmeter",text:"sq. meter",value:2},{key:"cubicmeter",text:"cubic meter",value:3}],weightOptions:[{key:"mg",text:"Milligram",value:1},{key:"g",text:"Gram",value:2},{key:"kg",text:"Kilogram",value:3},{key:"tn",text:"Tonne",value:4}],paymentOptions:[{key:"cash",text:"Dinheiro",value:1},{key:"debit",text:"Debito",value:2},{key:"credit",text:"Credito",value:3},{key:"check",text:"Cheque",value:4},{key:"bc",text:"Bitcoins",value:5},{key:"dep",text:"Depositos",value:6},{key:"tr",text:"Transferencia",value:7},{key:"other",text:"other",value:8}],statusOptions:[{key:0,text:"All",value:null},{key:1,text:"Open",value:1},{key:2,text:"Partial",value:2},{key:3,text:"Closed",value:3},{key:4,text:"Quotation",value:4}]},js=function(e){var t=e.order,a=e.loadOrders,r=e.addToast,c=e.onClose,s=e.afterSave,i=e.initialValues,o=Object(me.a)("translation").t,l=Object(n.useState)(null===i||void 0===i?void 0:i.method),d=Object(j.a)(l,2),u=d[0],b=d[1],h=Object(n.useState)(null===i||void 0===i?void 0:i.amount),m=Object(j.a)(h,2),O=m[0],p=m[1],f=Object(n.useState)(null===i||void 0===i?void 0:i.fileLink),v=Object(j.a)(f,2),g=v[0],S=v[1],I=Object(n.useState)(!1),w=Object(j.a)(I,2),P=w[0],D=w[1],k=Object(n.useState)(!0),A=Object(j.a)(k,2),E=A[0],R=A[1],_=Object(n.useState)(!1),M=Object(j.a)(_,2),F=M[0],V=M[1],L=Object(n.useState)(!1),B=Object(j.a)(L,2),H=B[0],z=B[1],q=Object(n.useState)(null===i||void 0===i?void 0:i.chequeId),U=Object(j.a)(q,2),Y=U[0],X=U[1],W=Lt(null===t||void 0===t?void 0:t.organizationId),Q=Object(j.a)(W,1)[0],J=bt(t.totalCost-t.totalPaid),K=bt(.03*t.totalCost-.03*t.totalPaid),G=Q.map((function(e){var t=e.no,a=e.destinationBank,n=e.amount,r=e._id;return{text:"".concat(t," - ").concat(a," - (").concat(We.format(n),")"),value:r}}));(null===i||void 0===i?void 0:i.cheque)&&G.push({text:"".concat(i.cheque.no," (").concat(We.format(i.cheque.amount),")"),value:i.cheque._id});var $=function(){var e=Object(y.a)(C.a.mark((function e(){var n,c;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=+O,E&&!(u<=0)&&0!==n){e.next=3;break}return e.abrupt("return");case 3:return c={method:u,amount:+O,fileLink:g,chequeId:Y,orderId:t._id},V(!0),e.next=7,((null===i||void 0===i?void 0:i._id)?ts(t._id,i._id,c):es(t._id,c,t.organizationId)).then((function(e){(null===i||void 0===i?void 0:i._id)?r(o("transaction")+" "+o("changed successfully"),{appearance:"success"}):r(o("Payment added"),{appearance:"success"}),s()})).catch((function(e){z("err.error")}));case 7:V(!1),a();case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(x.jsxs)($t.a,{open:!0,onClose:c,style:{minWidth:"auto"},closeIcon:!0,children:[Object(x.jsx)($t.a.Header,{children:o("Add payment")}),Object(x.jsxs)($t.a.Content,{children:[Object(x.jsxs)("span",{children:[Object(x.jsxs)("strong",{children:[o("Total Cost"),":"]})," ",Object(x.jsx)("b",{children:bt(t.totalCost)})]}),Object(x.jsx)("br",{}),Object(x.jsxs)("span",{children:[Object(x.jsxs)("strong",{children:[o("Total Paid"),":"]})," ",bt(t.totalPaid)]}),Object(x.jsx)("br",{}),Object(x.jsxs)("span",{children:[Object(x.jsxs)("strong",{children:[o("Left to pay"),":"]})," ",J]}),Object(x.jsx)("br",{}),Object(x.jsxs)("span",{children:[Object(x.jsxs)("strong",{children:[o("Rates"),":"]})," ",K]}),Object(x.jsx)("br",{}),Object(x.jsx)("br",{}),Object(x.jsxs)(N.a,{firstName:"createAdminForm",size:"large",onSubmit:$,children:[Object(x.jsxs)(N.a.Group,{widths:"equal",children:[Object(x.jsx)(N.a.Input,{fluid:!0,placeholder:J,label:o("Amount")+" "+J,type:"number",step:.01,defaultValue:J,value:O,error:!E&&{content:"".concat(o("Enter amount between 0,1 and")," ").concat((null===i||void 0===i?void 0:i._id)?bt(t.totalCost):J),pointing:"above"},message:"sdvf",onChange:function(e){return p(e.target.value)},onBlur:function(){return R((e=O,a=(null===i||void 0===i?void 0:i._id)?Je(t.totalCost):Je(t.totalCost-t.totalPaid),e>0&&e<=a));var e,a}}),Object(x.jsx)(N.a.Input,{fluid:!0,placeholder:K,label:o("Rates")+" "+K,type:"number",step:.01,defaultValue:K,value:K}),Object(x.jsx)(N.a.Select,{fluid:!0,label:o("Payment Type"),options:us.paymentOptions,defaultValue:u,placeholder:o("Payment Type"),onChange:function(e,t){var a=t.value;return b(a)},required:!0}),Object(x.jsx)(N.a.Select,{fluid:!0,label:o("Cheque"),options:G,onChange:function(e,t){var a=t.value;return X(a)},required:4===u,disabled:4!==u,defaultValue:Y,search:!0}),g?Object(x.jsxs)("div",{className:"field",style:{alignSelf:"center",paddingTop:16},children:[Object(x.jsx)("a",{target:"_blank",href:"/assets/".concat(g),style:{marginRight:16},children:g}),Object(x.jsx)(T.a,{icon:"delete",onClick:function(){return S(void 0)}})]}):Object(x.jsx)(N.a.Input,{style:{width:"200px"},name:"file",label:o("Proof of payment"),type:"file",accept:".jpg, .jpeg, .pdf, .png",onChange:function(e){var a=e.target.files[0];D(!0),Zc(t._id,a).then((function(e){S(e.message)})).catch((function(e){r(o("failed to upload proof of payment"),{appearance:"error"})})).finally((function(){D(!1)}))}})]}),Object(x.jsx)(N.a.Group,{children:H&&Object(x.jsx)(ds.a,{color:"red",children:H})}),Object(x.jsxs)("div",{style:{textAlign:"right"},children:[Object(x.jsx)(T.a,{type:"button",onClick:c,children:o("Cancel")}),Object(x.jsx)(T.a,{type:"submit",loading:F,primary:!0,disabled:P,children:o("Submit")})]})]})]})]})},bs=a(1022),hs=a(1023),ms=a(1024),Os=a(1025),ps=a(1026),xs=a(1011),fs=a(1027),vs=a(1028),gs=2592e6,Cs=function(e){var t=e.id,a=e.status,r=e.paymentStatus,c=e.onUpdate,s=e.allowed,i=Object(me.a)(["translation"]).t,o=Object(n.useState)(!1),l=Object(j.a)(o,2),d=l[0],u=l[1],b=Object(n.useState)([]),h=Object(j.a)(b,2),m=h[0],O=h[1],p=Object(n.useState)(""),f=Object(j.a)(p,2),v=f[0],g=f[1],C=function(){return u(!1)};return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(da.a,{text:i(pe[a]),children:Object(x.jsx)(da.a.Menu,{children:pe.map((function(e,n){return Object(x.jsx)(da.a.Item,{text:i(e),onClick:8===n?function(){return u(!0)}:(o=n,function(){Gc(t,{processStatus:o}).then((function(){return c()}))}),disabled:8===n&&(7!==a||3!==r)||0===n||!s.includes(n)},e);var o}))})}),d&&Object(x.jsxs)($t.a,{closeIcon:!0,open:!0,onClose:C,children:[Object(x.jsx)($t.a.Header,{children:i("Conclude with Review")}),Object(x.jsxs)($t.a.Content,{children:[Object(x.jsxs)(N.a,{children:[Object(x.jsx)("div",{style:{marginBottom:16},children:Object(x.jsx)(qn.a,{onChange:function(e){var t=e.fileList;O(t)},fileList:m,action:"/api/assets/upload?entity=order",accept:"image/*,.pdf",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))},children:Object(x.jsx)(T.a,{children:i("Add files")})})}),Object(x.jsx)(N.a.Group,{widths:"equal",children:Object(x.jsx)(N.a.TextArea,{label:i("Client Review"),onChange:function(e,t){var a=t.value;g(a)}})})]}),Object(x.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end"},children:[Object(x.jsx)(T.a,{onClick:C,children:"Cancel"}),Object(x.jsxs)(T.a,{primary:!0,onClick:function(){Gc(t,{processStatus:8,documents:m.map((function(e){var t=e.response;return null===t||void 0===t?void 0:t.message})),comment:v}).then((function(){return c()}))},children:[i("Conclude")," ",i("Order")]})]})]})]})]})},ys=function(e){var t,a=(null===(t=(e.transactions||[]).sort((function(e,t){return t.createdAt-e.createdAt}))[0])||void 0===t?void 0:t.createdAt)||e.createdAt;return[1,2].includes(e.status)&&Date.now()-1e3*a>gs},Ss=function(e){var t=e.date,a=e.status;if(!t)return"-";var n,r,c=U()(t).format("DD/MM/YYYY"),s=U()(t).diff(U()(),"day");return a<7&&(s<=0?(n="rgba(255, 0, 0, 0.2)",r="\ud83d\udea8"):s>0&&s<=5&&(r=Object(x.jsx)("span",{style:{fontFamily:"Segoe UI Emoji"},children:"\u26a0\ufe0f "}),n="rgba(255, 255, 0, 0.2)")),Object(x.jsxs)("span",{style:{backgroundColor:n,padding:8},children:[r,c]})},Is=function(e){var t=e.orders,a=e.addToast,r=e.loadOrders,c=(e.setSelectedOrders,e.selectedOrders,e.showOrderUpdateModal),s=e.filters,i=e.pages,o=e.onPageChange,l=Object(me.a)(["translation"]).t,d=Object(n.useContext)(k).user,u=Object(n.useState)(void 0),b=Object(j.a)(u,2),h=b[0],m=b[1],O=Object(n.useState)(),p=Object(j.a)(O,2),f=p[0],v=p[1],g=(t||[]).filter((function(e){var t=e.processStatus,a=e.client,n=!((d.allowedStatuses||[]).length>0)||d.allowedStatuses.includes(t),r=6!==d.roleNumber||(null===a||void 0===a?void 0:a._id)===d._id;return n&&r})),C=function(){m(void 0)};function y(e){return e.map((function(e){return e.price})).reduce((function(e,t){return e+t}),0)}return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{style:{padding:25,display:"inline-block"},children:Object(x.jsx)(Gt.a,{activePage:s.currentPage,totalPages:i,onPageChange:function(e,t){var a=t.activePage;return o(a)}})}),Object(x.jsxs)("div",{component:bs.a,style:{border:"0px solid green",display:"inline-block",padding:"10px",backgroundColor:"lightgreen",fontWeight:"bold",margin:"10px",color:"green",boxShadow:"1px 1px 5px green"},children:[Object(x.jsxs)("b",{children:[l("Total Cost"),": "]}),We.format(t.reduce((function(e,t){return e+=t.totalCost,Number(e.toFixed(2))}),0))]}),Object(x.jsxs)("div",{component:bs.a,style:{border:"0px solid orange",display:"inline-block",padding:"10px",backgroundColor:"lightyellow",fontWeight:"bold",margin:"10px",color:"orange",boxShadow:"1px 1px 5px orange"},children:[Object(x.jsxs)("b",{children:[l("Total Paid"),": "]}),We.format(t.reduce((function(e,t){return e+=t.totalPaid,Number(e.toFixed(2))}),0))]}),Object(x.jsxs)("div",{component:bs.a,style:{border:"0px solid red",display:"inline-block",padding:"10px",backgroundColor:"pink",fontWeight:"bold",margin:"10px",color:"red",boxShadow:"1px 1px 5px red"},children:[Object(x.jsxs)("b",{children:[l("To Recieve"),": "]}),We.format(t.reduce((function(e,t){var a=t.totalCost-t.totalPaid;return Number((e+=a).toFixed(2))}),0))]}),Object(x.jsx)(hs.a,{component:bs.a,children:Object(x.jsxs)(ms.a,{stickyHeader:!0,sx:{minWidth:650},"aria-label":"sticky table",sortable:!0,children:[Object(x.jsx)(Os.a,{children:Object(x.jsxs)(ps.a,{children:[Object(x.jsx)(xs.a,{children:l("Actions")}),Object(x.jsx)(xs.a,{align:"right",children:l("ID")}),Object(x.jsx)(xs.a,{align:"right",children:l("Client")}),Object(x.jsx)(xs.a,{align:"right",children:l("Status")}),Object(x.jsx)(xs.a,{align:"right",children:l("Process Status")}),Object(x.jsx)(xs.a,{align:"right",children:l("Total Units")}),Object(x.jsx)(xs.a,{align:"right",children:l("Total Cost")}),Object(x.jsx)(xs.a,{align:"right",children:l("Total Paid")}),Object(x.jsx)(xs.a,{align:"right",children:l("To Recieve")}),Object(x.jsx)(xs.a,{align:"right",children:l("Est. Conlusion")}),Object(x.jsx)(xs.a,{align:"right",children:l("Created At")}),Object(x.jsx)(xs.a,{align:"right",children:l("Last Pay date")})]})}),Object(x.jsx)(fs.a,{children:g.map((function(e){var t=4===e.status&&Date.now()-1e3*e.createdAt>gs,n=We.format(e.totalCost-e.totalPaid);return Object(x.jsxs)(ps.a,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[Object(x.jsx)(xs.a,{component:"th",scope:"row",children:Object(x.jsxs)("div",{style:{display:"flex",gridAutoFlow:"column",columnGap:16},children:[([1].includes(d.roleNumber)||t)&&Object(x.jsx)(ns,{hasPayments:0!==e.totalPaid,id:e._id,addToast:a,loadOrders:r}),e.totalCost>e.totalPaid&&4!==e.status&&Object(x.jsx)("button",{onClick:function(){return function(e){m(e)}(e)},className:"table-action-btn",children:Object(x.jsx)(Kt.a,{name:"money bill alternate"})}),4===e.status&&Object(x.jsx)(ls,{id:e._id,addToast:a,loadOrders:r}),(4===e.status||1===d.roleNumber)&&Object(x.jsx)(T.a,{className:"table-action-btn",onClick:function(){return c(e._id)},children:Object(x.jsx)(Kt.a,{name:"pencil alternate"})})]})}),Object(x.jsx)(xs.a,{align:"right",children:Object(x.jsx)("a",{href:"/orders/view/".concat(e._id),children:e.orderId})}),Object(x.jsxs)(xs.a,{align:"right",children:[(e.client||{}).firstName," ",(e.client||{}).lastName]}),Object(x.jsx)(xs.a,{align:"right",children:Ze(l,e.status,t||ys(e))}),Object(x.jsx)(xs.a,{align:"right",children:4!==e.status&&Object(x.jsx)(Cs,{id:e._id,status:e.processStatus,onUpdate:r,paymentStatus:e.status,allowed:[1,2].includes(d.roleNumber)?Object(H.a)(pe.keys()):pe.map((function(e,t){return t})).filter((function(t){return e.processStatus+1===t}))})}),Object(x.jsx)(xs.a,{align:"right",style:{padding:16,width:25},children:Ke(e.totalUnits)}),Object(x.jsx)(xs.a,{align:"right",style:{padding:16,width:75},children:We.format(e.totalCost)}),Object(x.jsx)(xs.a,{align:"right",style:{padding:16,width:75},children:We.format(e.totalPaid)}),Object(x.jsxs)(xs.a,{align:"right",style:{padding:16,width:75,color:"red",backgroundColor:"pink",fontWeight:"bold"},children:[n,y]}),Object(x.jsx)(xs.a,{align:"right",style:{padding:16,width:160},children:Object(x.jsx)(Ss,{date:e.estConclusionDate,status:e.processStatus})}),Object(x.jsx)(xs.a,{align:"right",children:U()(1e3*e.createdAt).format("DD/MM/YYYY")}),Object(x.jsx)(xs.a,{align:"right",children:e.transactions.length>0?U()(1e3*e.transactions.sort((function(e,t){return t.createdAt-e.createdAt}))[0].createdAt).format("DD/MM/YYYY"):"-"})]},e._id)}))}),Object(x.jsxs)(vs.a,{children:[Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{}),Object(x.jsx)("th",{}),Object(x.jsx)("th",{}),Object(x.jsx)("th",{}),Object(x.jsx)("th",{}),Object(x.jsx)("th",{}),Object(x.jsx)("th",{style:{paddingLeft:"200px"},children:Object(x.jsx)(xs.a,{align:"left",style:{fontSize:"16px"},children:We.format(t.reduce((function(e,t){return e+=t.totalCost,Number(e.toFixed(2))}),0))})}),Object(x.jsx)("th",{style:{padding:"0"},children:Object(x.jsx)(xs.a,{align:"left",style:{fontSize:"16px"},children:We.format(t.reduce((function(e,t){return e+=t.totalPaid,Number(e.toFixed(2))}),0))})}),Object(x.jsx)("th",{style:{padding:"5px"},children:Object(x.jsx)(xs.a,{align:"left",style:{fontSize:"16px"},children:We.format(t.reduce((function(e,t){var a=t.totalCost-t.totalPaid;return Number((e+=a).toFixed(2))}),0))})}),Object(x.jsx)("th",{}),Object(x.jsx)("th",{}),Object(x.jsx)("th",{}),Object(x.jsx)("th",{})]}),Object(x.jsx)(ps.a,{children:Object(x.jsx)(xs.a,{colSpan:"20",style:{textAlign:"right"},children:Object(x.jsx)(Gt.a,{activePage:s.currentPage,totalPages:i,onPageChange:function(e,t){var a=t.activePage;return o(a)}})})})]})]})}),h&&Object(x.jsx)(js,{addToast:a,order:h,onClose:C,afterSave:function(){C(),r()},loadOrders:r}),f&&Object(x.jsx)(ua.a,{open:!0,onCancel:function(){return v(void 0)},onConfirm:function(){}})]})};Is.defaultProps={orders:[],isLoading:!0};var Ns=Is,ws={firstName:[mt],lastName:[mt],email:[mt],address:[mt],cpf:[{type:"string",len:11}],cnpj:[{type:"string",len:14}],zipCode:[mt,{type:"string",len:8}]},Ts={costContribution:[{name:"cost",value:0}],profitInPercentage:!1,identificationType:"pf",unitType:"unit",images:[]};var Ps=function(e){var t=e.onClose,a=e.afterSave,r=e.okText,c=e.initialValue,s=Object(me.a)(["translation"]).t,i=tt(s,ws),o=It(),l=o.insertedId,d=o.save,b=o.status,h=pa.a.useForm(),m=Object(j.a)(h,1)[0];Object(n.useEffect)((function(){b.isSuccess&&(qt.b.success(b.message),a(l))}),[b,l]);var O=c?Object(u.a)(Object(u.a)(Object(u.a)({},Ts),c),{},{identificationType:c.identificationType||"pf"}):Ts;return Object(x.jsxs)(Xa,{formID:"client-add-modal",onClose:t,okText:r,submitButtonProps:{loading:b.isLoading},width:800,organizationId:null===O||void 0===O?void 0:O.organizationId,children:[Object(x.jsxs)(pa.a,{form:m,layout:"vertical",id:"client-add-modal",initialValues:O,onFinish:function(e){var t=Object(u.a)(Object(u.a)({},e),{},{identificationType:e.identificationNumber?e.identificationType:void 0});d(t,null===c||void 0===c?void 0:c._id)},validateTrigger:"onFinish",children:[Object(x.jsxs)(fa.a,{gutter:16,children:[Object(x.jsx)(va.a,{span:12,children:Object(x.jsx)(pa.a.Item,{name:"firstName",label:s("First Name"),rules:i.firstName,children:Object(x.jsx)(xa.a,{})})}),Object(x.jsx)(va.a,{span:12,children:Object(x.jsx)(pa.a.Item,{name:"lastName",label:s("Last Name"),rules:i.lastName,children:Object(x.jsx)(xa.a,{})})})]}),Object(x.jsx)(pa.a.Item,{name:"address",label:s("Address"),rules:i.address,children:Object(x.jsx)(xa.a.TextArea,{rows:5,placeholder:"Sr. Luis Carvalho\nBoulevard das Flores 255\nSALVADOR-BA\nBRAZIL\n"})}),Object(x.jsxs)(fa.a,{gutter:16,children:[Object(x.jsx)(va.a,{span:4,children:Object(x.jsx)(pa.a.Item,{name:"identificationType",label:"\u2800",rules:i.identificationType,children:Object(x.jsxs)(ga.a.Group,{children:[Object(x.jsx)(ga.a.Button,{value:"pf",children:s("PF")}),Object(x.jsx)(ga.a.Button,{value:"pj",children:s("PJ")})]})})}),Object(x.jsx)(va.a,{span:8,children:Object(x.jsx)(pa.a.Item,{dependencies:["identificationType"],noStyle:!0,children:function(e){var t="pj"===(0,e.getFieldValue)("identificationType");return Object(x.jsx)(pa.a.Item,{name:"identificationNumber",label:s(t?"CNPJ":"CPF"),rules:t?i.cnpj:i.cpf,children:Object(x.jsx)(za,{format:t?"##.###.###/####-##":"###.###.###-##",placeholder:t?"00.000.000/0001-00":"000.000.000-00",valuePropName:"value"})})}})}),Object(x.jsx)(va.a,{span:8,children:Object(x.jsx)(pa.a.Item,{name:"zipCode",label:s("Zip Code"),rules:i.zipCode,children:Object(x.jsx)(za,{format:"#####-###",placeholder:"00000-000",valuePropName:"value"})})})]}),Object(x.jsxs)(fa.a,{gutter:16,children:[Object(x.jsx)(va.a,{span:8,children:Object(x.jsx)(pa.a.Item,{label:s("Email"),name:"email",rules:i.email,children:Object(x.jsx)(xa.a,{})})}),Object(x.jsx)(va.a,{span:8,children:Object(x.jsx)(pa.a.Item,{label:s("Landline Number"),name:"landlineNumber",rules:i.landlineNumber,trigger:"onValueChange",getValueFromEvent:function(e){return e.value},children:Object(x.jsx)(Sa.a,{customInput:xa.a,format:"(##) ##### - ####",placeholder:"(00) 00000 - 0000"})})}),Object(x.jsx)(va.a,{span:8,children:Object(x.jsx)(pa.a.Item,{label:s("Mobile Number"),name:"mobileNumber",rules:i.mobileNumber,trigger:"onValueChange",getValueFromEvent:function(e){return e.value},children:Object(x.jsx)(Sa.a,{customInput:xa.a,format:"(##) #### - ####",placeholder:"(00) 0000 - 0000"})})})]}),Object(x.jsxs)(fa.a,{gutter:16,children:[Object(x.jsx)(va.a,{span:8,children:Object(x.jsx)(pa.a.Item,{name:"password",label:s("Password"),rules:i.password,children:Object(x.jsx)(xa.a.Password,{})})}),Object(x.jsx)(va.a,{span:8,children:Object(x.jsx)(pa.a.Item,{name:"confirmPassword",label:s("Confirm Password"),dependencies:["password"],rules:[function(e){var t=e.getFieldValue;return{validator:function(e,a){return t("password")&&t("password")!==a?Promise.reject(new Error(s("passwords do not match"))):Promise.resolve()}}}],children:Object(x.jsx)(xa.a.Password,{})})})]})]}),b.isError&&Object(x.jsx)(ya.a,{message:b.message,type:"error"})]})},Ds=(a(949),["productId","amount"]),ks=us.paymentOptions.map((function(e){var t=e.value;return{label:e.text,value:t}})),As=function(e){var t,a,n,r=e.file;if("removed"===r.status)return[];(null===r||void 0===r||null===(t=r.response)||void 0===t?void 0:t.message)&&(r.uid=null===r||void 0===r||null===(a=r.response)||void 0===a?void 0:a.message,r.url="/uploads/".concat(null===r||void 0===r||null===(n=r.response)||void 0===n?void 0:n.message));return[r]},Es={required:!0},Rs=[Es],_s={discount:[Es,{max:40,min:0,type:"number"}]},Ms={products:[],discount:0};var Fs=function(e){var t=e.onClose,a=e.afterPlace,r=e.initialValue,c=e.isQuotation,s=void 0!==c&&c,i=e.okText,o=Object(me.a)(["translation"]).t,l=Object(n.useState)(!1),d=Object(j.a)(l,2),b=d[0],h=d[1],m=je(),O=m.save,p=m.status,f=ie(),v=f.options,g=f.status,C=f.refresh,y=pa.a.useForm(),S=Object(j.a)(y,1)[0],I=function(e,t,a){var n=S.getFieldValue("products"),r=n.find((function(t){return t._id===e}));r.quantity=t,r.measurementValue=a,S.setFieldsValue({products:null}),S.setFieldsValue({products:n})},N=function(e,t){var a=S.getFieldValue("products");a.find((function(t){return t._id===e})).comment=t,S.setFieldsValue({products:a})},w=function(e){var t=S.getFieldValue("products"),a=t.findIndex((function(t){return t._id===e}));S.setFieldsValue({products:null}),S.setFieldsValue({products:[].concat(Object(H.a)(t.slice(0,a)),Object(H.a)(t.slice(a+1)))})},T=function(){h(!0)};Object(n.useEffect)((function(){p.isSuccess&&(qt.b.success(o("pedido adicionado com sucesso")),a()),p.isError&&qt.b.error(p.message)}),[p,a]);var P=new Set,D=r?{products:r.items.map((function(e){var t=e.productId,a=e.amount,n=Object(Ba.a)(e,Ds),r=P.has(t)?Symbol(t):t;return P.add(t),Object(u.a)({_id:r,__id:t,quantity:a},n)})),clientId:(r.client||{})._id,comment:r.comment,discount:r.discount,estConclusionDate:r.estConclusionDate?U()(r.estConclusionDate):void 0}:Ms;return Object(x.jsxs)(Xa,{className:"order-place-form-modal",formID:"order-place-form",okText:i,onClose:t,submitButtonProps:{loading:p.isLoading},width:"100%",style:{top:16},organizationId:null===D||void 0===D?void 0:D.organizationId,children:[Object(x.jsxs)(pa.a,{id:"order-place-form",layout:"vertical",form:S,onFinish:function(e){var t=[],a=S.getFieldValue("products");for(var n in a){var c=a[n];c.quantity&&t.push({productId:c.__id,amount:c.quantity,title:c.title,price:c.price,cost:c.cost,comment:c.comment,measurementValue:c.measurementValue})}O(null===r||void 0===r?void 0:r._id,Object(u.a)(Object(u.a)(Object(u.a)({},r),e),{},{isQuotation:s,estConclusionDate:e.estConclusionDate&&1e3*e.estConclusionDate.unix(),items:t}))},initialValues:D,preserve:!1,onValuesChange:console.log,children:[Object(x.jsx)(pa.a.Item,{wrapperCol:{span:24},shouldUpdate:!0,children:function(e){var t=e.getFieldValue;return Object(x.jsxs)("div",{style:{textAlign:"right",fontSize:"1.2em",marginBottom:15,color:"green",fontWeight:700},children:[o("Total"),": ",We.format(st(t("products"),t("discount")))]})}}),Object(x.jsx)(Aa.a,{style:{minHeight:355},children:Object(x.jsx)(Pn,{onAdd:function(e){var t=S.getFieldValue("products"),a=t.findIndex((function(t){return t._id===e._id})),n=(null===a||void 0===a?void 0:a.quantity)||0;if(e.isService||s||n!==e.totalUnits)if(-1===a){var r={_id:e._id,__id:e._id,title:e.title,price:e.price,cost:e.cost,quantity:1,images:e.images,chargeDuration:e.chargeDuration,measurementType:e.measurementType,measurementValue:e.measurementValue};S.setFieldsValue({products:[r].concat(Object(H.a)(t))})}else t[a].quantity+=1,S.setFieldsValue({products:t})},onAddAsNew:function(e){var t,a=S.getFieldValue("products"),n=(null===(t=a[e._id])||void 0===t?void 0:t.quantity)||0;if(e.isService||s||n!==e.totalUnits){var r={_id:Symbol(e._id),__id:e._id,title:e.title,price:e.price,cost:e.cost,quantity:1,images:e.images,chargeDuration:e.chargeDuration,measurementType:e.measurementType,measurementValue:e.measurementValue};S.setFieldsValue({products:[r].concat(Object(H.a)(a))})}},enableOutOfStock:s})}),Object(x.jsx)(Aa.a,{style:{minHeight:"25%"},children:Object(x.jsx)(va.a,{children:Object(x.jsx)(pa.a.Item,{className:"products-form-item",rules:Rs,shouldUpdate:!0,children:function(e){var t=e.getFieldValue;return Object(x.jsx)(Rn,{products:t("products"),onQuantityChange:I,onCommentChange:N,onDelete:w})}})})}),Object(x.jsxs)(Aa.a,{style:{minHeight:"25%"},children:[Object(x.jsx)(va.a,{children:Object(x.jsx)(pa.a.Item,{name:"clientId",label:o("Client"),rules:Rs,children:Object(x.jsx)(Ca.a,{options:v,loading:g.isLoading,dropdownRender:function(e){return Object(x.jsxs)("div",{children:[e,Object(x.jsx)(at.a,{onClick:T,block:!0,children:"+ Add Client"})]})},filterOption:function(e,t){return t.label.toLowerCase().indexOf(e.toLowerCase())>=0},showSearch:!0})})}),Object(x.jsx)(va.a,{children:Object(x.jsx)(pa.a.Item,{label:o("% Discount"),name:"discount",trigger:"onValueChange",getValueFromEvent:function(e){return e.floatValue},rules:_s.discount,children:Object(x.jsx)(Sa.a,{customInput:xa.a,thousandSeparator:".",decimalSeparator:","})})}),Object(x.jsx)(va.a,{children:Object(x.jsx)(pa.a.Item,{label:o("Conclude By"),name:"estConclusionDate",children:Object(x.jsx)(Cr.a,{format:"DD/MM/YYYY",style:{width:"100%"}})})}),!s&&!(null===r||void 0===r?void 0:r._id)&&Object(x.jsx)(pa.a.Item,{dependencies:["isQuotation"],noStyle:!0,children:function(e){var t=e.getFieldValue;return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(va.a,{children:Object(x.jsx)(pa.a.Item,{name:"paid",label:o("Paid Amount"),children:Object(x.jsx)(za,{disabled:!!t("isQuotation")})})}),Object(x.jsx)(va.a,{children:Object(x.jsx)(pa.a.Item,{name:"paymentMethod",label:o("Payment Method"),children:Object(x.jsx)(Ca.a,{options:ks,disabled:!!t("isQuotation")})})}),Object(x.jsx)(va.a,{children:Object(x.jsx)(pa.a.Item,{label:"\u2800",name:"proofOfPayment",getValueFromEvent:As,valuePropName:"fileList",shouldUpdate:!0,children:Object(x.jsx)(qn.a,{action:"/api/assets/upload?entity=transaction",accept:"image/*, .pdf",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))},children:Object(x.jsx)(at.a,{disabled:!!t("isQuotation"),children:o("Upload Proof")})})})})]})}})]}),Object(x.jsx)(Aa.a,{title:o("Comment"),bordered:!1,style:{width:"100%"},children:Object(x.jsx)(pa.a.Item,{name:"comment",children:Object(x.jsx)(xa.a.TextArea,{placeholder:o("Comment"),style:{width:"100%"},rows:5})})})]}),p.isError&&Object(x.jsx)(ya.a,{message:p.message,type:"error"}),b&&Object(x.jsx)(Ps,{afterSave:function(e){h(!1),C(),S.setFieldsValue({clientId:e})},onClose:function(){return h(!1)},okText:"".concat(o("Add")," ").concat(o("Client"))})]})},Vs=(a(950),2592e6),Ls=function(e){var t,a=(null===(t=(e.transactions||[]).sort((function(e,t){return t.createdAt-e.createdAt}))[0])||void 0===t?void 0:t.createdAt)||e.createdAt;return[1,2].includes(e.status)&&Date.now()-1e3*a>Vs},Bs=function(e){return 4===e.status&&Date.now()-1e3*e.createdAt>Vs},Hs=function(e){return 1e3*e.createdAt>U()().subtract(7,"days").unix()&&1===e.status};function zs(e){var t=this,a=Object(me.a)("translation").t,r=Object(n.useContext)(k).user,c=e.addToast,s=e.location,i=ve(),o=i.data,l=i.total,d=i.pages,u=i.all,b=i.search,h=i.goto,m=i.filters,O=i.status,p=i.refresh,f=Object(n.useState)(!1),v=Object(j.a)(f,2),g=v[0],C=v[1],y=Object(n.useState)(!1),S=Object(j.a)(y,2),I=S[0],N=S[1],w=Object(n.useState)(!1),T=Object(j.a)(w,2),P=T[0],D=T[1],A=Object(n.useState)(!1),E=Object(j.a)(A,2),R=E[0],_=E[1],M=Object(n.useState)(!1),F=Object(j.a)(M,2),V=F[0],L=F[1],B=Object(n.useState)([]),H=Object(j.a)(B,2),z=H[0],q=H[1],Y=Object(n.useState)(!1),X=Object(j.a)(Y,2),W=X[0],Q=X[1],J=Object(n.useState)(void 0),K=Object(j.a)(J,2),G=K[0],$=K[1],Z=new URLSearchParams(s.search),ee=Number(Z.get("status")),te=Number(Z.get("paymentStatus")),ae=Object(n.useState)(ee>-1?ee:void 0),ne=Object(j.a)(ae,2),re=ne[0],ce=ne[1],se=Object(n.useState)(te>-1?te:void 0),ie=Object(j.a)(se,2),oe=ie[0],le=ie[1],de=function(){$(void 0),Q(!1),N(!1)},ue=function(){de(),p()};Object(n.useEffect)((function(){O.isSuccess&&(re>0||oe>0?m.setPredicate((function(e){var t=e.processStatus,a=e.status;return(!(re>0)||t===re)&&(!(oe>0)||a===oe)})):m.setPredicate(void 0))}),[re,oe,O]),Object(n.useEffect)((function(){g||u.some(Bs)&&(c(a("You have quotations older than 30 days"),{appearance:"warning",autoDismissTimeout:1e4}),C(!0))}),[u]),Object(n.useEffect)((function(){P||u.some(Ls)&&(c(a("You have orders haven't received payment since 30 days"),{appearance:"warning",autoDismissTimeout:1e4}),D(!0))}),[u]),Object(n.useEffect)((function(){if(!V||!R){for(var e=!1,t=!1,n=0;n<u.length;n++){var r=u[n];if(r.estConclusionDate&&![8].includes(r.processStatus)){var s=U()(r.estConclusionDate).diff(U()(),"day");s<=0&&(e=!0),s<=5&&s>0&&(t=!0)}}e&&(c(a("You are due to conclude order(s)"),{appearance:"error",autoDismissTimeout:1e4}),L(!0)),t&&(c(a("You are near due to conclude order(s)"),{appearance:"warning",autoDismissTimeout:1e4}),_(!0))}}),[u]);var je=!(!r.isRep&&8!==r.roleNumber||!(r.maxOrders>0))&&u.filter(Hs).length===r.maxOrders,be=o.find((function(e){return e._id===G})),he=be?I?a("Update")+" "+a("Quotation"):a("Update")+" "+a("Order"):I?a("Create")+" "+a("Quotation"):a("Place")+" "+a("Order");return O.isLoading?Object(x.jsx)(Wt,{}):Object(x.jsxs)("div",{className:"container",children:[Object(x.jsx)("h2",{children:a("Orders")}),(W||be&&4!==be.status)&&Object(x.jsx)(Fs,{addToast:e.addToast,onClose:de,afterPlace:ue,initialValue:be,okText:he}),(I||4===(null===be||void 0===be?void 0:be.status))&&Object(x.jsx)(Fs,{addToast:e.addToast,onClose:de,afterPlace:ue,initialValue:be,okText:he,isQuotation:I||4===be.status}),Object(x.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(x.jsxs)("div",{children:[Object(x.jsxs)("span",{style:{marginRight:16},children:[a("Total"),": ",l," / ",o.length]}),Object(x.jsx)(xa.a.Search,{style:{marginRight:16,width:200},placeholder:a("Search"),onChange:function(e){b(e.target.value)},value:m.searchText,allowClear:!0}),Object(x.jsxs)(ga.a.Group,{onChange:function(e){switch(e.target.value){case"latePayments":m.setPredicate(Ls);break;case"expiredQuotes":m.setPredicate(Bs);break;default:m.setPredicate(void 0)}},defaultValue:"",style:{marginRight:16},children:[Object(x.jsx)(ga.a.Button,{value:"",children:a("All")}),Object(x.jsx)(ga.a.Button,{value:"latePayments",children:a("Late Payments")}),Object(x.jsx)(ga.a.Button,{value:"expiredQuotes",children:a("Exp. Quotations")})]}),Object(x.jsx)(Ca.a,{defaultValue:re,onChange:ce,style:{width:200,marginRight:16},placeholder:a("Status"),allowClear:!0,children:pe.map((function(e,t){return Object(x.jsx)(Ca.a.Option,{value:t,children:a(e)})}))}),Object(x.jsx)(Ca.a,{defaultValue:oe,onChange:le,style:{width:200},allowClear:!0,placeholder:a("Payment Status"),children:xe.map((function(e,t){return Object(x.jsx)(Ca.a.Option,{value:t,children:a(e)})}))})]}),Object(x.jsxs)("div",{children:[z.length>0&&Object(x.jsx)(at.a,{style:{marginLeft:16},onClick:function(){Promise.all(z.map((function(e){return $c(e,{deleteTrxs:!1})}))).then((function(e){t.props.addToast(a("Orders deleted successfully"),{appearance:"success"})})).catch((function(e){""!==e.message?t.props.addToast(a("Could not delete orders")+": "+e.message,{appearance:"error"}):t.props.addToast(a("Something went wrong"),{appearance:"error"})})).finally((function(){q([]),p()}))},className:"negative",children:a("Delete Selected")}),[1,2,3,4,8].includes(r.roleNumber)&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(Ya,{style:{marginRight:16},onClick:function(){return N(!0)},type:"primary",disabled:je,children:je?a("you reached limit"):a("Create")+" "+a("Quotation")}),Object(x.jsx)(Ya,{onClick:function(){return Q(!0)},type:"primary",disabled:je,children:je?a("you reached limit"):a("Create")+" "+a("Order")})]})]})]}),Object(x.jsx)(Ns,{loadOrders:p,filters:m,addToast:e.addToast,orders:o,selectedOrders:z,setSelectedOrders:q,showOrderUpdateModal:$,admin:e.admin,pages:d,onPageChange:h})]})}zs.defaultProps={orders:[],isLoading:!0};var qs=zs;var Us=function(e){var t=e.addToast,a=Object(me.a)(["translation"]).t,r=yt(),c=r.data,s=r.total,i=r.pages,o=r.search,l=r.goto,d=(r.sort,r.filters),u=(r.status,r.refresh),b=Nt();console.log("roles :>> ",b);var h=It(),m=h.del,O=h.status,p=Object(n.useState)(!1),f=Object(j.a)(p,2),v=f[0],g=f[1],C=Object(n.useState)(),y=Object(j.a)(C,2),S=y[0],I=y[1],N=Object(n.useState)(),w=Object(j.a)(N,2),T=w[0],P=w[1],D=function(){return g(!1)},k=function(){return I(void 0)},A=function(){return P()};return Object(n.useEffect)((function(){(O.isError||O.isSuccess)&&(t(O.message,{appearance:O.toString().toLowerCase()}),O.isSuccess&&(k(),A(),u()))}),[O]),Object(x.jsxs)("div",{className:"container",children:[Object(x.jsxs)("div",{className:"list-actions",children:[Object(x.jsxs)("span",{children:[a("Total"),": ",s]}),Object(x.jsx)("div",{style:{marginLeft:16,marginRight:16},children:Object(x.jsx)(xa.a.Search,{placeholder:a("Search"),onChange:function(e){o(e.target.value)},value:d.searchText,allowClear:!0})}),Object(x.jsxs)(Ya,{type:"primary",onClick:function(){return g(!0)},children:[a("Add")," ",a("Client")]})]}),Object(x.jsxs)(Jt.a,{celled:!0,children:[Object(x.jsx)(Jt.a.Header,{children:Object(x.jsxs)(Jt.a.Row,{children:[Object(x.jsx)(Jt.a.HeaderCell,{children:a("Actions")}),Object(x.jsx)(Jt.a.HeaderCell,{children:a("ID")}),Object(x.jsx)(Jt.a.HeaderCell,{children:a("First Name")}),Object(x.jsx)(Jt.a.HeaderCell,{children:a("Last Name")}),Object(x.jsx)(Jt.a.HeaderCell,{children:a("Email")}),Object(x.jsx)(Jt.a.HeaderCell,{children:a("Mobile Number")}),Object(x.jsxs)(Jt.a.HeaderCell,{children:[a("CPF")," / ",a("CNPJ")]}),Object(x.jsx)(Jt.a.HeaderCell,{children:a("Address")}),Object(x.jsx)(Jt.a.HeaderCell,{children:a("Zip Code")})]})}),Object(x.jsx)(Jt.a.Body,{children:c.map((function(e){return Object(x.jsxs)(Jt.a.Row,{children:[Object(x.jsx)(Jt.a.Cell,{children:Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(at.a,{className:"margin-right",icon:Object(x.jsx)(nt.a,{}),type:"danger",onClick:(a=e._id,function(){return P(a)}),size:"small",ghost:!0}),Object(x.jsx)(at.a,{className:"margin-right",icon:Object(x.jsx)(rt.a,{}),onClick:(t=e,function(){return I(t)}),size:"small"})]})}),Object(x.jsx)(Jt.a.Cell,{children:e._id}),Object(x.jsx)(Jt.a.Cell,{children:e.firstName}),Object(x.jsx)(Jt.a.Cell,{children:e.lastName}),Object(x.jsx)(Jt.a.Cell,{children:e.email}),Object(x.jsx)(Jt.a.Cell,{children:Object(x.jsx)(Sa.a,{customInput:Mn,defaultValue:e.mobileNumber,format:"(##) #### - ####",readOnly:!0})}),Object(x.jsx)(Jt.a.Cell,{children:Object(x.jsx)(Sa.a,{customInput:Mn,defaultValue:e.identificationNumber,format:"pj"===e.identificationType?"##.###.###/####-##":"###.###.###-##",readOnly:!0})}),Object(x.jsx)(Jt.a.Cell,{style:{whiteSpace:"pre"},children:e.address}),Object(x.jsx)(Jt.a.Cell,{children:Object(x.jsx)(Sa.a,{customInput:Mn,defaultValue:e.zipCode,format:"#####\u2013###",readOnly:!0})})]},e._id);var t,a}))}),Object(x.jsx)(Jt.a.Footer,{children:Object(x.jsx)(Jt.a.Row,{children:Object(x.jsx)(Jt.a.HeaderCell,{colSpan:"20",style:{textAlign:"right"},children:Object(x.jsx)(Gt.a,{activePage:d.currentPage,totalPages:i,onPageChange:function(e,t){var a=t.activePage;return l(a)}})})})})]}),(v||S)&&Object(x.jsx)(Ps,{afterSave:function(){D(),k(),u()},onClose:function(){D(),k()},okText:"".concat(a(S?"Update":"Add")," ").concat(a("Client")),initialValue:S}),T&&Object(x.jsx)(ua.a,{open:!0,content:a("Are you sure you want to delete")+" ?",onCancel:A,onConfirm:function(){return m(T)},cancelButton:a("No"),confirmButton:a("Delete")})]})},Ys=a(235),Xs={required:!0},Ws={name:[Xs],email:[Xs,{type:"email"}],password:[Xs],organizationId:[Xs],phoneNumber:[Xs,{len:11}],role:[Xs]},Qs={documents:[{name:"",url:""}],departmentIds:[],salary:{"13thDates":[]},organizationIds:[]},Js=function(e){var t,a,n,r=e.file;if("removed"===r.status)return[];(null===r||void 0===r||null===(t=r.response)||void 0===t?void 0:t.message)&&(r.uid=null===r||void 0===r||null===(a=r.response)||void 0===a?void 0:a.message,r.url="/uploads/".concat(null===r||void 0===r||null===(n=r.response)||void 0===n?void 0:n.message));return[r]};var Ks=function(e,t){return 1!==t.length?Promise.reject("non-superadmins can only have one org"):Promise.resolve()};var Gs=function(e){var t=e.onClose,a=e.okText,r=e.okButtonProps,c=e.onSave,s=e.initialValues,i=pa.a.useForm(),o=Object(j.a)(i,1)[0],l=Object(n.useState)([]),d=Object(j.a)(l,2),b=d[0],h=d[1],m=L("/api/admins/roles"),O=Object(j.a)(m,1)[0],p=(O=void 0===O?{data:[]}:O).data,f=Xe().options,v=function(){var e=B("/api/v2/organizations",Vt),t=Object(j.a)(e,3),a=t[0];return[(a=void 0===a?{data:[]}:a).data,t[1],t[2]]}(),g=Object(j.a)(v,1)[0],C=p.map((function(e){var t=e.roleNumber;return{label:e.name,value:t}})),y=g.map((function(e){var t=e._id;return{label:e.title,value:t}}));Object(n.useEffect)((function(){Qc().then((function(e){h(Object.entries(e).map((function(e){var t=Object(j.a)(e,2),a=t[0],n=t[1];return{value:Number(a),label:n}})))}))}),[]);var S=s?Object(u.a)(Object(u.a)({},s),{},{password:"",departmentIds:s.departmentIds||[],allowedStatuses:s.allowedStatuses||[],organizationIds:s.organizationIds||[],branchIds:s.branchIds||[],documents:s.documents||[],salary:Object(u.a)(Object(u.a)({},s.salary),{},{"13thDates":((s.salary||{})["13thDates"]||[]).map((function(e){return U()(e).format("DD/MM/YYYY")}))})}):Qs,I=g.reduce((function(e,t){var a=t.branches,n=t._id;return e.concat((a||[]).map((function(e){return{value:e._id,label:e.title,organizationId:n}})))}),[]);return console.log("denormInitValue :>> ",S),Object(x.jsx)(ln.a,{componentSize:"middle",children:Object(x.jsx)(lt.a,{title:a,onClose:t,visible:!0,okText:a,okButtonProps:Object(u.a)({form:"user-add-modal",htmlType:"submit"},r),onCancel:t,width:1124,maskClosable:!1,keyboard:!1,children:Object(x.jsxs)(pa.a,{layout:"vertical",id:"user-add-modal",form:o,onValuesChange:function(e){e.salary13thDate&&(console.log(o.getFieldValue(["salary","13thDates"])),o.setFieldsValue({salary13thDate:"",salary:{"13thDates":[].concat(Object(H.a)(o.getFieldValue(["salary","13thDates"])),[e.salary13thDate.format("DD/MM/YYYY")])}})),e.organizationIds&&o.setFieldsValue({branchIds:[]})},initialValues:S,onFinish:function(e){c(Object(u.a)(Object(u.a)({},e),{},{salary:Object(u.a)(Object(u.a)({},e.salary),{},{"13thDates":e.salary["13thDates"].map((function(e){return U()(e,"DD/MM/YYYY").unix()}))}),documents:e.documents.map((function(e){var t;return{name:e.name,url:null===(t=e.url[0])||void 0===t?void 0:t.uid}}))}))},size:"middle",children:[Object(x.jsxs)(fa.a,{gutter:16,children:[Object(x.jsx)(va.a,{span:4,children:Object(x.jsx)(pa.a.Item,{label:"Nome",name:"firstName",rules:Ws.firstName,children:Object(x.jsx)(xa.a,{})})}),Object(x.jsx)(va.a,{span:4,children:Object(x.jsx)(pa.a.Item,{label:"Sobre Nome",name:"lastName",rules:Ws.lastName,children:Object(x.jsx)(xa.a,{})})}),Object(x.jsx)(va.a,{span:6,children:Object(x.jsx)(pa.a.Item,{label:"Email",name:"email",rules:Ws.email,children:Object(x.jsx)(xa.a,{type:"email"})})}),Object(x.jsx)(va.a,{span:6,children:Object(x.jsx)(pa.a.Item,{label:"Senha",name:"password",rules:s?void 0:Ws.password,children:Object(x.jsx)(xa.a.Password,{})})}),Object(x.jsx)(va.a,{span:4,children:Object(x.jsx)(pa.a.Item,{label:"Tel.",name:"landlineNumber",rules:Ws.landlineNumber,trigger:"onValueChange",getValueFromEvent:function(e){return e.value},children:Object(x.jsx)(Sa.a,{customInput:xa.a,format:"(##) ##### - ####",placeholder:"(00) 00000 - 0000"})})})]}),Object(x.jsxs)(fa.a,{gutter:16,children:[Object(x.jsx)(va.a,{span:4,children:Object(x.jsx)(pa.a.Item,{label:"Perfil",name:"roleNumber",rules:Ws.role,children:Object(x.jsx)(Ca.a,{options:C})})}),Object(x.jsx)(va.a,{span:10,children:Object(x.jsx)(pa.a.Item,{noStyle:!0,dependencies:["roleNumber"],children:function(e){var t=e.getFieldValue;return Object(x.jsx)(pa.a.Item,{label:"Empresa",name:"organizationIds",rules:[].concat(Object(H.a)(1===t("roleNumber")?[]:[Xs]),Object(H.a)(1!==t("roleNumber")?[{validator:Ks,message:"Apenas Super Admin e Vendedores podem participar de mais de 1 empresa"}]:[])),children:Object(x.jsx)(Ca.a,{mode:"multiple",options:y})})}})}),Object(x.jsx)(va.a,{span:10,children:Object(x.jsx)(pa.a.Item,{dependencies:["organizationIds","roleNumber"],noStyle:!0,children:function(e){var t=e.getFieldValue;return Object(x.jsx)(pa.a.Item,{name:"branchIds",label:"Filial",rules:3===t("roleNumber")?[Xs]:void 0,children:Object(x.jsx)(Ca.a,{mode:"multiple",options:I.filter((function(e){var a=e.organizationId;return t("organizationIds").includes(a)})),disabled:3!==t("roleNumber")})})}})})]}),Object(x.jsxs)(fa.a,{gutter:16,children:[Object(x.jsx)(va.a,{span:3,children:Object(x.jsx)(pa.a.Item,{dependencies:["roleNumber"],noStyle:!0,children:function(e){var t=e.getFieldValue;return Object(x.jsx)(pa.a.Item,{className:"ant-form-item-inline",label:"\xc9 vendendor?",name:"isRep",rules:Ws.isRep,valuePropName:"checked",children:Object(x.jsx)(Ys.a,{disabled:3!==t("roleNumber")})})}})}),Object(x.jsx)(va.a,{span:5,children:Object(x.jsx)(pa.a.Item,{dependencies:["roleNumber","isRep"],noStyle:!0,children:function(e){var t=e.getFieldValue;return Object(x.jsxs)(fa.a,{gutter:16,children:[Object(x.jsx)(va.a,{span:12,children:Object(x.jsx)(pa.a.Item,{label:"% por venda",name:"commission",rules:Ws.commission,trigger:"onValueChange",getValueFromEvent:function(e){return e.floatValue},children:Object(x.jsx)(Sa.a,{customInput:xa.a,thousandSeparator:".",decimalSeparator:",",disabled:!(8===t("roleNumber")||t("isRep"))})})}),Object(x.jsx)(va.a,{span:12,children:Object(x.jsx)(pa.a.Item,{label:"Max. pedidos 7 dias",name:"maxOrders",rules:Ws.commission,trigger:"onValueChange",getValueFromEvent:function(e){return e.floatValue},children:Object(x.jsx)(Sa.a,{customInput:xa.a,thousandSeparator:".",decimalSeparator:",",disabled:!(8===t("roleNumber")||t("isRep"))})})})]})}})}),Object(x.jsx)(va.a,{span:8,children:Object(x.jsx)(pa.a.Item,{dependencies:["roleNumber","organizationIds"],noStyle:!0,children:function(e){var t=e.getFieldValue;return Object(x.jsx)(pa.a.Item,{label:"Departamentos",name:"departmentIds",rules:Ws.departmentIds,children:Object(x.jsx)(Ca.a,{mode:"multiple",options:f.filter((function(e){return e.organizationId===t("organizationIds")[0]})),disabled:3!==t("roleNumber")})})}})}),Object(x.jsx)(va.a,{span:8,children:Object(x.jsx)(pa.a.Item,{dependencies:["roleNumber"],noStyle:!0,children:function(e){var t=e.getFieldValue;return Object(x.jsx)(pa.a.Item,{label:"Status Pedidos",name:"allowedStatuses",rules:Ws.allowedStatuses,children:Object(x.jsx)(Ca.a,{mode:"multiple",options:b,disabled:3!==t("roleNumber")})})}})})]}),Object(x.jsxs)(fa.a,{gutter:16,children:[Object(x.jsx)(va.a,{span:4,children:Object(x.jsx)(pa.a.Item,{label:"Sal\xe1rio",name:["salary","salary"],rules:Ws.salary,trigger:"onValueChange",getValueFromEvent:function(e){return e.floatValue},children:Object(x.jsx)(Sa.a,{customInput:xa.a,thousandSeparator:".",decimalSeparator:","})})}),Object(x.jsx)(va.a,{span:8,children:Object(x.jsx)(pa.a.Item,{label:"Frequencia",name:["salary","frequency"],rules:Ws.frequency,children:Object(x.jsxs)(ga.a.Group,{children:[Object(x.jsx)(ga.a.Button,{value:"daily",children:"Dia"}),Object(x.jsx)(ga.a.Button,{value:"weekly",children:"Semana"}),Object(x.jsx)(ga.a.Button,{value:"15days",children:"15 Dias"}),Object(x.jsx)(ga.a.Button,{value:"monthly",children:"M\xeas"})]})})}),Object(x.jsx)(va.a,{span:3,children:Object(x.jsx)(pa.a.Item,{className:"ant-form-item-inline",label:"13\xb0 Sal\xe1rio",name:["salary","13th"],rules:Ws["13thSalary"],valuePropName:"checked",children:Object(x.jsx)(Ys.a,{})})}),Object(x.jsx)(va.a,{span:9,children:Object(x.jsx)(pa.a.Item,{dependencies:[["salary","13th"]],noStyle:!0,children:function(e){var t=e.getFieldValue;return Object(x.jsxs)(fa.a,{children:[Object(x.jsx)(va.a,{span:18,children:Object(x.jsx)(pa.a.Item,{label:"13\xb0 Data",name:["salary","13thDates"],children:Object(x.jsx)(Ca.a,{mode:"tags",disabled:!0!==t(["salary","13th"])})})}),Object(x.jsx)(va.a,{span:6,children:Object(x.jsx)(pa.a.Item,{label:"\u2800",name:"salary13thDate",children:Object(x.jsx)(Cr.a,{disabled:!0!==t(["salary","13th"])})})})]})}})})]}),Object(x.jsx)(Ka,{label:"Arquivos",name:"documents",children:function(e){return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(pa.a.Item,{name:[e.name,"name"],fieldKey:[e.fieldKey,"name"],rules:[Xs],children:Object(x.jsx)(xa.a,{placeholder:"File Name"})}),Object(x.jsx)(pa.a.Item,{name:[e.name,"url"],fieldKey:[e.fieldKey,"url"],rules:Ws.frontImageUrl,getValueFromEvent:Js,children:Object(x.jsx)(qn.a,{action:"/assets/upload?entity=user",accept:"image/*,.pdf",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))},children:Object(x.jsx)(at.a,{children:"Enviar"})})})]})}})]})})})},$s=function(e){var t=e.value;return Object(x.jsx)("span",{children:t})},Zs={SUCCESS:function(e,t){return"".concat(e," ").concat(t).concat(t.endsWith("e")?"":"e","d successfully!")},ERROR:function(e,t){return"status change"===t?"failed to change status of ".concat(e):"failed to ".concat(t," ").concat(e)}};var ei=function(e){var t=function(){var e=Object(n.useState)([]),t=Object(j.a)(e,2),a=Object(j.a)(t[0],3),r=a[0],c=a[1],s=a[2],i=t[1],o=Object(n.useMemo)((function(){return"add"===s&&c?["/api/admins",{method:"POST",body:JSON.stringify(c)}]:"update"===s&&r&&c?["/api/admins/".concat(r),{method:"PUT",body:JSON.stringify(c)}]:"delete"===s&&r?["/api/admins/".concat(r),{method:"DELETE"}]:"status change"===s&&r&&c?["/api/admins/".concat(r,"/status"),{method:"POST",body:JSON.stringify(c)}]:[void 0,void 0]}),[c,s,r]),l=L.apply(void 0,Object(H.a)(o)),d=Object(j.a)(l,2)[1];return d.action=s,d.message=Zs[d.code]?Zs[d.code]("user",s):"",[function(e){return i([void 0,e,"add"])},function(e,t){return i([t,e,"update"])},function(e){return i([e,void 0,"delete"])},d]}(),a=Object(j.a)(t,4),r=a[0],c=a[1],s=a[2],i=a[3],o=Z("/api/admins","*"),l=Object(j.a)(o,8),d=l[0],u=l[1],b=u.total,h=u.pages,m=l[2],O=l[3],p=l[5],f=l[7],v=Object(n.useState)(!1),g=Object(j.a)(v,2),C=g[0],y=g[1],S=Object(n.useState)(),I=Object(j.a)(S,2),N=I[0],w=I[1],P=Object(n.useState)(),D=Object(j.a)(P,2),k=D[0],A=D[1],E=function(){return w(void 0)},R=function(){return A(void 0)};Object(n.useEffect)((function(){(i.isError||i.isSuccess)&&(e.addToast(i.message,{appearance:i.toString().toLowerCase()}),i.isSuccess&&(_(),E(),R(),f()))}),[i]);var _=function(){return y(!1)};return Object(x.jsxs)("div",{className:"container",children:[Object(x.jsxs)("div",{children:[Object(x.jsx)("h2",{style:{display:"inline",marginRight:16},children:"Admins"}),Object(x.jsxs)("span",{children:["Total admins: ",b]}),Object(x.jsxs)("div",{class:"ui action input",style:{marginLeft:16},children:[Object(x.jsx)(Qt.a,{type:"text",placeholder:"Search...",onChange:function(e){m(e.target.value)},value:p.searchText}),Object(x.jsx)("button",{class:"ui icon button",onClick:function(){m("")},children:Object(x.jsx)("i",{class:"delete icon"})})]}),Object(x.jsx)("div",{style:{float:"right"},children:Object(x.jsx)(T.a,{onClick:function(){return y(!0)},primary:!0,children:"Add User"})})]}),Object(x.jsxs)(Jt.a,{celled:!0,children:[Object(x.jsx)(Jt.a.Header,{children:Object(x.jsxs)(Jt.a.Row,{children:[Object(x.jsx)(Jt.a.HeaderCell,{children:"Actions"}),Object(x.jsx)(Jt.a.HeaderCell,{children:"ID"}),Object(x.jsx)(Jt.a.HeaderCell,{children:"First Name"}),Object(x.jsx)(Jt.a.HeaderCell,{children:"Last Name"}),Object(x.jsx)(Jt.a.HeaderCell,{children:"Email"}),Object(x.jsx)(Jt.a.HeaderCell,{children:"Landline Number"}),Object(x.jsx)(Jt.a.HeaderCell,{children:"Role"}),Object(x.jsx)(Jt.a.HeaderCell,{children:"Organization"}),Object(x.jsx)(Jt.a.HeaderCell,{children:"Documents"})]})}),Object(x.jsx)(Jt.a.Body,{children:d.map((function(e){return Object(x.jsxs)(Jt.a.Row,{children:[Object(x.jsxs)(Jt.a.Cell,{children:[Object(x.jsx)(T.a,{icon:"edit",basic:!0,onClick:(a=e,function(){return w(a)}),size:"mini"}),Object(x.jsx)(T.a,{icon:"trash alternate",negative:!0,basic:!0,onClick:(t=e._id,function(){return A(t)}),size:"mini"})]}),Object(x.jsx)(Jt.a.Cell,{children:e._id}),Object(x.jsx)(Jt.a.Cell,{children:e.firstName}),Object(x.jsx)(Jt.a.Cell,{children:e.lastName}),Object(x.jsx)(Jt.a.Cell,{children:e.email}),Object(x.jsx)(Jt.a.Cell,{children:Object(x.jsx)(Sa.a,{customInput:$s,defaultValue:e.landlineNumber,format:"(##) ##### - ####",readOnly:!0})}),Object(x.jsx)(Jt.a.Cell,{children:(e.role||{}).name}),Object(x.jsx)(Jt.a.Cell,{children:e.organizations.map((function(e){return e.title})).join(",")}),Object(x.jsx)(Jt.a.Cell,{children:(e.documents||[]).map((function(e){var t=e.name,a=e.url;return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("a",{href:a,target:"_blank",children:t}),Object(x.jsx)("br",{})]})}))})]},e._id);var t,a}))}),Object(x.jsx)(Jt.a.Footer,{children:Object(x.jsx)(Jt.a.Row,{children:Object(x.jsx)(Jt.a.HeaderCell,{colSpan:"20",style:{textAlign:"right"},children:Object(x.jsx)(Gt.a,{activePage:p.currentPage,totalPages:h,onPageChange:function(e,t){var a=t.activePage;return O(a)}})})})})]}),C&&Object(x.jsx)(Gs,{okText:__("Add User"),onClose:_,onSave:r}),N&&Object(x.jsx)(Gs,{onSave:function(e){return c(e,N._id)},onClose:E,initialValues:N,okButtonProps:{disabled:i.isLoading},okText:__("Update User")}),k&&Object(x.jsx)(ua.a,{open:!0,content:"Deseja mesmo remover o Usu\xe1rio?",onCancel:R,onConfirm:function(){return s(k)},cancelButton:"N\xe3o",confirmButton:"Sim, Remover"})]})},ti=a(1004),ai=a(1020),ni=a(1021),ri=function(e){Object(Na.a)(a,e);var t=Object(wa.a)(a);function a(e){var n;return Object(A.a)(this,a),(n=t.call(this,e)).fetchTransactions=function(){as(n.props.id).then((function(e){return n.setState({trxs:e.data},(function(){return console.log(n.state)}))})).catch((function(e){return n.props.addToast("Could not fetch related transactions",{appearance:"error"})}))},n.fetchOrderAndTransactions=function(){Jc(n.props.id).then((function(e){return n.setState({order:e})})).catch((function(e){return n.props.addToast("Could not fetch order",{appearance:"error"})})),n.fetchTransactions()},n.handleEdit=function(e){return function(){n.setState({transactionToEdit:e})}},n.handleDelete=function(e){return function(){n.setState({transactionToDelete:e})}},n.handleConfirmDelete=function(){var e=n.props.t;Kc(n.state.order._id,n.state.transactionToDelete).then((function(t){n.props.addToast(e("Transaction")+" "+e("deleted successfully"),{appearance:"success"}),n.closeDeleteConfirmation(),n.fetchOrderAndTransactions()})).catch((function(t){n.props.addToast(e("Could not delete")+" "+e("transaction"),{appearance:"error"}),n.closeDeleteConfirmation()}))},n.closeTransactionEditModal=function(){n.setState({transactionToEdit:void 0})},n.handleAfterTransactionSave=function(){n.setState({transactionToEdit:void 0},n.fetchOrderAndTransactions)},n.closeDeleteConfirmation=function(){n.setState({transactionToDelete:void 0})},n.showQR=function(){n.setState({shouldShowQR:!0})},n.hideQR=function(){n.setState({shouldShowQR:!1})},n.prepareTransactionsTable=function(e){var t=n.props.t;return Object(x.jsx)(Jt.a.Body,{children:e.map((function(e){var a;return Object(x.jsxs)(Jt.a.Row,{children:[Object(x.jsx)(Jt.a.Cell,{className:"noprint",children:[1,2].includes(n.props.admin.roleNumber)&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(T.a,{icon:"edit",basic:!0,onClick:n.handleEdit(e),size:"mini"}),Object(x.jsx)(T.a,{icon:"trash alternate",negative:!0,basic:!0,onClick:n.handleDelete(e._id),size:"mini"})]})}),Object(x.jsx)(Jt.a.Cell,{children:U()(1e3*e.createdAt).format("DD/MM/YYYY")}),Object(x.jsxs)(Jt.a.Cell,{children:[null===(a=us.paymentOptions.find((function(t){return t.value===e.method})))||void 0===a?void 0:a.text,Object(x.jsx)("br",{}),4===e.method&&e.chequeId&&Object(x.jsxs)(b.a,{to:"/cheques",children:["(",e.chequeId,")"]})]}),Object(x.jsx)(Jt.a.Cell,{children:We.format(e.amount)}),Object(x.jsx)(Jt.a.Cell,{children:e.fileLink&&Object(x.jsxs)("a",{target:"_blank",href:"/assets/".concat(e.fileLink),children:["\ud83d\udcce ",t("attachment")]})}),Object(x.jsx)(Jt.a.Cell,{children:e.comment})]},e._id)}))})},n.state={order:{items:[]},trxs:[],transactionToEdit:void 0,transactionToDelete:void 0,shouldShowQR:!1},n}return Object(E.a)(a,[{key:"componentDidMount",value:function(){this.fetchOrderAndTransactions()}},{key:"render",value:function(){var e,t,a,n,r,c,s,i,o,l,d,u=this.state.order,j=u.items,b=this.props.t,h=j.reduce((function(e,t){return t.measurementValue.reduce((function(e,t){return e*t}),1)*t.price*t.amount+e}),0);return Object(x.jsxs)("div",{style:{display:"grid"},children:[Object(x.jsxs)("div",{className:"container",children:[Object(x.jsxs)("div",{className:"noprint",children:["    ",Object(x.jsxs)(ti.a,{children:[Object(x.jsx)(ti.a.Item,{href:"/",children:Object(x.jsx)(ai.a,{})}),Object(x.jsxs)(ti.a.Item,{href:"/orders",children:[Object(x.jsx)(ni.a,{}),Object(x.jsx)("span",{children:b("Orders")})]}),Object(x.jsx)(ti.a.Item,{children:b("Detalhes")})]})]}),Object(x.jsxs)(T.a,{primary:!0,className:"noprint",style:{marginBottom:16,float:"right"},onClick:function(){return window.print()},children:[Object(x.jsx)("i",{class:"print icon"}),b("Print")]}),Object(x.jsx)(qc,{className:"noprint",style:{marginBottom:16,float:"right"},fileName:null===(e=this.state.order)||void 0===e?void 0:e._id}),Object(x.jsxs)(Ea.b,{title:b("Invoice"),bordered:!0,children:[Object(x.jsx)(Ea.b.Item,{children:Object(x.jsx)(Ga,{organization:this.state.order.organization})}),Object(x.jsxs)(Ea.b.Item,{children:[b("Order ID"),":\xa0",Object(x.jsxs)("strong",{children:[u.orderId,":"]}),"\xa0\xa0",b("Total Items"),":\xa0",Object(x.jsx)("strong",{children:Ke(u.totalUnits)}),Object(x.jsx)("br",{}),b("Created At"),":\xa0",Object(x.jsx)("strong",{children:Ge(u.createdAt)}),Object(x.jsx)("br",{}),b("Created By")," ",(null===(t=u.user)||void 0===t?void 0:t.firstName)+" "+(null===(a=u.user)||void 0===a?void 0:a.lastName),Object(x.jsx)("br",{}),b("Last Pay date"),":\xa0",Object(x.jsx)("strong",{children:this.state.trxs.length>0?U()(1e3*this.state.trxs.sort((function(e,t){return t.createdAt-e.createdAt}))[0].createdAt).format("DD/MM/YYYY"):"-"})]}),Object(x.jsxs)(Ea.b.Item,{children:[b("Bill To"),Object(x.jsx)("h5",{children:Object(x.jsx)("strong",{children:(null===(n=this.state.order.client)||void 0===n?void 0:n.firstName)+" "+(null===(r=this.state.order.client)||void 0===r?void 0:r.lastName)})}),null===(c=this.state.order.client)||void 0===c?void 0:c.address,Object(x.jsx)("br",{}),null===(s=this.state.order.client)||void 0===s?void 0:s.cellNumber,Object(x.jsx)("strong",{children:Ze(b,u.status)})]})]}),Object(x.jsx)("br",{}),Object(x.jsxs)(Jt.a,{celled:!0,className:"noprint",children:[Object(x.jsx)(Jt.a.Header,{children:Object(x.jsxs)(Jt.a.Row,{children:[Object(x.jsx)(Jt.a.HeaderCell,{children:b("Property")}),Object(x.jsx)(Jt.a.HeaderCell,{children:b("Value")})]})}),Object(x.jsxs)(Jt.a.Body,{children:[Object(x.jsxs)(Jt.a.Row,{children:[Object(x.jsx)(Jt.a.Cell,{}),Object(x.jsx)(Jt.a.Cell,{})]}),Object(x.jsxs)(Jt.a.Row,{className:"noprint",children:[Object(x.jsx)(Jt.a.Cell,{children:b("Total Cost")}),Object(x.jsx)(Jt.a.Cell,{children:We.format(u.totalCost)})]}),Object(x.jsxs)(Jt.a.Row,{className:"noprint",children:[Object(x.jsx)(Jt.a.Cell,{children:b("Total Paid")}),Object(x.jsx)(Jt.a.Cell,{children:We.format(u.totalPaid)})]}),Object(x.jsx)(Jt.a.Row,{className:"noprint"}),Object(x.jsxs)(Jt.a.Row,{className:"noprint",children:[Object(x.jsx)(Jt.a.Cell,{children:b("Comment")}),Object(x.jsx)(Jt.a.Cell,{children:u.comment})]}),Object(x.jsxs)(Jt.a.Row,{className:"noprint",children:[Object(x.jsx)(Jt.a.Cell,{children:b("Est. Conclusion Date")}),Object(x.jsx)(Jt.a.Cell,{children:u.estConclusionDate?U()(u.estConclusionDate).format("DD/MM/YYYY"):"-"})]}),Object(x.jsxs)(Jt.a.Row,{className:"noprint",children:[Object(x.jsx)(Jt.a.Cell,{children:b("Client")}),Object(x.jsx)(Jt.a.Cell,{children:u.client&&u.client.firstName+" "+u.client.lastName})]}),Object(x.jsxs)(Jt.a.Row,{className:"noprint",children:[Object(x.jsx)(Jt.a.Cell,{children:b("Documents")}),Object(x.jsx)(Jt.a.Cell,{children:(u.documents||[]).map((function(e){return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("a",{href:e,target:"_blank",children:e}),Object(x.jsx)("br",{})]})}))})]})]})]}),Object(x.jsx)("h4",{children:b("Products")}),Object(x.jsxs)(Jt.a,{celled:!0,children:[Object(x.jsx)(Jt.a.Header,{children:Object(x.jsxs)(Jt.a.Row,{children:[Object(x.jsx)(Jt.a.HeaderCell,{children:b("Title")}),Object(x.jsx)(Jt.a.HeaderCell,{children:b("Comment")}),Object(x.jsx)(Jt.a.HeaderCell,{children:b("Unit Price")}),Object(x.jsx)(Jt.a.HeaderCell,{children:b("Dimensions")}),Object(x.jsx)(Jt.a.HeaderCell,{children:b("Quantity")}),Object(x.jsx)(Jt.a.HeaderCell,{children:b("Total")})]})}),Object(x.jsxs)(Jt.a.Body,{children:[this.state.order.items.map((function(e){return Object(x.jsxs)(Jt.a.Row,{children:[Object(x.jsx)(Jt.a.Cell,{children:e.title}),Object(x.jsx)(Jt.a.Cell,{children:e.comment}),Object(x.jsx)(Jt.a.Cell,{children:We.format(e.price)}),Object(x.jsx)(Jt.a.Cell,{children:ot(e.measurementValue)}),Object(x.jsx)(Jt.a.Cell,{children:Ke(e.amount)}),Object(x.jsx)(Jt.a.Cell,{children:We.format(e.measurementValue.reduce((function(e,t){return e*t}),1)*e.amount*e.price)})]},e.productId)})),Object(x.jsxs)(Jt.a.Row,{children:[Object(x.jsx)(Jt.a.Cell,{colspan:"5",textAlign:"right",children:Object(x.jsx)("strong",{children:b("Gross Total")})}),Object(x.jsx)(Jt.a.Cell,{children:Object(x.jsx)("strong",{children:We.format(h)})})]}),Object(x.jsxs)(Jt.a.Row,{children:[Object(x.jsx)(Jt.a.Cell,{colspan:"5",textAlign:"right",children:b("Discount")}),Object(x.jsxs)(Jt.a.Cell,{children:["- ",We.format(h-u.totalCost)," (",this.state.order.discount,"%)"]})]}),Object(x.jsxs)(Jt.a.Row,{children:[Object(x.jsx)(Jt.a.Cell,{colspan:"5",textAlign:"right",children:Object(x.jsx)("strong",{children:b("Total")})}),Object(x.jsx)(Jt.a.Cell,{children:Object(x.jsx)("strong",{children:We.format(this.state.order.totalCost)})})]})]})]}),Object(x.jsx)("h4",{children:b("Transactions")}),Object(x.jsxs)(Jt.a,{celled:!0,children:[Object(x.jsx)(Jt.a.Header,{children:Object(x.jsxs)(Jt.a.Row,{children:[Object(x.jsx)(Jt.a.HeaderCell,{className:"noprint",children:b("Actions")}),Object(x.jsx)(Jt.a.HeaderCell,{children:b("Date")}),Object(x.jsx)(Jt.a.HeaderCell,{children:b("Method")}),Object(x.jsx)(Jt.a.HeaderCell,{children:b("Amount")}),Object(x.jsx)(Jt.a.HeaderCell,{children:b("Proof")}),Object(x.jsx)(Jt.a.HeaderCell,{children:b("Comment")})]})}),this.prepareTransactionsTable(this.state.trxs)]}),this.state.transactionToEdit&&Object(x.jsx)(js,{order:this.state.order,addToast:this.props.addToast,initialValues:this.state.transactionToEdit,loadOrders:this.fetchTransactions,onClose:this.closeTransactionEditModal,afterSave:this.handleAfterTransactionSave}),this.state.transactionToDelete&&Object(x.jsx)(ua.a,{open:!0,content:b("Are you sure you want to delete")+" "+b("transaction")+" ?",onCancel:this.closeDeleteConfirmation,onConfirm:this.handleConfirmDelete,cancelButton:b("No"),confirmButton:b("Yes")}),Object(x.jsx)(La.a,{style:{textAlign:"center",marginTop:5},className:"printonly",id:"qr-canvas",value:window.location.href,size:50})]}),Object(x.jsx)("div",{className:"noprint",style:{padding:"20px 5%"},children:this.props.admin._id===(null===(i=this.state.order.user)||void 0===i?void 0:i._id)&&1===(null===(o=this.state.order.user)||void 0===o?void 0:o.roleNumber)&&[2,3,8].includes(this.state.order.status)&&Object(x.jsx)(_c.a,{children:Object(x.jsxs)(_c.a.Content,{children:[Object(x.jsx)(_c.a.Header,{content:b("Your Commission")}),Object(x.jsx)(_c.a.Description,{content:Object(x.jsxs)("div",{style:{textAlign:"center",marginTop:16},children:[Object(x.jsx)("span",{style:{color:"#508cfe",fontSize:24,fontWeight:"bold",marginRight:8},children:We.format((null===(l=this.state.order.user)||void 0===l?void 0:l.commission)*this.state.order.totalCost/100)}),Object(x.jsxs)("span",{children:["(","".concat(null===(d=this.state.order.user)||void 0===d?void 0:d.commission," %"),")"]})]})})]})})})]})}}]),a}(r.a.Component),ci=Object(gc.a)("translation")(ri),si=a(998),ii=["onChange","defaultValue"],oi=function(e){var t=e.keyCode;return!0===e.shiftKey||35===t||36===t||8===t||9===t||13===t||46===t||t>36&&t<41||(!0===e.ctrlKey||!0===e.metaKey)&&(65===t||67===t||86===t||88===t||90===t)},li=function(e){(function(e){var t=e.keyCode;return t>=48&&t<=57||t>=96&&t<=105})(e)||oi(e)||e.preventDefault()},di=function(e){oi(e)||(e.target.value=ui(e.target.value))},ui=function(e){var t=e.replace(/\D/g,"").substring(0,11),a=t.substring(0,2),n=t.substring(2,7),r=t.substring(7,11);return t.length>7?"(".concat(a,") ").concat(n," - ").concat(r):t.length>2?"(".concat(a,") ").concat(n):t.length>0?"(".concat(a):void 0},ji=function(e){var t=e.onChange,a=e.defaultValue,n=Object(Ba.a)(e,ii);return Object(x.jsx)(N.a.Input,Object(u.a)({placeholder:"(00) 00000 - 0000",onKeyDown:li,onKeyUp:di,onChange:function(e){t(Number(e.target.value.replace(/\D/g,"").substring(0,11)))},maxLength:17,defaultValue:a?ui(a.toString()):void 0},n))},bi=["onUpload","fileList"];var hi=function(e){var t=e.onUpload,a=e.fileList,r=Object(Ba.a)(e,bi),c=Object(n.useState)([]),s=Object(j.a)(c,2),i=s[0],o=s[1];return Object(n.useEffect)((function(){o(a)}),[a]),Object(x.jsx)(qn.a,Object(u.a)(Object(u.a)({accept:".jpg, .jpeg, .png",listType:"picture-card",fileList:i,onChange:function(e){var a=e.fileList,n=e.file;o(a),"done"===n.status&&t(n.response)},headers:{Authorization:"Bearer "+localStorage.getItem("token")}},r),{},{children:0===i.length&&Object(x.jsxs)("div",{children:[Object(x.jsx)(Wa.a,{}),Object(x.jsx)("div",{style:{marginTop:8},children:"Upload logo"})]})}))},mi=function(e){var t=e.org,a=void 0===t?{}:t,c=e.submit,s=e.addToast,i=e.componentName,o=e.loadOrgs,l=Object(n.useState)(!1),d=Object(j.a)(l,2),u=d[0],b=d[1],h=Object(n.useState)(a.title),m=Object(j.a)(h,2),O=m[0],p=m[1],f=Object(n.useState)(!0),v=Object(j.a)(f,2),g=v[0],S=v[1],I=Object(n.useState)(null===a||void 0===a?void 0:a.logoUrl),w=Object(j.a)(I,2),P=w[0],D=w[1],k=Object(n.useState)(a.description),A=Object(j.a)(k,2),E=A[0],R=A[1],_=Object(n.useState)(!0),M=Object(j.a)(_,2),F=M[0],V=M[1],L=Object(n.useState)(a.branches||[]),B=Object(j.a)(L,2),z=B[0],q=B[1],U=Object(n.useState)(!1),Y=Object(j.a)(U,2),X=Y[0],W=Y[1],Q=function(){var e=Object(y.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(F&&g&&!X){e.next=3;break}return e.abrupt("return");case 3:return W(!0),e.next=6,c({title:O,description:E,branches:z,logoUrl:P}).then((function(e){s("Organization ".concat(a.title?"updated":"created"," successfully"),{appearance:"success"}),window.location.reload()})).catch((function(e){s(e.message,{appearance:"error"})}));case 6:W(!1),K();case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),J=function(){b(!u)},K=function(){o(),J(),p(""),S(!0),R(""),V(!0)},G=function(e,t,a){var n=z;n[a][t]=e,console.log("newBranches :>> ",n),q(n)};Object(n.useEffect)((function(){V(cr(E,5,0))}),[E]);var $=Object(n.useMemo)((function(){return P?[{uid:"0",name:"logo.png",status:"done",headers:{Authorization:"Bearer "+localStorage.getItem("token")},url:P}]:[]}),[P]);return Object(x.jsxs)($t.a,{trigger:Object(x.jsxs)(T.a,{onClick:J,className:"Edit"===i?"table-action-btn":"generic-create-btn",children:[" ","Edit"===i?Object(x.jsx)(Kt.a,{name:"pencil"}):Object(x.jsx)("span",{children:i})]}),closeIcon:!0,open:u,onClose:K,children:[Object(x.jsxs)($t.a.Header,{children:[i," a organization"]}),Object(x.jsx)($t.a.Content,{children:Object(x.jsxs)(N.a,{name:"createOrgForm",size:"large",children:[Object(x.jsx)(N.a.Input,{fluid:!0,placeholder:"Titulo",label:"Titulo",value:O,error:!g,onChange:function(e){return p(e.target.value)},onBlur:function(){return S(cr(O,3,0))}}),Object(x.jsx)(N.a.TextArea,{fluid:!0,placeholder:"Descri\xe7\xe3o",label:"Descri\xe7\xe3o",value:E,error:!F,onChange:function(e){return R(e.target.value)}}),Object(x.jsx)(hi,{onUpload:function(e){var t=e.message;return D(t)},action:"/assets/upload?entity=organization",accept:".jpg, .jpeg",name:"file",fileList:$}),Object(x.jsx)(ac.a,{}),z.map((function(e,t){return Object(x.jsxs)(r.a.Fragment,{children:[Object(x.jsxs)(N.a.Group,{widths:"equal",children:[Object(x.jsx)(N.a.Input,{fluid:!0,placeholder:"Titulo",label:"Branch # "+t+" title",value:e.title,error:!cr(O,3,0),onChange:function(e){return G(e.target.value,"title",t)},onBlur:function(){return S(cr(O,3,0))}}),Object(x.jsx)(ji,{label:"Phone Number",onChange:function(e){return G(e,"phoneNumber",t)},defaultValue:e.phoneNumber})]},e._id),Object(x.jsx)(N.a.TextArea,{fluid:!0,placeholder:"Descri\xe7\xe3o",label:"Branch # "+t+" description",defaultValue:e.description,error:!cr(e.description,3,0),onChange:function(e){return G(e.target.value,"description",t)}})]},e._id)})),Object(x.jsx)(N.a.Button,{fluid:!0,onClick:function(){q([].concat(Object(H.a)(z),[{id:z.length}]))},children:"Add a branch"}),Object(x.jsx)(T.a,{onClick:Q,color:"teal",fluid:!0,size:"small",loading:X,primary:!0,children:"Submit"})]})})]})},Oi=function(e){var t=e.orgs,a=e.filters,n=e.pages,r=e.onPageChange,c=e.addToast,s=e.loadOrgs,i=e.handleDelete;return Object(x.jsxs)(Jt.a,{celled:!0,children:[Object(x.jsx)(Jt.a.Header,{children:Object(x.jsxs)(Jt.a.Row,{children:[Object(x.jsx)(Jt.a.HeaderCell,{children:"Actions"}),Object(x.jsx)(Jt.a.HeaderCell,{children:"OrganizationID"}),Object(x.jsx)(Jt.a.HeaderCell,{children:"ID"}),Object(x.jsx)(Jt.a.HeaderCell,{children:"Titulo"}),Object(x.jsx)(Jt.a.HeaderCell,{children:"Descri\xe7\xe3o"}),Object(x.jsx)(Jt.a.HeaderCell,{children:"Branches "})]})}),Object(x.jsx)(Jt.a.Body,{children:t.map((function(e){return Object(x.jsxs)(Jt.a.Row,{children:[Object(x.jsxs)(Jt.a.Cell,{children:[Object(x.jsx)(T.a,{style:{marginRight:16},icon:"trash alternate",negative:!0,basic:!0,onClick:i(e._id),size:"mini"}),Object(x.jsx)(mi,{org:e,submit:function(t){return vc(e._id,t)},addToast:c,componentName:"Edit",loadOrgs:s})]}),Object(x.jsx)(Jt.a.Cell,{children:e._id}),Object(x.jsx)(Jt.a.Cell,{children:e.organizationId}),Object(x.jsx)(Jt.a.Cell,{children:e.title}),Object(x.jsx)(Jt.a.Cell,{children:e.description}),Object(x.jsx)(Jt.a.Cell,{children:Object(x.jsx)(si.a,{bulleted:!0,children:e.branches&&e.branches.map((function(e){return Object(x.jsx)(si.a.Item,{children:e.title})}))})})]})}))}),Object(x.jsx)(Jt.a.Footer,{children:Object(x.jsx)(Jt.a.Row,{children:Object(x.jsx)(Jt.a.HeaderCell,{colSpan:"20",style:{textAlign:"right"},children:Object(x.jsx)(Gt.a,{activePage:a.currentPage,totalPages:n,onPageChange:function(e,t){var a=t.activePage;return r(a)}})})})})]})},pi=a(987),xi=lt.a.confirm;var fi=function(e,t,a){xi({title:e,icon:Object(x.jsx)(pi.a,{}),okText:t,cancelText:"No",onOk:function(){a()}})};var vi=function(e){var t=Z("/api/v2/organizations","*"),a=Object(j.a)(t,8),r=a[0],c=a[1],s=c.total,i=c.pages,o=a[2],l=a[3],d=(a[4],a[5]),u=(a[6],a[7]),b=Fe(),h=b.del,m=b.status;return Object(n.useEffect)((function(){(m.isError||m.isSuccess)&&(e.addToast(m.message,{appearance:m.toString().toLowerCase()}),m.isSuccess&&(localStorage.removeItem("organizationId"),window.location.reload()))}),[m]),Object(x.jsxs)("div",{className:"container",children:[Object(x.jsx)("h2",{children:"Organizations"}),Object(x.jsx)(mi,{addToast:e.addToast,loadOrgs:u,componentName:"Create",submit:fc}),Object(x.jsxs)("div",{children:[Object(x.jsxs)("span",{children:["Total organizations: ",s]}),Object(x.jsxs)("div",{class:"ui action input",style:{marginLeft:16},children:[Object(x.jsx)(Qt.a,{type:"text",placeholder:"Search...",onChange:function(e){o(e.target.value)},value:d.searchText}),Object(x.jsx)("button",{class:"ui icon button",onClick:function(){o("")},children:Object(x.jsx)("i",{class:"delete icon"})})]})]}),Object(x.jsx)(Oi,{orgs:r,addToast:e.addToast,filters:d,loadOrgs:u,pages:i,onPageChange:l,handleDelete:function(e){return function(){fi("This will delete everything related to organization. Do you want to continue ?","Delete",(function(){return h(e)}))}}})]})},gi=new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format,Ci={required:!0},yi={method:[Ci],amount:[Ci,{min:1,type:"number"}]},Si=function(e){var t,a,n,r,c=e.fileList,s=c.slice(-1)[0];if("removed"===(null===s||void 0===s?void 0:s.status))return c.slice(0,-1);(null===s||void 0===s||null===(t=s.response)||void 0===t?void 0:t.message)&&(s.uid=null===s||void 0===s||null===(a=s.response)||void 0===a?void 0:a.message,s.url=null===s||void 0===s||null===(n=s.response)||void 0===n?void 0:n.message,s.name=null===s||void 0===s||null===(r=s.response)||void 0===r?void 0:r.message);return c};var Ii=function(e){var t=e.okText,a=e.onClose,r=e.onSave,c=e.initialValues,s=Object(me.a)(["translation"]).t,i=pa.a.useForm(),o=Object(j.a)(i,1)[0],l=Lt(),d=Object(j.a)(l,2),b=d[0],h=d[1],m=function(e,t){var a=b.reduce((function(e,a){return t.includes(a._id)?e+a.amount:e+0}),0);return o.getFieldValue("amount")>a?Promise.reject(""):Promise.resolve()},O=b.map((function(e){var t=e._id,a=e.no,n=e.amount;return{label:"".concat(a," (").concat(We.format(n),")"),value:t}})),p=Object(n.useMemo)((function(){return{amount:null===c||void 0===c?void 0:c.amount}}),[c]);return Object(x.jsx)(lt.a,{title:t,onClose:a,visible:!0,okText:t,okButtonProps:{form:"make-payment-modal",htmlType:"submit"},onCancel:a,width:800,maskClosable:!1,keyboard:!1,children:Object(x.jsxs)(pa.a,{layout:"vertical",id:"make-payment-modal",onFinish:function(e){r(Object(u.a)(Object(u.a)({},e),{},{chequeIds:e.chequeIds}))},initialValues:p,form:o,children:[Object(x.jsxs)(fa.a,{gutter:16,children:[Object(x.jsx)(va.a,{span:6,children:Object(x.jsx)(pa.a.Item,{label:s("Amount"),name:"amount",rules:yi.amount,trigger:"onValueChange",getValueFromEvent:function(e){return e.floatValue},children:Object(x.jsx)(Sa.a,{customInput:xa.a,thousandSeparator:".",decimalSeparator:","})})}),Object(x.jsx)(va.a,{span:8,children:Object(x.jsx)(pa.a.Item,{label:s("Method of Payment"),name:"method",rules:yi.method,children:Object(x.jsxs)(Ca.a,{children:[Object(x.jsx)(Ca.a.Option,{value:"cheque",children:s("Cheque")}),Object(x.jsx)(Ca.a.Option,{value:"cash",children:s("Cash")}),Object(x.jsx)(Ca.a.Option,{value:"credit card",children:s("Credit Card")}),Object(x.jsx)(Ca.a.Option,{value:"debit card",children:s("Debit Card")}),Object(x.jsx)(Ca.a.Option,{value:"boleto",children:s("Boleto")}),Object(x.jsx)(Ca.a.Option,{value:"deposit",children:s("Deposit")})]})})}),Object(x.jsx)(va.a,{span:10,children:Object(x.jsx)(pa.a.Item,{dependencies:["method","amount"],noStyle:!0,children:function(e){var t=e.getFieldValue;return Object(x.jsx)(pa.a.Item,{label:s("Cheques"),name:"chequeIds",rules:"cheque"===t("method")?[{validator:m,message:s("cheque total should be >= expense amount")}]:void 0,children:Object(x.jsx)(Ca.a,{mode:"multiple",options:O,loading:h.isLoading,disabled:"cheque"!==t("method"),allowClear:!0})})}})})]}),Object(x.jsxs)(fa.a,{children:[Object(x.jsx)(va.a,{span:12,children:Object(x.jsx)(pa.a.Item,{label:s("Receipt"),name:"receipts",getValueFromEvent:Si,valuePropName:"fileList",shouldUpdate:!0,children:Object(x.jsx)(qn.a,{action:"/api/assets/upload?entity=expense",accept:"image/*",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))},children:Object(x.jsx)(at.a,{size:"small",children:s("upload")})})})}),Object(x.jsx)(va.a,{span:12,children:Object(x.jsx)(pa.a.Item,{label:s("Invoice"),name:"invoices",getValueFromEvent:Si,valuePropName:"fileList",shouldUpdate:!0,children:Object(x.jsx)(qn.a,{action:"/api/assets/upload?entity=expense",accept:"image/*",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))},children:Object(x.jsx)(at.a,{size:"small",children:s("upload")})})})})]})]})})};var Ni={SUCCESS:function(e,t){return"".concat(e," ").concat(t).concat(t.endsWith("e")?"":"e","d successfully!")},ERROR:function(e,t){return"status change"===t?"failed to change status of ".concat(e):"failed to ".concat(t," ").concat(e)}},wi=function(e){return(e.urls||[]).map((function(e){var t=e.createdAt,a=e.url;return Object(x.jsx)("a",{style:{display:"block"},href:a,alt:"invoice",target:"_blank",children:Ge(t)},a)}))},Ti=function(e){var t=e.no,a=e.amount;return Object(x.jsxs)(b.a,{to:"/cheques",children:[t," (",We.format(a),")"]})},Pi=function(e){var t=e.cheques;return(void 0===t?[]:t).map((function(e){var t=e.no,a=e.amount;return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(Ti,{no:t,amount:a}),Object(x.jsx)("br",{})]})}))};var Di=function(e){var t=e.addToast,a=e.id,r=Object(me.a)(["translation"]).t,c=function(e){return B("/api/expenses/".concat(e))}(a),s=Object(j.a)(c,2),i=s[0],o=s[1],l=function(e){var t=B("/api/expenses/".concat(e,"/payments")),a=Object(j.a)(t,3),n=a[0];return[(n=void 0===n?{data:[]}:n).data,a[1],a[2]]}(a),d=Object(j.a)(l,3),b=d[0],h=d[1],m=d[2],O=function(e){var t=Object(n.useState)([]),a=Object(j.a)(t,2),r=Object(j.a)(a[0],3),c=r[0],s=r[1],i=r[2],o=a[1],l=Object(n.useMemo)((function(){return"add"===i&&s?["/api/expenses/".concat(e,"/payments"),{method:"POST",body:JSON.stringify(Object(u.a)(Object(u.a)({},s),{},{expenseId:e}))}]:"update"===i&&e&&c&&s?["/api/expenses/".concat(e,"/payments/").concat(c),{method:"PUT",body:JSON.stringify(s)}]:"delete"===i&&e&&c?["/api/expenses/".concat(e,"/payments/").concat(c),{method:"DELETE"}]:[void 0,void 0]}),[s,e,i,c]),d=B.apply(void 0,Object(H.a)(l)),b=Object(j.a)(d,2)[1];return i&&(b.action=i,b.message=Ni[b.code]?Ni[b.code]("payment",i):""),{add:function(e){return o([void 0,e,"add"])},edit:function(e,t){return o([t,e,"update"])},del:function(e){return o([e,void 0,"delete"])},reset:function(){return o([])},status:b}}(a),p=O.add,f=O.status,v=Object(n.useState)(!1),g=Object(j.a)(v,2),C=g[0],y=g[1],S=function(){return y(!0)},I=function(){return y(!1)};Object(n.useEffect)((function(){(f.isError||f.isSuccess)&&(t(f.message,{appearance:f.toString().toLowerCase()}),f.isSuccess&&(I(),m()))}),[f]);var N=!!(i&&b.length>0)&&("custom"===i.frequency&&i.numTimes<=b.length);return Object(x.jsxs)("div",{className:"container",children:[Object(x.jsx)(Fa,{status:o,children:function(){return Object(x.jsxs)(Ea.b,{title:i.name,bordered:!0,style:{marginBottom:32},children:[Object(x.jsx)(Ea.b.Item,{label:r("Type"),children:Yr[i.type]}),Object(x.jsx)(Ea.b.Item,{label:r("Fixed"),children:i.fixed?"True":"False"}),Object(x.jsx)(Ea.b.Item,{label:r("Issue Date"),children:Ge(i.issueDate)}),Object(x.jsx)(Ea.b.Item,{label:r("Due Date"),children:Ge(i.dueDate)}),Object(x.jsx)(Ea.b.Item,{label:r("Frequency"),children:zr[i.frequency]}),"custom"===i.frequency&&Object(x.jsx)(Ea.b.Item,{label:r("Num Of Times"),children:i.numTimes}),Object(x.jsx)(Ea.b.Item,{label:r("Amount"),children:"custom"===i.frequency?"".concat(gi(i.amount)," * ").concat(i.numTimes," = ").concat(gi(i.amount*i.numTimes)):gi(i.amount)}),Object(x.jsx)(Ea.b.Item,{label:r("Late Fee"),children:gi(i.lateFee)}),i.moneySourceId&&Object(x.jsx)(Ea.b.Item,{label:r("Source of Money"),children:i.moneySourceId}),Object(x.jsx)(Ea.b.Item,{}),Object(x.jsx)(Ea.b.Item,{span:3,label:r("Description"),className:"whitespace-pre",children:i.description})]})}}),Object(x.jsx)(Fa,{status:h,children:function(){return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",marginBottom:16},children:Object(x.jsx)(at.a,{onClick:S,disabled:N,children:r("Make Payment")})}),Object(x.jsxs)(Ra.a,{dataSource:b,rowKey:"_id",children:[Object(x.jsx)(Ra.a.Column,{title:r("Date"),dataIndex:"createdAt",render:Ge}),Object(x.jsx)(Ra.a.Column,{title:r("Method"),dataIndex:"method"}),Object(x.jsx)(Ra.a.Column,{title:r("Amount"),dataIndex:"amount",render:We.format}),Object(x.jsx)(Ra.a.Column,{title:r("Cheque"),dataIndex:"cheques",render:function(e){return Object(x.jsx)(Pi,{cheques:e})}}),Object(x.jsx)(Ra.a.Column,{title:r("Invoice"),dataIndex:"invoices",render:function(e){return Object(x.jsx)(wi,{urls:e})}}),Object(x.jsx)(Ra.a.Column,{title:r("Receipt"),dataIndex:"receipts",render:function(e){return Object(x.jsx)(wi,{urls:e})}})]})]})}}),C&&Object(x.jsx)(Ii,{onSave:p,onClose:I,okText:r("Make Payment"),initialValues:i})]})},ki=function(e){return(e.frontLeftHeight+e.frontRightHeight+e.midLeftHeight+e.midRightHeight+e.rearLeftHeight+e.rearRightHeight)/6*((e.leftLength+e.rightLength)/2)*e.width},Ai={labelCol:{span:8},wrapperCol:{span:16}},Ei={labelCol:{span:4},wrapperCol:{span:8}},Ri={frontLeftHeight:0,frontRightHeight:0,midLeftHeight:0,midRightHeight:0,rearLeftHeight:0,rearRightHeight:0,leftLength:0,rightLength:0,width:0,pricePerVolume:0},_i=function(e){var t=e.values,a=Object(me.a)(["translation"]).t,n="".concat(a("Front Left Height"),": ").concat(Ke(t.frontLeftHeight),"\n").concat(a("Front Right Height"),": ").concat(Ke(t.frontRightHeight),"\n").concat(a("Mid Left Height"),": ").concat(Ke(t.midLeftHeight),"\n").concat(a("Mid Right Height"),": ").concat(Ke(t.midRightHeight),"\n").concat(a("Rear Left Height"),": ").concat(Ke(t.rearLeftHeight),"\n").concat(a("Rear Right Height"),": ").concat(Ke(t.rearRightHeight),"\n").concat(a("Left Length"),": ").concat(Ke(t.leftLength),"\n").concat(a("Right Length"),": ").concat(Ke(t.rightLength),"\n").concat(a("Width"),": ").concat(Ke(t.width),"\n").concat(a("Price Per Volume"),": ").concat(ht(t.pricePerVolume),"\n"),r=new URLSearchParams({create:!0,name:"Woods Buy",description:n,numTimes:1,frequency:"custom",amount:Number((ki(t)*t.pricePerVolume).toFixed(2)),type:"purchase",fixed:!0}),c="/expenses?".concat(r.toString());return Object(x.jsx)(b.a,{className:"margin-left",to:c,target:"_blank",component:Ya,children:a("Create Expense")})},Mi=function(e){var t=e.values;console.log("values :>> ",t);var a=ki(t);return Object(x.jsxs)("div",{style:{fontSize:"1.2em"},children:["Total: ",Ke(a)," x ",ht(t.pricePerVolume)," = ",ht(a*t.pricePerVolume)," ",Object(x.jsx)(_i,{values:t})]})};var Fi=function(){var e=Object(me.a)(["translation"]).t;return Object(x.jsxs)(pa.a,Object(u.a)(Object(u.a)({},Ai),{},{initialValues:Ri,className:"margin",children:[Object(x.jsx)("h2",{children:e("Calc. M3")}),Object(x.jsxs)(fa.a,{gutter:16,children:[Object(x.jsx)(va.a,{span:12,children:Object(x.jsx)(pa.a.Item,{label:e("Front Left Height"),name:"frontLeftHeight",children:Object(x.jsx)(za,{})})}),Object(x.jsx)(va.a,{span:12,children:Object(x.jsx)(pa.a.Item,{label:e("Front Right Height"),name:"frontRightHeight",children:Object(x.jsx)(za,{})})})]}),Object(x.jsxs)(fa.a,{gutter:16,children:[Object(x.jsx)(va.a,{span:12,children:Object(x.jsx)(pa.a.Item,{label:e("Mid Left Height"),name:"midLeftHeight",children:Object(x.jsx)(za,{})})}),Object(x.jsx)(va.a,{span:12,children:Object(x.jsx)(pa.a.Item,{label:e("Mid Right Height"),name:"midRightHeight",children:Object(x.jsx)(za,{})})})]}),Object(x.jsxs)(fa.a,{gutter:16,children:[Object(x.jsx)(va.a,{span:12,children:Object(x.jsx)(pa.a.Item,{label:e("Rear Left Height"),name:"rearLeftHeight",children:Object(x.jsx)(za,{})})}),Object(x.jsx)(va.a,{span:12,children:Object(x.jsx)(pa.a.Item,{label:e("Rear Right Height"),name:"rearRightHeight",children:Object(x.jsx)(za,{})})})]}),Object(x.jsxs)(fa.a,{gutter:16,children:[Object(x.jsx)(va.a,{span:12,children:Object(x.jsx)(pa.a.Item,{label:e("Left Length"),name:"leftLength",children:Object(x.jsx)(za,{})})}),Object(x.jsx)(va.a,{span:12,children:Object(x.jsx)(pa.a.Item,{label:e("Right Length"),name:"rightLength",children:Object(x.jsx)(za,{})})})]}),Object(x.jsx)(pa.a.Item,Object(u.a)(Object(u.a)({label:e("Width"),name:"width"},Ei),{},{children:Object(x.jsx)(za,{})})),Object(x.jsx)(pa.a.Item,Object(u.a)(Object(u.a)({label:e("Price Per Volume"),name:"pricePerVolume"},Ei),{},{children:Object(x.jsx)(za,{})})),Object(x.jsx)(pa.a.Item,{wrapperCol:{offset:4},shouldUpdate:!0,children:function(e){var t=e.getFieldsValue;return Object(x.jsx)(Mi,{values:t()})}})]}))},Vi={required:!0},Li={title:[Vi],estConclusionDate:[Vi],startDate:[Vi],assigneeId:[Vi],leaderId:[Vi]};var Bi=function(e){var t=e.onClose,a=e.okText,r=e.okButtonProps,c=e.afterSave,s=e.initialValue,i=Object(me.a)(["translation"]).t,o=we(null===s||void 0===s?void 0:s._id),l=o.save,d=o.status,b=Object(n.useContext)(D),h=Ve((null===s||void 0===s?void 0:s.organizationId)||b).data,m=xt().data,O=ie().data,p=pa.a.useForm(),f=Object(j.a)(p,1)[0];Object(n.useEffect)((function(){d.isSuccess&&(t(),c())}),[d,c,t]);var v=s?Object(u.a)(Object(u.a)({},s),{},{startDate:U.a.unix(s.startDate),estConclusionDate:U.a.unix(s.estConclusionDate)}):void 0;return Object(x.jsxs)(lt.a,{visible:!0,onCancel:t,title:a,onClose:t,okText:a,okButtonProps:Object(u.a)({form:"task-create-modal",htmlType:"submit"},r),width:800,maskClosable:!1,keyboard:!1,children:[Object(x.jsxs)(pa.a,{form:f,layout:"vertical",id:"task-create-modal",initialValues:v,onFinish:function(e){var t=Object(u.a)(Object(u.a)(Object(u.a)({},s),e),{},{startDate:e.startDate.unix(),estConclusionDate:e.estConclusionDate.unix()});l(null===s||void 0===s?void 0:s._id,t)},onValuesChange:function(e){var t;(e.leaderId&&f.setFieldsValue({helperIds:[]}),e.orderId)?f.setFieldsValue({clientId:null===(t=m.find((function(t){return t.value===e.orderId})))||void 0===t?void 0:t.clientId}):e.hasOwnProperty("orderId")&&f.setFieldsValue({clientId:void 0})},children:[Object(x.jsx)(pa.a.Item,{label:i("Title"),name:"title",rules:Li.name,children:Object(x.jsx)(xa.a,{})}),Object(x.jsx)(pa.a.Item,{label:i("Work Address"),name:"workAddress",children:Object(x.jsx)(xa.a.TextArea,{rows:4})}),Object(x.jsx)(pa.a.Item,{label:i("Driver"),name:"driver",children:Object(x.jsx)(_n,{options:h})}),Object(x.jsx)(pa.a.Item,{label:i("Vehicle"),name:"vehicle",children:Object(x.jsx)(xa.a,{})}),Object(x.jsx)("div",{className:"site-card-wrapper",children:Object(x.jsxs)(fa.a,{gutter:16,children:[Object(x.jsx)(va.a,{span:12,children:Object(x.jsx)(Aa.a,{bordered:!1,children:Object(x.jsx)(pa.a.Item,{label:i("Start Date"),name:"startDate",rules:Li.startDate,children:Object(x.jsx)(Cr.a,{format:"DD/MM/YYYY"})})})}),Object(x.jsx)(va.a,{span:12,children:Object(x.jsx)(Aa.a,{bordered:!1,children:Object(x.jsx)(pa.a.Item,{label:i("Conlusion Date"),name:"estConclusionDate",rules:Li.estConclusionDate,children:Object(x.jsx)(Cr.a,{format:"DD/MM/YYYY"})})})})]})}),Object(x.jsx)(pa.a.Item,{label:i("Leader"),name:"leaderId",rules:Li.leaderId,children:Object(x.jsx)(_n,{options:h})}),Object(x.jsx)(pa.a.Item,{noStyle:!0,dependencies:["leaderId"],children:function(e){var t=e.getFieldValue;return Object(x.jsx)(pa.a.Item,{label:i("Helpers"),name:"helperIds",rules:Li.helperIds,children:Object(x.jsx)(_n,{options:h.filter((function(e){return e.value!==t("leaderId")})),mode:"multiple"})})}}),Object(x.jsx)(pa.a.Item,{label:i("Lunch"),name:"lunch",children:Object(x.jsx)(xa.a,{})}),Object(x.jsx)(pa.a.Item,{label:i("Host"),name:"host",children:Object(x.jsx)(xa.a,{})}),Object(x.jsx)(pa.a.Item,{label:__("Order"),name:"orderId",rules:Li.orderId,children:Object(x.jsx)(_n,{options:m})}),Object(x.jsx)(pa.a.Item,{noStyle:!0,dependencies:["orderId"],children:function(e){e.getFieldValue;return Object(x.jsx)(pa.a.Item,{label:__("Client"),name:"clientId",rules:Li.clientId,children:Object(x.jsx)(_n,{options:O,disabled:!0})})}}),Object(x.jsx)(pa.a.Item,{label:i("Rute"),name:"rute",children:Object(x.jsx)(xa.a.TextArea,{rows:4})}),Object(x.jsx)(pa.a.Item,{label:i("Obs"),name:"obs",children:Object(x.jsx)(xa.a.TextArea,{rows:4})}),Object(x.jsx)(pa.a.Item,{label:i("Description"),name:"description",rules:Li.description,children:Object(x.jsx)(xa.a.TextArea,{rows:4})})]}),d.isError&&Object(x.jsx)(ya.a,{message:d.message,type:"error"})]})},Hi=function(e){return e?U.a.unix(e).format("DD/MM/YYYY"):void 0};var zi=function(e){var t=e.addToast,a=Object(me.a)(["translation"]).t,r=we(),c=r.status,s=r.del,i=be(),o=i.data,l=i.total,d=(i.pages,i.goto,i.search),u=i.filters,h=i.status,m=i.refresh,O=Object(n.useState)(),p=Object(j.a)(O,2),f=p[0],v=p[1],g=Object(n.useState)(),C=Object(j.a)(g,2),y=(C[0],C[1]),S=Object(n.useState)(!1),I=Object(j.a)(S,2),N=I[0],w=I[1],T=function(){return v(void 0)};return Object(n.useEffect)((function(){(c.isError||c.isSuccess)&&(t(c.message,{appearance:c.toString().toLowerCase()}),c.isSuccess&&(T(),y(void 0),m()))}),[c]),Object(x.jsxs)("div",{className:"container",children:[Object(x.jsxs)("div",{className:"list-actions",children:[Object(x.jsxs)("span",{children:[a("Total"),": ",l]}),Object(x.jsx)("div",{style:{marginLeft:16,marginRight:16},children:Object(x.jsx)(xa.a.Search,{placeholder:a("Search"),onChange:function(e){return d(e.target.value)},value:u.searchText,allowClear:!0})}),Object(x.jsx)(Ya,{type:"primary",onClick:function(){return w(!0)},children:a("Create Task")})]}),Object(x.jsx)(Fa,{status:h,children:function(){return Object(x.jsxs)(Ra.a,{dataSource:o,rowKey:"_id",children:[Object(x.jsx)(Ra.a.Column,{title:a("Action"),render:function(e,t){return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(at.a,{className:"margin-right",icon:Object(x.jsx)(nt.a,{}),type:"danger",onClick:(n=t._id,function(){return ut({onOk:function(){return s(n)},afterClose:m})}),size:"small",ghost:!0}),Object(x.jsx)(at.a,{className:"margin-right",icon:Object(x.jsx)(rt.a,{}),onClick:(a=t,function(){return v(a)}),size:"small"})]});var a,n}},"action"),Object(x.jsx)(Ra.a.Column,{dataIndex:"",title:a("Title"),render:function(e){return Object(x.jsx)(b.a,{to:"/tasks/".concat(e._id),children:Object(x.jsx)("b",{children:e.title})})}},"title"),Object(x.jsx)(Ra.a.Column,{dataIndex:"description",title:a("Description")},"description"),Object(x.jsx)(Ra.a.Column,{dataIndex:"startDate",title:a("Start Date"),render:Hi},"startDate"),Object(x.jsx)(Ra.a.Column,{dataIndex:"estConclusionDate",title:a("Conlusion Date"),render:Hi},"estConclusionDate"),Object(x.jsx)(Ra.a.Column,{dataIndex:"assignee",render:function(e){var t=e.firstName,a=e.lastName;return"".concat(t," ").concat(a)},title:a("Assignee")},"assignee"),Object(x.jsx)(Ra.a.Column,{title:a("Leader"),dataIndex:"leader",render:function(e){var t=e.firstName,a=e.lastName;return"".concat(t," ").concat(a)}},"leader"),Object(x.jsx)(Ra.a.Column,{dataIndex:"helpers",title:a("Helpers"),render:function(e){return e.map((function(e){var t=e.firstName,a=e.lastName;return"".concat(t," ").concat(a)})).join(",")}},"helpers"),Object(x.jsx)(Ra.a.Column,{title:__("Order ID"),dataIndex:"order",render:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.orderId,a=void 0===t?"":t;return"".concat(a)}},"order"),Object(x.jsx)(Ra.a.Column,{dataIndex:"client",title:a("Client"),render:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.firstName,a=void 0===t?"":t,n=e.lastName,r=void 0===n?"":n,c=e.address;return"".concat(a," ").concat(r," / ").concat(c)}},"client")]})}}),(N||f)&&Object(x.jsx)(Bi,{afterSave:function(){m()},onClose:function(){w(!1),T()},initialValue:f,okText:"".concat(a(f?"Update":"Create")," ").concat(a("Task"))})]})};var qi=function(e){var t=e.onClose,a=e.okText,r=e.okButtonProps,c=e.afterSave,s=e.initialValue,i=Object(me.a)(["translation"]).t,o=Ae(null===s||void 0===s?void 0:s._id),l=o.save,d=o.status,b=Object(n.useContext)(D),h=Ve((null===s||void 0===s?void 0:s.organizationId)||b).data,m=xt().data,O=(ie().data,pa.a.useForm()),p=Object(j.a)(O,1)[0];Object(n.useEffect)((function(){d.isSuccess&&(t(),c())}),[d,c,t]);var f=s?Object(u.a)(Object(u.a)({},s),{},{startDate:U.a.unix(s.startDate),estConclusionDate:U.a.unix(s.estConclusionDate)}):void 0;return Object(x.jsxs)(lt.a,{visible:!0,onCancel:t,title:a,onClose:t,okText:a,okButtonProps:Object(u.a)({form:"vehicle-create-modal",htmlType:"submit"},r),width:800,maskClosable:!1,keyboard:!1,children:[Object(x.jsxs)(pa.a,{form:p,layout:"vertical",id:"vehicle-create-modal",initialValues:f,onFinish:function(e){var t=Object(u.a)(Object(u.a)(Object(u.a)({},s),e),{},{startDate:e.startDate.unix(),estConclusionDate:e.estConclusionDate.unix()});l(null===s||void 0===s?void 0:s._id,t)},onValuesChange:function(e){var t;(e.leaderId&&p.setFieldsValue({helperIds:[]}),e.taskId)?p.setFieldsValue({clientId:null===(t=m.find((function(t){return t.value===e.taskId})))||void 0===t?void 0:t.clientId}):e.hasOwnProperty("taskId")&&p.setFieldsValue({clientId:void 0})},children:[Object(x.jsx)(pa.a.Item,{label:i("Title"),name:"title",children:Object(x.jsx)(xa.a,{})}),Object(x.jsx)(pa.a.Item,{label:i("Type"),name:"type",children:Object(x.jsx)(xa.a,{})}),Object(x.jsxs)(fa.a,{gutter:16,children:[Object(x.jsx)(va.a,{span:8,children:Object(x.jsx)(pa.a.Item,{label:i("Purchase Date"),name:"purchaseDate",children:Object(x.jsx)(Cr.a,{format:"DD/MM/YYYY"})})}),Object(x.jsx)(va.a,{span:8,children:Object(x.jsx)(pa.a.Item,{label:i("Purchase Price"),name:"purchasePrice",children:Object(x.jsx)(xa.a,{})})})]}),Object(x.jsxs)(fa.a,{gutter:16,children:[Object(x.jsx)(va.a,{span:8,children:Object(x.jsx)(pa.a.Item,{label:i("Purchase Km"),name:"purchaseKm",children:Object(x.jsx)(xa.a,{})})}),Object(x.jsx)(va.a,{span:8,children:Object(x.jsx)(pa.a.Item,{label:i("Km Now"),name:"kmNow",children:Object(x.jsx)(xa.a,{})})})]}),Object(x.jsx)(pa.a.Item,{noStyle:!0,dependencies:["driverId"],children:function(e){var t=e.getFieldValue;return Object(x.jsx)(pa.a.Item,{label:i("Drivers"),name:"driverId",children:Object(x.jsx)(_n,{options:h.filter((function(e){return e.value!==t("vinNumber")})),mode:"multiple"})})}}),Object(x.jsx)(pa.a.Item,{label:i("Last Manutences"),name:"lastManutences",children:Object(x.jsx)(Cr.a,{format:"DD/MM/YYYY"})}),Object(x.jsx)(pa.a.Item,{label:i("Actual Price"),name:"actualPrice",children:Object(x.jsx)(xa.a,{})}),Object(x.jsx)(pa.a.Item,{label:i("Description"),name:"description",children:Object(x.jsx)(xa.a.TextArea,{rows:4})}),Object(x.jsx)(pa.a.Item,{label:__("Obs"),name:"obs",children:Object(x.jsx)(xa.a.TextArea,{rows:4})})]}),d.isError&&Object(x.jsx)(ya.a,{message:d.message,type:"error"})]})},Ui=function(e){return e?U.a.unix(e).format("DD/MM/YYYY"):void 0};var Yi=function(e){var t=e.addToast,a=Object(me.a)(["translation"]).t,r=Ae(),c=r.status,s=r.del,i=he(),o=i.data,l=i.total,d=(i.pages,i.goto,i.search),u=i.filters,h=i.status,m=i.refresh,O=Object(n.useState)(),p=Object(j.a)(O,2),f=p[0],v=p[1],g=Object(n.useState)(),C=Object(j.a)(g,2),y=(C[0],C[1]),S=Object(n.useState)(!1),I=Object(j.a)(S,2),N=I[0],w=I[1],T=function(){return v(void 0)};return Object(n.useEffect)((function(){(c.isError||c.isSuccess)&&(t(c.message,{appearance:c.toString().toLowerCase()}),c.isSuccess&&(T(),y(void 0),m()))}),[c]),Object(x.jsxs)("div",{className:"container",children:[Object(x.jsxs)("div",{className:"list-actions",children:[Object(x.jsxs)("span",{children:[a("Total"),": ",l]}),Object(x.jsx)("div",{style:{marginLeft:16,marginRight:16},children:Object(x.jsx)(xa.a.Search,{placeholder:a("Search"),onChange:function(e){return d(e.target.value)},value:u.searchText,allowClear:!0})}),Object(x.jsxs)(Ya,{type:"primary",onClick:function(){return w(!0)},children:[a("Create")," ",a("Vehicle")]})]}),Object(x.jsx)(Fa,{status:h,children:function(){return Object(x.jsxs)(Ra.a,{dataSource:o,rowKey:"_id",children:[Object(x.jsx)(Ra.a.Column,{title:a("Action"),render:function(e,t){return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(at.a,{className:"margin-right",icon:Object(x.jsx)(nt.a,{}),type:"danger",onClick:(n=t._id,function(){return ut({onOk:function(){return s(n)},afterClose:m})}),size:"small",ghost:!0}),Object(x.jsx)(at.a,{className:"margin-right",icon:Object(x.jsx)(rt.a,{}),onClick:(a=t,function(){return v(a)}),size:"small"})]});var a,n}},"action"),Object(x.jsx)(Ra.a.Column,{dataIndex:"",title:a("Title"),render:function(e){return Object(x.jsx)(b.a,{to:"/vehicles/".concat(e._id),children:Object(x.jsx)("b",{children:e.title})})}},"title"),Object(x.jsx)(Ra.a.Column,{dataIndex:"description",title:a("Description")},"description"),Object(x.jsx)(Ra.a.Column,{dataIndex:"purchaseDate",title:a("Purchase Date"),render:Ui},"purchaseDate"),Object(x.jsx)(Ra.a.Column,{dataIndex:"lastManutences",title:a("Last Manutences Date"),render:Ui},"lastManutences"),Object(x.jsx)(Ra.a.Column,{dataIndex:"assignee",render:function(e){var t=e.firstName,a=e.lastName;return"".concat(t," ").concat(a)},title:a("Assignee")},"assignee"),Object(x.jsx)(Ra.a.Column,{title:a("Driver"),dataIndex:"driver",render:function(e){var t=e.firstName,a=e.lastName;return"".concat(t," ").concat(a)}},"driver"),Object(x.jsx)(Ra.a.Column,{dataIndex:"type",title:a("Type")},"type"),Object(x.jsx)(Ra.a.Column,{dataIndex:"kmNow",title:a("Actual Km")},"kmNow")]})}}),(N||f)&&Object(x.jsx)(qi,{afterSave:function(){m()},onClose:function(){w(!1),T()},initialValue:f,okText:"".concat(a(f?"Update":"Create")," ").concat(a("Vehicle"))})]})};function Xi(e){var t=e.vehicle;return Object(x.jsxs)("div",{className:"printonly printonly-flex space-between",children:[Object(x.jsx)(Ga,{organization:t.organization}),Object(x.jsx)(La.a,{id:"qr-canvas",value:window.location.href,size:100})]})}var Wi=function(e){var t=e.id,a=Object(me.a)(["translation"]).t,n=Ae(t),r=n.data,c=n.getStatus,s={width:"100%",textAlign:"center"};return Object(x.jsxs)("div",{className:"container",children:[Object(x.jsx)("div",{className:"text-right margin-bottom noprint",children:Object(x.jsx)(at.a,{icon:Object(x.jsx)(_a.a,{}),onClick:function(){return window.print()},children:a("Print")})}),Object(x.jsx)(Fa,{status:c,children:function(){return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(Xi,{vehicle:r}),Object(x.jsx)("div",{className:"site-card-wrapper",children:Object(x.jsx)(Aa.a,{style:s,title:a("Vehicle Details")+r.task.taskId,children:Object(x.jsxs)(fa.a,{gutter:16,children:[Object(x.jsx)(va.a,{span:8,children:Object(x.jsxs)(Aa.a,{title:a("About the Vehicle"),bordered:!1,children:[Object(x.jsx)("h3",{children:it(r.type)}),r.description,Object(x.jsx)("br",{}),r.kmNow,Object(x.jsx)("br",{}),r.driver,Object(x.jsx)("br",{}),Object(x.jsxs)("b",{children:["#: ",r.registrationNumber]})]})}),Object(x.jsx)(va.a,{span:8,children:Object(x.jsx)(Aa.a,{title:a("Obs"),bordered:!1,children:it(r.obs)})}),Object(x.jsx)(va.a,{span:8,children:Object(x.jsxs)(Aa.a,{title:a("Last Manutences"),bordered:!1,children:[Object(x.jsx)("h3",{children:it(r.lastManutences)}),Object(x.jsxs)("b",{children:[r.assignee," "]})]})})]})})}),Object(x.jsxs)(Ea.b,{size:"small",bordered:!0,style:{marginBottom:32},children:[Object(x.jsx)(Ea.b.Item,{label:a("Purchase Price"),span:1.5,children:U.a.unix(r.purchasePrice)}),Object(x.jsx)(Ea.b.Item,{label:a("Purchase Date"),span:1.5,children:U.a.unix(r.purchaseDate).format("DD/MM/YYYY")}),Object(x.jsx)(Ea.b.Item,{label:a("Vin number"),children:it(r.vinNumber)}),Object(x.jsx)(Ea.b.Item,{label:a("Purchase Km"),span:2,children:r.purchaseKm})]}),Object(x.jsx)(Ea.b,{size:"small",bordered:!0,style:{marginBottom:32},children:Object(x.jsx)(Ea.b.Item,{label:a("Vehicle"),children:it(r.actualPrice)})})]})}})]})},Qi=We.format;function Ji(e){var t=e.products,a=Object(me.a)(["translation"]).t;return Object(x.jsxs)(Ra.a,{dataSource:t,showHeader:!1,size:"small",pagination:!1,children:[Object(x.jsx)(Ra.a.Column,{dataIndex:"title",title:a("Title"),width:"40%"}),Object(x.jsx)(Ra.a.Column,{dataIndex:"measurementValue",title:a("Dimensions"),width:"30%",render:ot}),Object(x.jsx)(Ra.a.Column,{render:function(e){return"(".concat(e.amount," x ").concat(Qi(e.price),")")}})]})}var Ki=function(e){return Qi(e.reduce((function(e,t){return e+t.amount*t.price}),0))};var Gi=function(){var e=Object(me.a)(["translation"]).t,t=ve(et()),a=t.all,n=t.status;return Object(x.jsx)(Fa,{status:n,children:function(){return Object(x.jsxs)(Ra.a,{dataSource:a,pagination:!1,bordered:!0,size:"small",children:[Object(x.jsx)(Ra.a.Column,{dataIndex:"orderId",title:e("ID")}),Object(x.jsx)(Ra.a.Column,{dataIndex:"createdAt",title:e("Created At"),width:"100px",render:function(e){return U()(1e3*e).format("DD/MM/YY")}}),Object(x.jsx)(Ra.a.Column,{dataIndex:"items",title:"".concat(__("Products")," | ").concat(__("Dimensions")," | ").concat(__("Quantity")," * ").concat(__("Price")),render:function(e){return Object(x.jsx)(Ji,{products:e})}}),Object(x.jsx)(Ra.a.Column,{dataIndex:"items",title:e("Total"),render:Ki}),Object(x.jsx)(Ra.a.Column,{dataIndex:"client",title:e("Client"),render:it}),Object(x.jsx)(Ra.a.Column,{dataIndex:"_status",title:e("Status"),width:"100px"}),Object(x.jsx)(Ra.a.Column,{dataIndex:"_processStatus",title:e("Process Status"),width:"120px"})]})}})},$i=function(e){return e.isService?void 0:Ke(e.totalUnits)},Zi=We.format;var eo=function(){var e=Object(me.a)(["translation"]).t,t=et(),a=se(t),n=a.all,r=a.status,c=Ft(t),s=c.data,i=c.status,o=function(e){return Zi(s[e])};return Object(x.jsx)(Fa,{status:[r,i],children:function(){return Object(x.jsxs)(Ra.a,{dataSource:n,pagination:!1,bordered:!0,size:"small",children:[Object(x.jsx)(Ra.a.Column,{dataIndex:"title",title:e("Title")}),Object(x.jsx)(Ra.a.Column,{dataIndex:"description",title:e("Description")}),Object(x.jsx)(Ra.a.Column,{title:e("Total Units"),render:$i}),Object(x.jsx)(Ra.a.Column,{dataIndex:"cost",title:e("Cost"),render:Zi}),Object(x.jsx)(Ra.a.Column,{dataIndex:"price",title:e("Price"),render:Zi}),Object(x.jsx)(Ra.a.Column,{dataIndex:"status",title:e("Status")}),Object(x.jsx)(Ra.a.Column,{dataIndex:"_id",title:e("Profit"),render:o})]})}})};var to=function(){var e=Object(me.a)(["translation"]).t,t=be(et()),a=t.all,n=t.status;return Object(x.jsx)(Fa,{status:n,children:function(){return Object(x.jsxs)(Ra.a,{dataSource:a,pagination:!1,bordered:!0,size:"small",children:[Object(x.jsx)(Ra.a.Column,{dataIndex:"title",title:e("Title")}),Object(x.jsx)(Ra.a.Column,{dataIndex:"description",title:e("Description")}),Object(x.jsx)(Ra.a.Column,{dataIndex:"startDate",title:e("Start Date"),render:function(e){return U.a.unix(e).format("DD/MM/YYYY")}}),Object(x.jsx)(Ra.a.Column,{dataIndex:"estConclusionDate",title:e("Est. Conclusion Date"),render:function(e){return U.a.unix(e).format("DD/MM/YYYY")}}),Object(x.jsx)(Ra.a.Column,{dataIndex:["order","orderId"],title:__("Order ID")}),Object(x.jsx)(Ra.a.Column,{dataIndex:"client",title:__("Client"),render:it}),Object(x.jsx)(Ra.a.Column,{dataIndex:"assignee",title:__("Assignee"),render:it}),Object(x.jsx)(Ra.a.Column,{dataIndex:"leader",title:__("Leader"),render:it}),Object(x.jsx)(Ra.a.Column,{dataIndex:"helpers",title:e("Helpers"),render:function(e){return e.map(it).join(",")}})]})}})};var ao=function(){var e=Object(me.a)(["translation"]).t,t=ge(et()),a=t.all,n=t.status;return Object(x.jsx)(Fa,{status:n,children:function(){return Object(x.jsxs)(Ra.a,{dataSource:a,pagination:!1,bordered:!0,size:"small",children:[Object(x.jsx)(Ra.a.Column,{dataIndex:"name",title:e("Title")}),Object(x.jsx)(Ra.a.Column,{dataIndex:"type",title:e("Type"),render:Xr}),Object(x.jsx)(Ra.a.Column,{dataIndex:"issueDate",title:e("Issue Date"),render:function(e){return U.a.unix(e).format("DD/MM/YYYY")}}),Object(x.jsx)(Ra.a.Column,{dataIndex:"dueDate",title:e("Due Date"),render:function(e){return U.a.unix(e).format("DD/MM/YYYY")}}),Object(x.jsx)(Ra.a.Column,{dataIndex:"frequency",title:e("Frequency"),render:qr}),Object(x.jsx)(Ra.a.Column,{dataIndex:"amount",title:e("Amount"),render:ht})]})}})};var no=function(){var e=Object(me.a)(["translation"]).t,t=B("/api/products-stats".concat(window.location.search)),a=Object(j.a)(t,2),n=a[0],r=void 0===n?[]:n,c=a[1],s=Mt(et()),i=s.data,o=s.status,l=function(e){return ht(i[e]||0)};return Object(x.jsx)(Fa,{status:[c,o],children:function(){return Object(x.jsxs)(Ra.a,{dataSource:r,pagination:!1,bordered:!0,size:"small",children:[Object(x.jsx)(Ra.a.Column,{dataIndex:["department","title"],title:e("Title")}),Object(x.jsx)(Ra.a.Column,{dataIndex:"total",title:e("Products"),render:Ke}),Object(x.jsx)(Ra.a.Column,{dataIndex:"worthCost",title:"".concat(e("Worth")," ").concat(e("Cost")),render:ht}),Object(x.jsx)(Ra.a.Column,{dataIndex:"worthPrice",title:"".concat(e("Worth")," ").concat(e("Price")),render:ht}),Object(x.jsx)(Ra.a.Column,{dataIndex:["department","_id"],title:__("Profit"),render:l})]})}})};function ro(){var e=Object(me.a)(["translation"]).t,t=B("/api/orders-stats".concat(window.location.search)),a=Object(j.a)(t,2),n=a[0],r=void 0===n?{}:n,c=a[1],s=B("/api/dashboard".concat(window.location.search)),i=Object(j.a)(s,2),o=i[0],l=void 0===o?{}:o,d=i[1],u=0,b=0,h=0,m=0,O=0,p=0,f=0;return c.isSuccess&&d.isSuccess&&(u=r.open.revenue+r.closed.revenue+r.partial.revenue,b=r.open.cost+r.closed.cost+r.partial.cost,h=r.open.orders+r.closed.orders+r.partial.orders,m=r.closed.revenue+r.partial.collected,O=r.open.revenue+(r.partial.revenue-r.partial.collected),p=r.partial.revenue+r.closed.revenue-r.partial.cost-r.closed.cost,f=p-l.totalexpenses),Object(x.jsx)(Fa,{status:c,children:function(){return Object(x.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",columnGap:16},children:[Object(x.jsxs)(Ea.b,{title:e("Placed Orders"),bordered:!0,size:"small",children:[Object(x.jsx)(Ea.b.Item,{label:e("Profit"),span:3,children:ht(u-b)}),Object(x.jsx)(Ea.b.Item,{label:e("Placed Orders"),span:3,children:Ke(h)}),Object(x.jsx)(Ea.b.Item,{label:e("Revenue"),span:1.5,children:ht(u)}),Object(x.jsx)(Ea.b.Item,{label:e("Cost"),span:1.5,children:ht(b)}),Object(x.jsx)(Ea.b.Item,{label:e("Collected"),span:1.5,children:ht(m)}),Object(x.jsx)(Ea.b.Item,{label:e("Yet to collect"),span:1.5,children:ht(O)})]}),Object(x.jsxs)(Ea.b,{title:e("Real Profits"),bordered:!0,size:"small",children:[Object(x.jsx)(Ea.b.Item,{label:e("Real Profits"),span:3,children:ht(f)}),Object(x.jsx)(Ea.b.Item,{label:e("Profit"),span:1.5,children:ht(p)}),Object(x.jsx)(Ea.b.Item,{label:e("Expense"),span:1.5,children:ht(l.totalexpenses)})]})]})}})}var co=function(){var e=Object(me.a)(["translation"]).t;return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(ro,{}),Object(x.jsx)("h3",{style:{margin:"16px 0"},children:e("Departments")}),Object(x.jsx)(no,{}),Object(x.jsx)("h3",{style:{margin:"16px 0"},children:e("Orders")}),Object(x.jsx)(Gi,{}),Object(x.jsx)("h3",{style:{margin:"16px 0"},children:e("Products")}),Object(x.jsx)(eo,{}),Object(x.jsx)("h3",{style:{margin:"16px 0"},children:e("Expenses")}),Object(x.jsx)(ao,{}),"/*",Object(x.jsx)("h3",{style:{margin:"16px 0"},children:e("Tasks")}),Object(x.jsx)(to,{}),"*/",Object(x.jsx)(at.a,{className:"noprint",icon:Object(x.jsx)(_a.a,{}),type:"primary",style:{position:"fixed",bottom:16,right:16},onClick:function(){return window.print()},children:e("Print")})]})},so=(a(951),{required:!0}),io={name:[so],password:[so],phoneNumber:[so,{len:11}],email:[so,{type:"email"}]};var oo=function(e){var t=e.setOnboarded,a=B("/api/check-onboarded"),r=Object(j.a)(a,1)[0],c=(r=void 0===r?{}:r).onboarded,s=function(){var e=Object(n.useState)(),t=Object(j.a)(e,2),a=t[0],r=t[1],c=Object(n.useMemo)((function(){return a?["/api/onboard",{method:"POST",body:JSON.stringify(a)}]:[]}),[a]),s=B.apply(void 0,Object(H.a)(c)),i=Object(j.a)(s,2),o=i[0];return{onboarded:(o=void 0===o?{}:o).onboarded,onboard:r,status:i[1]}}(),i=s.onboarded,o=s.onboard,l=s.status;return Object(n.useEffect)((function(){c&&t(!0)}),[c]),Object(n.useEffect)((function(){i&&t(!0)}),[i]),Object(n.useEffect)((function(){l.isError&&qt.b.error(l.message||"failed to onboard"),l.isSuccess&&(qt.b.success("super admin onboarded successfully"),Object(b.d)("/login"))}),[l]),Object(x.jsx)("div",{className:"onboard-form-container",children:Object(x.jsxs)(pa.a,{className:"onboard-form",id:"onboard-form",layout:"vertical",size:"large",onFinish:o,children:[Object(x.jsx)(pa.a.Item,{label:"Super Admin Name",name:"firstName",rules:io.name,children:Object(x.jsx)(xa.a,{})}),Object(x.jsx)(pa.a.Item,{label:"Email",name:"email",rules:io.email,children:Object(x.jsx)(xa.a,{})}),Object(x.jsx)(pa.a.Item,{label:"Password",name:"password",rules:io.password,children:Object(x.jsx)(xa.a.Password,{})}),Object(x.jsx)(pa.a.Item,{label:"Phone No",name:"landlineNumber",trigger:"onValueChange",getValueFromEvent:function(e){return e.value},rules:io.phoneNumber,children:Object(x.jsx)(Sa.a,{customInput:xa.a,format:"(##) ##### - ####",placeholder:"(00) 00000 - 0000"})}),Object(x.jsx)("div",{className:"text-right",children:Object(x.jsx)(at.a,{type:"primary",htmlType:"submit",children:"Submit"})})]})})},lo={title:[mt],departments:[mt]};var uo=function(e){var t=e.initialValue,a=e.afterSave,r=e.onClose,c=e.okText,s=Object(me.a)(["translation"]).t,i=Ye(null===t||void 0===t?void 0:t._id),o=i.save,l=i.status,d=Xe();d.options,d.status,Object(n.useEffect)((function(){l.isSuccess&&(qt.b.success(l.message),a())}),[l,a,r]);var u=tt(s,lo);return Object(x.jsxs)(Xa,{formID:"brand-add-modal",onClose:r,okText:c,children:[Object(x.jsxs)(pa.a,{layout:"vertical",id:"brand-add-modal",initialValues:t,onFinish:function(e){o(null===t||void 0===t?void 0:t._id,e)},children:[Object(x.jsx)(pa.a.Item,{name:"title",label:s("Title"),rules:u.title,children:Object(x.jsx)(xa.a,{})}),Object(x.jsx)(pa.a.Item,{name:"description",label:s("Description"),rules:u.description,children:Object(x.jsx)(xa.a.TextArea,{rows:4})})]}),l.isError&&Object(x.jsx)(ya.a,{message:l.message,type:"error"})]})};a(952);var jo=function(e){var t=Object(me.a)(["translation"]).t,a=ze(),r=a.all,c=a.total,s=(a.pages,a.search),i=(a.goto,a.sort,a.filters),o=a.status,l=a.refresh,d=Ye(),u=d.del,b=d.status,h=Object(n.useState)(!1),m=Object(j.a)(h,2),O=m[0],p=m[1],f=Object(n.useState)(void 0),v=Object(j.a)(f,2),g=v[0],C=v[1],y=Object(n.useState)(void 0),S=Object(j.a)(y,2),I=S[0],N=S[1],w=function(){p(!1),C(void 0)};return Object(n.useEffect)((function(){b.isSuccess&&(N(void 0),l())}),[b,l]),Object(x.jsxs)("div",{className:"container",children:[Object(x.jsx)("h2",{children:t("Brands")}),Object(x.jsxs)("div",{className:"list-actions",children:[Object(x.jsxs)("span",{children:[t("Total"),": ",c]}),Object(x.jsx)("div",{style:{marginLeft:16,marginRight:16},children:Object(x.jsx)(xa.a.Search,{placeholder:t("Search"),onChange:function(e){return s(e.target.value)},value:i.searchText,allowClear:!0})}),Object(x.jsxs)(Ya,{type:"primary",onClick:function(){return p(!0)},children:[t("Add")," ",t("Brand")]})]}),Object(x.jsx)(Fa,{status:o,children:function(){return Object(x.jsxs)(Ra.a,{dataSource:r,rowKey:"_id",bordered:!0,children:[Object(x.jsx)(Ra.a.Column,{title:t("Actions"),render:ct(C,N)},"actions"),Object(x.jsx)(Ra.a.Column,{dataIndex:"_id",title:t("ID")}),Object(x.jsx)(Ra.a.Column,{dataIndex:"title",title:t("Title")}),Object(x.jsx)(Ra.a.Column,{dataIndex:"description",title:t("Description")})]})}}),(O||g)&&Object(x.jsx)(uo,{afterSave:function(){w(),l()},onClose:w,initialValue:g,okText:"".concat(t(g?"Update":"Add")," ").concat(t("Brand"))}),I&&Object(x.jsx)(ua.a,{open:!0,content:t("Are you sure you want to delete")+" ?",onCancel:function(){return N()},onConfirm:function(){return u(I)},cancelButton:t("No"),confirmButton:t("Delete")})]})},bo={title:[mt],departments:[mt],categoryTitle:[mt],subCategoryTitle:[mt]};var ho=function(e){var t=e.initialValue,a=e.afterSave,r=e.onClose,c=e.okText,s=Object(me.a)(["translation"]).t,i=gt(null===t||void 0===t?void 0:t._id),o=i.save,l=i.status;Object(n.useEffect)((function(){l.isSuccess&&(qt.b.success(l.message),a())}),[l,a,r]);var d=tt(s,bo);return Object(x.jsxs)(Xa,{formID:"department-form-modal",onClose:r,okText:c,style:{top:16},children:[Object(x.jsxs)(pa.a,{layout:"vertical",id:"department-form-modal",initialValues:t,onFinish:function(e){o(e,null===t||void 0===t?void 0:t._id)},children:[Object(x.jsx)(pa.a.Item,{name:"title",label:s("Title"),rules:d.title,children:Object(x.jsx)(xa.a,{})}),Object(x.jsx)(pa.a.Item,{name:"description",label:s("Description"),rules:d.description,children:Object(x.jsx)(xa.a.TextArea,{rows:4})}),!(null===t||void 0===t?void 0:t._id)&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{style:{paddingBottom:8},children:s("Categories")}),Object(x.jsx)(pa.a.List,{name:"categories",children:function(e,t){var a=t.add,n=t.remove;return Object(x.jsxs)(x.Fragment,{children:[e.map((function(e){return Object(x.jsxs)("div",{children:[Object(x.jsxs)("div",{className:"categories-form-item-wrapper",children:[Object(x.jsx)(pa.a.Item,{name:[e.name,"title"],fieldKey:[e.fieldKey,"title"],rules:d.categoryTitle,children:Object(x.jsx)(xa.a,{})}),Object(x.jsx)(pa.a.Item,{name:[e.name,"description"],fieldKey:[e.fieldKey,"description"],rules:d.categoryDescription,children:Object(x.jsx)(xa.a.TextArea,{rows:1})}),Object(x.jsx)(at.a,{type:"danger",ghost:!0,icon:Object(x.jsx)(Qa.a,{}),onClick:function(){return n(e.name)}})]}),Object(x.jsx)(pa.a.List,{name:[e.name,"subcategories"],children:function(e,t){var a=t.add,n=t.remove;return Object(x.jsxs)("div",{style:{marginLeft:16,borderBottom:"1px dashed #d9d9d9",borderLeft:"1px dashed #d9d9d9",paddingLeft:16,marginBottom:16},children:[e.map((function(e){return Object(x.jsxs)("div",{className:"subcategories-form-item-wrapper",children:[Object(x.jsx)(pa.a.Item,{name:[e.name,"title"],fieldKey:[e.fieldKey,"title"],rules:d.subCategoryTitle,children:Object(x.jsx)(xa.a,{})}),Object(x.jsx)(pa.a.Item,{name:[e.name,"description"],fieldKey:[e.fieldKey,"description"],rules:d.subCategoryDescription,children:Object(x.jsx)(xa.a.TextArea,{rows:1})}),Object(x.jsx)(at.a,{type:"danger",ghost:!0,icon:Object(x.jsx)(Qa.a,{}),onClick:function(){return n(e.name)}})]},e.key)})),Object(x.jsxs)(at.a,{className:"add-btn",type:"link",onClick:function(){return a()},children:["+ ",s("Add")," ",s("Sub Category")]})]})}})]},e.key)})),Object(x.jsxs)(at.a,{className:"add-btn",type:"link",onClick:function(){return a()},children:["+ ",s("Add")," ",s("Category")]})]})}})]})]}),l.isError&&Object(x.jsx)(ya.a,{message:l.message,type:"error"})]})};a(953);var mo=function(){var e=Object(me.a)(["translation"]).t,t=He(),a=t.all,r=t.total,c=t.search,s=t.filters,i=t.status,o=t.refresh,l=Object(n.useState)(!1),d=Object(j.a)(l,2),b=d[0],h=d[1],m=Object(n.useState)(void 0),O=Object(j.a)(m,2),p=O[0],f=O[1],v=Object(n.useState)(void 0),g=Object(j.a)(v,2),C=g[0],y=g[1],S=gt(),I=S.del,N=S.status,w=function(){h(!1),f(void 0)};Object(n.useEffect)((function(){N.isSuccess&&(y(void 0),o(),qt.b.success(N.message))}),[N]);var T=a.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{categories:(e.categories||[]).map((function(e){return Object(u.a)(Object(u.a)({},e),{},{key:e.title,children:(e.subcategories||[]).map((function(t){return Object(u.a)(Object(u.a)({},t),{},{isLeaf:!0,key:"".concat(e.title," ").concat(t.title)})}))})}))})}));return console.log("departmentsTree :>> ",T),Object(x.jsxs)("div",{className:"container",children:[Object(x.jsx)("h2",{children:e("Departments")}),Object(x.jsxs)("div",{className:"list-actions",children:[Object(x.jsxs)("span",{children:[e("Total"),": ",r]}),Object(x.jsx)("div",{style:{marginLeft:16,marginRight:16},children:Object(x.jsx)(xa.a.Search,{placeholder:e("Search"),onChange:function(e){return c(e.target.value)},value:s.searchText,allowClear:!0})}),Object(x.jsxs)(Ya,{type:"primary",onClick:function(){return h(!0)},children:[e("Add")," ",e("Department")]})]}),Object(x.jsx)(Fa,{status:i,children:function(){return Object(x.jsxs)(Ra.a,{dataSource:T,rowKey:"_id",bordered:!0,children:[Object(x.jsx)(Ra.a.Column,{title:e("Actions"),render:ct(f,y)},"actions"),Object(x.jsx)(Ra.a.Column,{dataIndex:"_id",title:e("ID")}),Object(x.jsx)(Ra.a.Column,{dataIndex:"title",title:e("Title")}),Object(x.jsx)(Ra.a.Column,{dataIndex:"description",title:e("Description")})]})}}),(b||p)&&Object(x.jsx)(ho,{afterSave:function(){w(),o()},onClose:w,initialValue:p,okText:"".concat(e(p?"Update":"Add")," ").concat(e("Department"))}),C&&Object(x.jsx)(ua.a,{open:!0,content:e("Are you sure you want to delete")+" ?",onCancel:function(){return y()},onConfirm:function(){return I(C)},cancelButton:e("No"),confirmButton:e("Delete")})]})},Oo="role-add-form-modal";var po=function(e){var t=e.okText,a=e.onClose,n=Ce(),r=n.data,c=(n.status,{permissions:r});return console.log("initialValue :>> ",c),Object(x.jsx)(Xa,{className:Oo,formID:Oo,okText:t,onClose:a,width:"100%",style:{top:16},organizationId:null===c||void 0===c?void 0:c.organizationId,children:Object(x.jsxs)(pa.a,{id:Oo,initialValues:c,children:[Object(x.jsx)(pa.a.Item,{label:__("Title"),name:"title",children:Object(x.jsx)(xa.a,{})}),Object(x.jsx)(pa.a.List,{name:"permissions",children:console.log})]})})},xo=[{title:__("Role"),dataIndex:"title",key:"title"},{title:__("Permissions"),dataIndex:"permissions",key:"permissions"}];function fo(e){var t=e.data,a=(e.status,e.columns);return Object(x.jsx)(Ra.a,{dataSource:t,columns:a})}var vo=function(){var e=Object(n.useState)(!1),t=Object(j.a)(e,2),a=t[0],r=t[1];return Object(x.jsxs)("div",{children:[Object(x.jsxs)(at.a,{onClick:function(){return r(!0)},type:"primary",children:[__("Add")," ",__("Role")]}),Object(x.jsx)(fo,{data:[],columns:xo}),a&&Object(x.jsx)(po,{})]})},go=a(308),Co=a(543);function yo(){return Object(n.useEffect)((function(){localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("onboarded"),localStorage.removeItem("organizationId"),localStorage.removeItem("locale")}),[]),Object(x.jsx)("div",{children:"DONE"})}var So={"en-US":go.a,"pt-BR":Co.a},Io={validateMessages:{required:"field is required"}},No=function(){return localStorage.getItem("token")},wo=function(){return!!localStorage.getItem("onboarded")},To=function(){var e,t=Object(me.a)("translation").t,a=Object(n.useState)(null!==(e=localStorage.getItem("organizationId"))&&void 0!==e?e:void 0),r=Object(j.a)(a,2),c=r[0],s=r[1],o=Object(n.useState)(No),l=Object(j.a)(o,2),d=l[0],h=l[1],m=Object(n.useState)(localStorage.getItem("locale")||"pt-BR"),O=Object(j.a)(m,2),p=O[0],f=O[1],v=B(wo()?void 0:"/api/check-onboarded"),g=Object(j.a)(v,2),C=g[0],y=(C=void 0===C?{}:C).onboarded,S=void 0!==y&&y,I=g[1],N=Object(n.useMemo)((function(){return wo()||S}),[S]),w=Object(n.useCallback)((function(e){localStorage.setItem("token",e),h(e)}),[]),T=function(){localStorage.removeItem("token"),h()},P=Object(n.useMemo)((function(){return d?function(e){try{return JSON.parse(atob(e.split(".")[1]))}catch(t){return void console.error(t)}}(d):{}}),[d]),A=P.user,E=Object(n.useMemo)((function(){return Object(u.a)(Object(u.a)({},d?{token:d,user:A}:{}),{},{logout:T})}),[d,A]);Object(n.useEffect)((function(){c?localStorage.setItem("organizationId",c):localStorage.removeItem("organizationId")}),[c]),Object(n.useEffect)((function(){I.isSuccess&&localStorage.setItem("onboarded",S)}),[I,S]),Object(n.useEffect)((function(){!N&&I.isSuccess&&Object(b.d)("/onboard")}),[N,I]),Object(n.useEffect)((function(){i.a.changeLanguage(p),localStorage.setItem("locale",p)}),[p]),Object(n.useEffect)((function(){d||Object(b.d)("/login")}),[d]);var R="false"!==new URLSearchParams(window.location.search).get("nav"),_=Object(n.useMemo)((function(){return Object(u.a)(Object(u.a)({},Io),{},{validateMessages:Object.fromEntries(Object.entries(Io.validateMessages).map((function(e){var a=Object(j.a)(e,2),n=a[0],r=a[1];return[n,t(r)]})))})}),[t]);return Object(x.jsx)(k.Provider,{value:E,children:Object(x.jsx)(D.Provider,{value:c,children:Object(x.jsx)(ln.a,{form:_,locale:So[p],children:Object(x.jsxs)("div",{className:"fill",children:[d&&R&&Object(x.jsx)("header",{className:"noprint",children:Object(x.jsx)(Sc,{admin:A,logout:T,onOrganizationChange:s,onLocaleChange:f,locale:p})}),Object(x.jsx)("main",{className:"fill",children:Object(x.jsxs)(b.c,{id:"router",children:[Object(x.jsx)(Ut,{path:"login",onLogin:w}),Object(x.jsx)(yo,{path:"reset-cache"}),Object(x.jsx)(oo,{path:"/onboard"}),Object(x.jsx)(tn,{path:"/",component:Oc}),Object(x.jsx)(tn,{path:"/products",component:rr}),Object(x.jsx)(tn,{path:"/products/view/:id",component:Wc}),Object(x.jsx)(tn,{path:"/departments",component:mo}),Object(x.jsx)(tn,{path:"/categories",component:gr}),Object(x.jsx)(tn,{path:"/subcategories",component:br}),Object(x.jsx)(tn,{path:"/brands",component:jo}),Object(x.jsx)(tn,{path:"/models",component:Ec}),Object(x.jsx)(tn,{path:"/orders",component:qs}),Object(x.jsx)(tn,{path:"/orders/view/:id",admin:A,component:ci}),Object(x.jsx)(tn,{path:"/clients",component:Us}),[1,2,3].includes(null===A||void 0===A?void 0:A.roleNumber)&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(tn,{path:"/cheques",component:Hr}),Object(x.jsx)(tn,{path:"/expenses",component:tc}),Object(x.jsx)(tn,{path:"/expenses/:id",component:Di})]}),Object(x.jsx)(tn,{path:"/tasks",component:zi}),Object(x.jsx)(tn,{path:"/tasks/:id",component:Vn}),[1,2].includes(null===A||void 0===A?void 0:A.roleNumber)&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(tn,{path:"/orgs",component:vi}),Object(x.jsx)(tn,{path:"/wood-price-calculator",component:Fi}),Object(x.jsx)(tn,{path:"/roles-permissions",component:vo}),Object(x.jsx)(tn,{path:"/vehicles",component:Yi}),Object(x.jsx)(tn,{path:"/vehicles/:id",component:Wi})]}),[1,2,3].includes(null===A||void 0===A?void 0:A.roleNumber)&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(tn,{path:"/admins",component:ei}),Object(x.jsx)(tn,{path:"/print-everything",component:co})]}),[1,2,3].includes(null===A||void 0===A?void 0:A.roleNumber)&&Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(tn,{exact:!0,path:"/wood-price-calculator",component:Fi})}),Object(x.jsx)(Ic,{default:!0})]})})]})})})})},Po=(a(954),a(307)),Do=function(){return Object(x.jsx)(n.Suspense,{fallback:Object(x.jsx)(Po.a,{}),children:Object(x.jsx)(To,{})})};s.a.render(Object(x.jsx)(Do,{}),document.getElementById("root"))}},[[955,1,2]]]);
//# sourceMappingURL=main.cdff6e9e.chunk.js.map